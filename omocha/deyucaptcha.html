<!DOCTYPE html>
<html lang="ja">
    <head prefix="og: http://ogp.me/ns# website: http://ogp.me/ns/website#">
        <meta charset="UTF-8">
        <!--文字コードは上のほうにないとすべておしまいになるらしい-->
        <meta name="description" content="人間ならできるでしょ、というゲーム">                                                                 <!--ページ説明　入力すること！-->
        <title>JUN汁ｗおもちゃばこ。/おもちゃ/でゆキャプチャ</title>                                                         <!--タイトル　入力すること！-->
        <!--OGPとかいうの-->
        <meta property="og:site_name" content="JUN汁ｗおもちゃばこ。/omocha/deyucaptcha">                                <!--タイトル　入力すること！-->
        <meta property="og:title" content="でゆキャプチャ">                                                               <!--タイトル　入力すること！-->
        <meta property="og:type" content="article"> <!--websiteはトップページ、articleが記事だってさ-->
        <meta property="og:url" content="https://junjiruw.github.io/DEYUTI/omocha/deyucaptcha.html">                   <!--リンク　入力すること！-->
        <meta property="og:image" content="https://github.com/junjiruw/DEYUTI/blob/master/images/site/junjiruw_bako.png?raw=true">
        <meta name="twitter:card" content="summary"><!--なにを表示するか-->
        <meta name="twitter:site" content="@junjiruw"><!--フッターに表示されるらしい…どこ？-->
        <link rel="stylesheet" href="../css/style.css">
        
        <link rel="icon" href="../images/site/favicon32.png">
        <style>
            div#mannaka{
                width: 98%;
                margin: auto;
                background: #16151a;
                border: 2px solid #ffffff;
                color: #ffffff;   
                font-size: 16px;    
            }

            div#parent_div{
                text-align: center;
                margin: 10px;
            }
            #canvas{
                background: #ffffff;
                height: 70vh;/*これ、PCブラウザで横に狭くしたら崩壊せえへん？→勝手に崩壊してろ　→スマホはどースンだよ→そこはonloadくんとこで頑張ってもろて…*/
                /*image-rendering: pixelated;ドット絵を拡大したいなら使え*/
            }
            #start_button{
                position: fixed;
                background: #ffffff;
            }
        </style>

        <!-- Google tag (gtag.js) -->
        <script async src="https://www.googletagmanager.com/gtag/js?id=G-1MB5XLN4LW"></script>
        <script>
            window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
            gtag('config', 'G-1MB5XLN4LW');
        </script>
        <!-- Google tag (gtag.js) -->

        <script src="../js/public.js"></script>

        <!--pixiJSを読み込もう-->
        <script src="../js/library/pixi.min.js"></script>
        <!--ライセンス表記はコイツの中に書いてあるぜ！-->
        <!--HOWLERを読み込もう-->
        <script src="../js/library/howler.min.js"></script>
        <!--ライセンス表記はコイツの中に書いてあるぜ！-->

        <script>
            onload = function(){
                onload_functions();

                //宣言系をここにまとめるとめちゃエエね--------------------------------------------------------------------------------
                const canvas =document.getElementById("canvas");
                if (navigator.userAgent.match(/iPhone|Android.+Mobile/)) {//貴様！スマホで見ているな！？
                    canvas.style.width=90+"%";//スマホでみるとキャンバスでかいから縮めよう
                    canvas.style.height=canvas.clientWidth+"px";
                }
                let クリック音;
                let ブブ音;
                let スタート済み=false;
                const スタートボタン =document.getElementById("start_button");
                function スタートボタン押し() {
                    スタートボタン.style.display="none";
                    //ここから音声の定義ーーーーーーーーーーーーーーーー
                    クリック音 = new Howl({
                        src: ["../sound/omocha/deyucaptcha/クリック.wav"],
                        loop: false,// 繰り返し再生をする/しない
                        volume: 1.0,// 音量(0.0 ~ 1.0)
                    });
                    ブブ音 = new Howl({
                        src: ["../sound/omocha/deyucaptcha/ブブ.wav"],
                        loop: false,// 繰り返し再生をする/しない
                        volume: 1.0,// 音量(0.0 ~ 1.0)
                    });
                    //ここまで音声の定義ーーーーーーーーーーーーーーーー
                    クリック音.play();
                    タイトル図形.lineStyle(10, 0x2070ff, 1);
                    スタート済み=true;
                }   
                スタートボタン.addEventListener("click", スタートボタン押し);

                const app = new PIXI.Application({//PIXIアプリを作成
                    view : canvas, //canvas指定
                    //antialias : true,//アンチエイリアス。デフォルトOFF
                    //preserveDrawingBuffer: true,//
                    backgroundColor: 0x303030,
                    width:1000,
                    height:1000,
                });
                


                const 基本文字=new PIXI.TextStyle({
                    fontSize: 40,
                    fill: 0x101010,
                    fontWeight: 300,

                });
                const デカ文字_白=new PIXI.TextStyle({
                    fontSize: 80,
                    fill: 0xffffff,
                    fontWeight: 900,

                });
                const 太文字_白=new PIXI.TextStyle({
                    fontSize: 50,
                    fill: 0xffffff,
                    fontWeight: 900,

                });
                const 基本文字_白=new PIXI.TextStyle({
                    fontSize: 40,
                    fill: 0xffffff,
                    fontWeight: 300,

                });
                const ちび文字=new PIXI.TextStyle({
                    fontSize: 25,
                    fill: 0x101010,
                    fontWeight: 100,

                });

                let タイトルコンテナ = new PIXI.Container();
                app.stage.addChild(タイトルコンテナ);
                タイトルコンテナ.position.set(150,425);
                const タイトル図形=new PIXI.Graphics();
                タイトルコンテナ.addChild(タイトル図形);
                タイトル図形.beginFill(0xf0f0f0);
                タイトル図形.drawRect(0,0,700,150);
                タイトル図形.endFill();
                タイトル図形.beginFill(0xffffff);
                タイトル図形.drawRect(25,25,80,80);//150 425
                タイトル図形.endFill();
                タイトル図形.lineStyle(5,0xa0a0a0,1);
                タイトル図形.drawRect(25,25,80,80);
                スタートボタン.style.width=canvas.clientWidth*0.08+"px";
                スタートボタン.style.height=canvas.clientHeight*0.08+"px";
                const のっとろぼ = new PIXI.Text( "私はロボットではあり\nません。" ,基本文字);
                のっとろぼ.position.set(140,35);
                タイトルコンテナ.addChild( のっとろぼ );
                const みぎしたのヤツ = new PIXI.Text( "DeyuCaptcha" ,ちび文字);
                みぎしたのヤツ.position.set(540,115);
                タイトルコンテナ.addChild( みぎしたのヤツ );
                const logo_image= PIXI.Texture.from("../images/omocha/deyucaptcha/deyucaptcha.png");//ロード。スプライト作成も同時にできるっぽいけど、いっか。
                const ロゴ=new PIXI.Sprite(logo_image);
                ロゴ.anchor.set(0.5,0.5);
                ロゴ.scale.set(0.5,0.5);
                ロゴ.position.set(610,65);
                タイトルコンテナ.addChild(ロゴ);

                let mainコンテナ = new PIXI.Container();
                //app.stage.addChild(mainコンテナ);//使うタイミングで追加しようね
                mainコンテナ.alpha=0;
                mainコンテナ.position.set(150,50);
                const main図形=new PIXI.Graphics();
                mainコンテナ.addChild(main図形);
                main図形.beginFill(0xffffff);
                main図形.drawRect(0,0,700,900);
                main図形.endFill();
                main図形.beginFill(0x20a0ff);
                main図形.drawRect(10,10,680,180);
                main図形.endFill();
                const koitu_image= PIXI.Texture.from("../images/omocha/deyucaptcha/150deyu.png");//ロード。スプライト作成も同時にできるっぽいけど、いっか。
                const コイツ=new PIXI.Sprite(koitu_image);
                コイツ.position.set(500,20);
                mainコンテナ.addChild(コイツ);
                const タイトル文_1 = new PIXI.Text( "作者" ,デカ文字_白);
                タイトル文_1.position.set(30,30);
                mainコンテナ.addChild(タイトル文_1);
                const タイトル文_2 = new PIXI.Text( "を全て選んで下さい。" ,基本文字_白);
                タイトル文_2.position.set(50,130);
                mainコンテナ.addChild(タイトル文_2);
                const ロゴ_main=new PIXI.Sprite(logo_image);
                ロゴ_main.scale.set(0.4,0.4);
                ロゴ_main.position.set(20,820);
                mainコンテナ.addChild(ロゴ_main);
                const ひだりしたのヤツ_main = new PIXI.Text( "DeyuCaptcha" ,ちび文字);
                ひだりしたのヤツ_main.position.set(100,870);
                mainコンテナ.addChild( ひだりしたのヤツ_main );

                const チェックマーク= PIXI.Texture.from("../images/omocha/deyucaptcha/tilekku200.png");//ロード。スプライト作成も同時にできるっぽいけど、いっか。

                let ステージ1コンテナ = new PIXI.Container();
                ステージ1コンテナ.position.set(50,200);
                const ステージ1テクスチャ= new PIXI.BaseTexture("../images/omocha/deyucaptcha/deyuc1.png");//ロード。スプライト作成も同時にできるっぽいけど、いっか。
                let 中央四角_1 = new Array(9); 
                let セレクトさん_1 = new Array(9); 
                for(let i=0;i<9;i++){
                    中央四角_1[i]=new PIXI.Sprite();
                    中央四角_1[i].selected=0;
                    ステージ1コンテナ.addChild(中央四角_1[i]);
                    中央四角_1[i].anchor.set(0.5,0.5);
                    中央四角_1[i].position.set(100+200*(i%3),100+200*Math.floor(i/3));
                    中央四角_1[i].texture=new PIXI.Texture(ステージ1テクスチャ, new PIXI.Rectangle(200*(i%3),200*Math.floor(i/3), 200, 200));
                    中央四角_1[i].on("pointerdown",()=>{
                        クリック音.play();
                        if(中央四角_1[i].selected==0){
                            中央四角_1[i].selected=1;
                            中央四角_1[i].scale.set(0.85,0.85);
                            セレクトさん_1[i].visible = true;
                        }else{
                            中央四角_1[i].selected=0;
                            中央四角_1[i].scale.set(1,1);
                            セレクトさん_1[i].visible = false;
                        }
                    });
                    中央四角_1[i].interactive=true;//タッチ操作許可

                    セレクトさん_1[i]=new PIXI.Sprite(チェックマーク);
                    セレクトさん_1[i].scale.set(0.3,0.3);
                    セレクトさん_1[i].position.set(200*(i%3),200*Math.floor(i/3));
                    セレクトさん_1[i].visible = false;
                    ステージ1コンテナ.addChild(セレクトさん_1[i]);
                }
                const 枠線_1=new PIXI.Graphics();
                ステージ1コンテナ.addChild(枠線_1);
                枠線_1.lineStyle(5,0x202020,0.5);
                枠線_1.moveTo(0,-2);
                枠線_1.lineTo(0,600);
                枠線_1.lineTo(600,600);
                枠線_1.lineTo(600,0);
                枠線_1.lineTo(-2,0);

                枠線_1.moveTo(200,0);
                枠線_1.lineTo(200,600);
                枠線_1.moveTo(400,0);
                枠線_1.lineTo(400,600);
                枠線_1.moveTo(0,200);
                枠線_1.lineTo(600,200);
                枠線_1.moveTo(0,400);
                枠線_1.lineTo(600,400);
                mainコンテナ.addChild(ステージ1コンテナ);

                let ステージ2コンテナ = new PIXI.Container();
                ステージ2コンテナ.position.set(50,200);
                const ステージ2テクスチャ= new PIXI.BaseTexture("../images/omocha/deyucaptcha/deyuc2.png");//ロード。スプライト作成も同時にできるっぽいけど、いっか。
                const 横断テクスチャ_1= new PIXI.BaseTexture("../images/omocha/deyucaptcha/arukideyu_1.png");
                const 横断テクスチャ_2= new PIXI.BaseTexture("../images/omocha/deyucaptcha/arukideyu_2.png");
                ステージ2コンテナ.sortableChildren = true;//Zソート
                let 歩く場所=new Array(4);
                for(let i=0;i<4;i++){
                    歩く場所[i]=new PIXI.Sprite();
                    歩く場所[i].anchor.set(0.5,0.5);
                    歩く場所[i].height=150;
                    歩く場所[i].width=150;

                    歩く場所[i].position.set(75+150*(i),75+300);
                    歩く場所[i].zIndex = 1;
                    歩く場所[i].backgroundColor = "#ff0000";
                    ステージ2コンテナ.addChild(歩く場所[i]);
                }
                let 中央四角_2 = new Array(16); 
                let セレクトさん_2 = new Array(16); 
                for(let i=0;i<16;i++){
                    中央四角_2[i]=new PIXI.Sprite();
                    中央四角_2[i].selected=0;
                    ステージ2コンテナ.addChild(中央四角_2[i]);
                    中央四角_2[i].anchor.set(0.5,0.5);
                    中央四角_2[i].position.set(75+150*(i%4),75+150*Math.floor(i/4));
                    中央四角_2[i].texture=new PIXI.Texture(ステージ2テクスチャ, new PIXI.Rectangle(150*(i%4),150*Math.floor(i/4), 150, 150));
                    中央四角_2[i].on("pointerdown",()=>{
                        クリック音.play();
                        if(中央四角_2[i].selected==0){
                            中央四角_2[i].selected=1;
                            中央四角_2[i].scale.set(0.85,0.85);
                            if(i>7 && i<12){
                                歩く場所[i%4].scale.set(0.425,0.425);
                            }
                            セレクトさん_2[i].visible = true;
                        }else{
                            中央四角_2[i].selected=0;
                            中央四角_2[i].scale.set(1,1);
                            if(i>7 && i<12){
                                歩く場所[i%4].scale.set(0.5,0.5);
                            }
                            セレクトさん_2[i].visible = false;
                        }
                    });
                    中央四角_2[i].interactive=true;//タッチ操作許可

                    セレクトさん_2[i]=new PIXI.Sprite(チェックマーク);
                    セレクトさん_2[i].scale.set(0.3,0.3);
                    セレクトさん_2[i].position.set(150*(i%4),150*Math.floor(i/4));
                    セレクトさん_2[i].visible = false;
                    ステージ2コンテナ.addChild(セレクトさん_2[i]);
                }
                const 枠線_2=new PIXI.Graphics();
                ステージ2コンテナ.addChild(枠線_2);
                枠線_2.lineStyle(5,0x202020,0.5);
                枠線_2.moveTo(0,-2);
                枠線_2.lineTo(0,600);
                枠線_2.lineTo(600,600);
                枠線_2.lineTo(600,0);
                枠線_2.lineTo(-2,0);

                枠線_2.moveTo(150,0);
                枠線_2.lineTo(150,600);
                枠線_2.moveTo(300,0);
                枠線_2.lineTo(300,600);
                枠線_2.moveTo(450,0);
                枠線_2.lineTo(450,600);
                枠線_2.moveTo(0,150);
                枠線_2.lineTo(600,150);
                枠線_2.moveTo(0,300);
                枠線_2.lineTo(600,300);
                枠線_2.moveTo(0,450);
                枠線_2.lineTo(600,450);
                ステージ2コンテナ.alpha=0;
                //mainコンテナ.addChild(ステージ2コンテナ); ここで追加してもいいのでは？←知らんでゆ。

                let ステージ3コンテナ = new PIXI.Container();
                ステージ3コンテナ.position.set(50,200);
                const ステージ3テクスチャ= new PIXI.BaseTexture("../images/site/junjiruw_pro.png");
                let 中央四角_3 = new Array(16); 
                let セレクトさん_3 = new Array(16); 
                for(let i=0;i<16;i++){
                    中央四角_3[i]=new PIXI.Sprite();
                    中央四角_3[i].selected=0;
                    ステージ3コンテナ.addChild(中央四角_3[i]);
                    中央四角_3[i].anchor.set(0.5,0.5);
                    中央四角_3[i].position.set(75+150*(i%4),75+150*Math.floor(i/4));
                    中央四角_3[i].texture=new PIXI.Texture(ステージ3テクスチャ, new PIXI.Rectangle(0,0, 640, 640));
                    中央四角_3[i].scale.set(0.3,0.3);
                    中央四角_3[i].alpha=0;//透明に。
                    中央四角_3[i].on("pointerdown",()=>{
                        クリック音.play();
                        if(中央四角_3[i].selected==0){
                            中央四角_3[i].selected=1;
                            if(i==でゆっち_x+でゆっち_y*4){
                                //やべ
                                if(でゆっち_x!=0 && 中央四角_3[i-1].selected==0){//左端じゃないとき かつ　左にいける
                                    でゆっち_x-=1;
                                    中央四角_3[i].alpha=0;//透明に。
                                    中央四角_3[i-1].alpha=1;//召喚。
                                }else if(でゆっち_y!=0 && 中央四角_3[i-4].selected==0){//上端じゃないとき かつ　上にいける
                                    でゆっち_y-=1;
                                    中央四角_3[i].alpha=0;//透明に。
                                    中央四角_3[i-4].alpha=1;//召喚。
                                }else if(でゆっち_x!=3 && 中央四角_3[i+1].selected==0){//右端じゃないとき かつ　右にいける
                                    でゆっち_x+=1;
                                    中央四角_3[i].alpha=0;//透明に。
                                    中央四角_3[i+1].alpha=1;//召喚。
                                }else if(でゆっち_y!=3 && 中央四角_3[i+4].selected==0){//上端じゃないとき かつ　上にいける
                                    でゆっち_y+=1;
                                    中央四角_3[i].alpha=0;//透明に。
                                    中央四角_3[i+4].alpha=1;//召喚。
                                }
                            }
                            中央四角_3[i].scale.set(0.255,0.255);
                            セレクトさん_3[i].visible = true;
                        }else{
                            中央四角_3[i].selected=0;
                            中央四角_3[i].scale.set(0.3,0.3);
                            セレクトさん_3[i].visible = false;
                        }
                    });
                    中央四角_3[i].interactive=true;//タッチ操作許可

                    セレクトさん_3[i]=new PIXI.Sprite(チェックマーク);
                    セレクトさん_3[i].scale.set(0.3,0.3);
                    セレクトさん_3[i].position.set(150*(i%4),150*Math.floor(i/4));
                    セレクトさん_3[i].visible = false;
                    ステージ3コンテナ.addChild(セレクトさん_3[i]);
                }
                let でゆっち_x=2;
                let でゆっち_y=2;
                中央四角_3[でゆっち_x+でゆっち_y*4].alpha=1;
                const 枠線_3=new PIXI.Graphics();
                ステージ3コンテナ.addChild(枠線_3);
                枠線_3.lineStyle(5,0x202020,0.5);
                枠線_3.moveTo(0,-2);
                枠線_3.lineTo(0,600);
                枠線_3.lineTo(600,600);
                枠線_3.lineTo(600,0);
                枠線_3.lineTo(-2,0);

                枠線_3.moveTo(150,0);
                枠線_3.lineTo(150,600);
                枠線_3.moveTo(300,0);
                枠線_3.lineTo(300,600);
                枠線_3.moveTo(450,0);
                枠線_3.lineTo(450,600);
                枠線_3.moveTo(0,150);
                枠線_3.lineTo(600,150);
                枠線_3.moveTo(0,300);
                枠線_3.lineTo(600,300);
                枠線_3.moveTo(0,450);
                枠線_3.lineTo(600,450);
                ステージ3コンテナ.alpha=0;

                let ステージ4コンテナ = new PIXI.Container();
                ステージ4コンテナ.position.set(50,200);
                ステージ4コンテナ.sortableChildren = true;//Zソート
                const ステージ4テクスチャ= new PIXI.BaseTexture("../images/omocha/deyucaptcha/junjiruw_kao.png");
                でゆ顔= new PIXI.Sprite();
                ステージ4コンテナ.addChild(でゆ顔);
                でゆ顔.position.set(300,300);
                でゆ顔.zIndex=10;
                でゆ顔.anchor.set(0.5,0.5);
                でゆ顔.scale.set(0.3,0.3);
                でゆ顔.texture=new PIXI.Texture(ステージ4テクスチャ);


                let 白玉 = new Array(8); 
                let 白玉_x=[60,120,170,210,340,390,460,510];
                let 白玉_y=[70,450,370,180,140,290,460,50];
                for(let i=0;i<8;i++){
                    白玉[i]= new PIXI.Graphics();
                    白玉[i].position.set(白玉_x[i],白玉_y[i]);
                    白玉[i].zIndex=i;
                    白玉[i].lineStyle(15, 0x000000,1);
                    白玉[i].beginFill(0xffffff);
                    白玉[i].drawCircle(0,0,30+Math.random()*10);   
                    ステージ4コンテナ.addChild(白玉[i]);
                    白玉[i].endFill();
                }
                let 灰玉 = new Array(8); 
                let 灰玉_x=[180,220,100,510,310,450,400,70];
                let 灰玉_y=[270,150,570,180,540,190,360,150];
                for(let i=0;i<8;i++){
                    灰玉[i]= new PIXI.Graphics();
                    灰玉[i].position.set(灰玉_x[i],灰玉_y[i]);
                    灰玉[i].zIndex=i;
                    灰玉[i].lineStyle(15, 0x000000,1);
                    灰玉[i].beginFill(0x9f9f9f);
                    灰玉[i].drawCircle(0,0,20+Math.random()*20);   
                    ステージ4コンテナ.addChild(灰玉[i]);
                    灰玉[i].endFill();
                }
                let 黒玉 = new Array(8); 
                let 黒玉_x=[100,220,200,510,350,250,200,520];
                let 黒玉_y=[340,50,500,510,240,290,560,350];
                for(let i=0;i<8;i++){
                    黒玉[i]= new PIXI.Graphics();
                    黒玉[i].position.set(黒玉_x[i],黒玉_y[i]);
                    黒玉[i].zIndex=i;
                    黒玉[i].lineStyle(15, 0x000000,1);
                    黒玉[i].beginFill(0x000000);
                    黒玉[i].drawCircle(0,0,20+Math.random()*20);   
                    ステージ4コンテナ.addChild(黒玉[i]);
                    黒玉[i].endFill();
                }

                let 中央四角_4 = new Array(16); 
                let セレクトさん_4 = new Array(16); 
                for(let i=0;i<16;i++){
                    中央四角_4[i]= new PIXI.Graphics();
                    中央四角_4[i].selected=0;
                    ステージ4コンテナ.addChild(中央四角_4[i]);
                    中央四角_4[i].position.set(75+150*(i%4),75+150*Math.floor(i/4));
                    中央四角_4[i].lineStyle(5, 0x000000,1);
                    中央四角_4[i].beginFill(0xeff9ff);
                    中央四角_4[i].drawRect(-75,-75,150,150);
                    中央四角_4[i].endFill();
                    中央四角_4[i].zIndex = -1;

                    中央四角_4[i].hitArea = new PIXI.Rectangle(-75,-75, 150, 150);
     
                    中央四角_4[i].on("pointerdown",()=>{
                        クリック音.play();
                        if(中央四角_4[i].selected==0){
                            中央四角_4[i].selected=1;
                            セレクトさん_4[i].visible = true;
                        }else{
                            中央四角_4[i].selected=0;
                            セレクトさん_4[i].visible = false;
                        }
                    });
                    中央四角_4[i].interactive=true;//タッチ操作許可

                    セレクトさん_4[i]=new PIXI.Sprite(チェックマーク);
                    セレクトさん_4[i].scale.set(0.3,0.3);
                    セレクトさん_4[i].position.set(150*(i%4),150*Math.floor(i/4));
                    セレクトさん_4[i].visible = false;
                    セレクトさん_4[i].zIndex=11;
                    ステージ4コンテナ.addChild(セレクトさん_4[i]);
                }
                ステージ4コンテナ.alpha=0;

                const 確認ボタン=new PIXI.Graphics();
                mainコンテナ.addChild(確認ボタン);
                確認ボタン.beginFill(0x20a0ff);
                確認ボタン.drawRect(500,810,180,80);
                確認ボタン.endFill();
                確認ボタン.on("pointerdown",()=>{
                    let 君はもう正解したか=0;//!?が変数名に使えないって知ってましたか？私は今知りました。
                    if(ゲーム進行度==3){
                        let 正解_1=[0,0,0,0,1,1,0,1,1];
                        君はもう正解したか=0;
                        for(let i=0;i<9;i++){
                            if((正解_1[i]==0 && 中央四角_1[i].selected==0)||(正解_1[i]==1 && 中央四角_1[i].selected==1)){
                            }else{
                                君はもう正解したか+=1;//ミスするとさ、それだけダメージを負ってもらうことになるかもしれないよね
                            }
                        }
                        if(君はもう正解したか==0){//お前はすごい！
                            クリック音.play();
                            mainコンテナ.filters = [普通_Filter];//正常化
                            ゲーム進行度=4;
                            animation_time=20;
                        }else{//お前はすごくない！
                            animation_time=10;
                            ブブ音.play();
                        }
                    }else if(ゲーム進行度==6){
                        let 正解_2=[];
                        if(animation_time<30){//正解分岐
                            正解_2=[0,0,0,0,0,0,0,0, 0,0,0,1, 0,0,0,0];
                        }else if(animation_time<60){
                            正解_2=[0,0,0,0,0,0,0,0, 0,0,1,1, 0,0,0,0];
                        }else if(animation_time<90){
                            正解_2=[0,0,0,0,0,0,0,0, 0,1,1,0, 0,0,0,0];
                        }else if(animation_time<120){
                            正解_2=[0,0,0,0,0,0,0,0, 1,1,0,0, 0,0,0,0];
                        }else if(animation_time<150){
                            正解_2=[0,0,0,0,0,0,0,0, 1,0,0,0, 0,0,0,0];
                        }else{
                            正解_2=[0,0,0,0,0,0,0,0, 0,0,0,0, 0,0,0,0];
                        }
                        君はもう正解したか=0;
                        for(let i=0;i<16;i++){
                            if((正解_2[i]==0 && 中央四角_2[i].selected==0)||(正解_2[i]==1 && 中央四角_2[i].selected==1)){
                            }else{
                                君はもう正解したか+=1;//ミスするとさ、それだけダメージを負ってもらうことになるかもしれないよね
                            }
                        }
                        if(君はもう正解したか==0){//お前はすごい！
                            クリック音.play();
                            mainコンテナ.filters = [普通_Filter];//正常化
                            ゲーム進行度=7;
                            animation_time=20;
                        }else{//お前はすごくない！
                            animation_time2=10;
                            ブブ音.play();
                        }
                    }else if(ゲーム進行度==9){
                       
                       君はもう正解したか=0;
                       for(let i=0;i<16;i++){
                           if((i==でゆっち_x+でゆっち_y*4 && 中央四角_3[i].selected==1)||(i!=でゆっち_x+でゆっち_y*4 && 中央四角_3[i].selected==0)){
                           }else{
                               君はもう正解したか+=1;//ミスするとさ、それだけダメージを負ってもらうことになるかもしれないよね
                           }
                       }
                       if(君はもう正解したか==0){//お前はすごい！
                           クリック音.play();
                           mainコンテナ.filters = [普通_Filter];//正常化
                           ゲーム進行度=10;
                           animation_time=20;
                       }else{//お前はすごくない！
                           animation_time=10;
                           ブブ音.play();
                       }
                   }else if(ゲーム進行度==12){
                       
                       君はもう正解したか=0;
                       for(let i=0;i<16;i++){
                           if(中央四角_4[i].selected==1){
                           }else{
                               君はもう正解したか+=1;//ミスするとさ、それだけダメージを負ってもらうことになるかもしれないよね
                           }
                       }
                       if(君はもう正解したか==0){//お前はすごい！
                           クリック音.play();
                           mainコンテナ.filters = [普通_Filter];//正常化
                           ゲーム進行度=13;
                           animation_time=20;
                       }else{//お前はすごくない！
                           animation_time=10;
                           ブブ音.play();
                       }
                   }
                });
                確認ボタン.interactive=true;//タッチ操作許可
                const 確認テキスト = new PIXI.Text( "確認" ,太文字_白);
                確認テキスト.position.set(540,825);
                mainコンテナ.addChild(確認テキスト);
                


                let RED_fragment = `
                varying vec2 vTextureCoord;
                uniform sampler2D uSampler;
                void main(void)
                {
                    gl_FragColor = texture2D(uSampler, vTextureCoord)+vec4(1.0, 0, 0, 0);
                }
                `;//赤くするよ。
                let RED_Filter = new PIXI.Filter(null, RED_fragment);

                let 普通_fragment = `
                varying vec2 vTextureCoord;
                uniform sampler2D uSampler;
                void main(void)
                {
                    gl_FragColor = texture2D(uSampler, vTextureCoord);
                }
                `;//赤くしないよ
                let 普通_Filter = new PIXI.Filter(null, 普通_fragment);

                let animation_time=0;
                let animation_time2=0;
                let ゲーム進行度=0;

                //宣言系をここにまとめるとめちゃエエね--------------------------------------------------------------------------------
                app.ticker.add(loop);
                let time=0;
                
                function loop(delta){//1/60[s]くらいで動く。引数は前フレームからの経過時間*60  app.ticker.speed = 3;で変えられるらしいっすよ
                    time+=delta;
                    if(time>1000000){time=0;}

                    if(ゲーム進行度==0){
                        if(!スタート済み){//スタートボタンの位置調整
                            スタートボタン.style.left= (canvas.getBoundingClientRect().left+175*canvas.clientWidth/canvas.width) +"px";
                            スタートボタン.style.top= (canvas.getBoundingClientRect().top+450*canvas.clientHeight/canvas.height) +"px";
                        }else{
                            animation_time+=1;
                            if(animation_time>=25 ){
                                タイトルコンテナ.rotation+=delta/30;//ちょっと曲げよう
                            }
                            if(animation_time<8){

                                タイトル図形.moveTo(43+3*(animation_time-1), 61+3*(animation_time-1));//線引くぜ
                                タイトル図形.lineTo(43+3*(animation_time), 61+3*(animation_time));//線引くぜ
                            }else if(15<animation_time && animation_time<25){
                                
                                タイトル図形.moveTo(57+4*(animation_time-16), 82-4*(animation_time-16));//線引くぜ
                                タイトル図形.lineTo(57+4*(animation_time-15), 82-4*(animation_time-15));//線引くぜ
                            }else if(animation_time==30){
                                ゲーム進行度=1;
                                animation_time=0;
                            }
                            
                        }
                    }else if(ゲーム進行度==1){
                        animation_time+=1;
                        タイトルコンテナ.rotation+=delta/40-0.00004*(animation_time*animation_time-5*animation_time);
                        タイトルコンテナ.y=425+0.4*animation_time*animation_time-2*animation_time;//落ちろ
                        if(animation_time==40){
                            タイトルコンテナ.destroy();
                            animation_time=0;
                            app.stage.addChild(mainコンテナ);
                            ゲーム進行度=2;
                        }
                    }else if(ゲーム進行度==2){
                        animation_time+=1;
                        mainコンテナ.alpha=animation_time/20;
                        if(animation_time==20){
                            ゲーム進行度=3;
                            animation_time=0;
                        }
                    }else if(ゲーム進行度==3){
                        if(animation_time>0){
                            animation_time-=1;
                            mainコンテナ.position.set(150+animation_time*(animation_time%2-1),50);

                            RED_fragment = `
                            varying vec2 vTextureCoord;
                            uniform sampler2D uSampler;
                            void main(void)
                            {
                                gl_FragColor = texture2D(uSampler, vTextureCoord)+vec4(`+animation_time/10+","+(-animation_time/30)+","+(-animation_time/30)+`, 0);
                            }
                            `;//こんな書き方が許されるんですか？←うるせえてめぇも赤く染めてやろうか？
                            RED_Filter = new PIXI.Filter(null, RED_fragment);
                            mainコンテナ.filters = [RED_Filter];//間違えてたら赤くしましゅ！
                        }
                    }else if(ゲーム進行度==4){
                        animation_time-=1;
                        ステージ1コンテナ.position.set(50,220-animation_time);
                        ステージ1コンテナ.alpha=animation_time/10;
                        if(animation_time==-10){
                            ゲーム進行度=5;         
                            ステージ1コンテナ.destroy();
                            mainコンテナ.addChild(ステージ2コンテナ); 
                            animation_time=0;                  
                        }
                    }else if(ゲーム進行度==5){
                        animation_time+=1;
                        ステージ2コンテナ.alpha=animation_time/10;
                        if(animation_time==10){
                            ゲーム進行度=6;
                            animation_time=-1;
                        }
                    }else if(ゲーム進行度==6){
                        if(animation_time==0){//読む人をびっくりさせてしまうようなコードになってませんか？←俺が一番びっくりしてるからＯＫ
                            for(let i=0;i<4;i++){
                                歩く場所[i].texture=new PIXI.Texture(横断テクスチャ_1, new PIXI.Rectangle(300*i+800,160, 300, 300));
                                if(中央四角_2[i+8].selected==1){
                                    歩く場所[i].scale.set(0.425,0.425);
                                }
                            }
                        }else if(animation_time==30){
                            for(let i=0;i<4;i++){
                                歩く場所[i].texture=new PIXI.Texture(横断テクスチャ_2, new PIXI.Rectangle(300*i+1120,160, 300, 300));
                                if(中央四角_2[i+8].selected==1){
                                    歩く場所[i].scale.set(0.425,0.425);
                                }
                            }
                        }else if(animation_time==60){
                            for(let i=0;i<4;i++){
                                歩く場所[i].texture=new PIXI.Texture(横断テクスチャ_1, new PIXI.Rectangle(300*i+1440,160, 300, 300));
                                if(中央四角_2[i+8].selected==1){
                                    歩く場所[i].scale.set(0.425,0.425);
                                }
                            }
                        }else if(animation_time==90){
                            for(let i=0;i<4;i++){
                                歩く場所[i].texture=new PIXI.Texture(横断テクスチャ_2, new PIXI.Rectangle(300*i+1760,160, 300, 300));
                                if(中央四角_2[i+8].selected==1){
                                    歩く場所[i].scale.set(0.425,0.425);
                                }
                            }
                        }else if(animation_time==120){
                            for(let i=0;i<4;i++){
                                歩く場所[i].texture=new PIXI.Texture(横断テクスチャ_1, new PIXI.Rectangle(300*i+2080,160, 300, 300));
                                if(中央四角_2[i+8].selected==1){
                                    歩く場所[i].scale.set(0.425,0.425);
                                }
                            }
                        }else if(animation_time==150){
                            for(let i=0;i<4;i++){
                                歩く場所[i].texture=new PIXI.Texture(横断テクスチャ_2, new PIXI.Rectangle(300*i+2400,160, 300, 300));
                                if(中央四角_2[i+8].selected==1){
                                    歩く場所[i].scale.set(0.425,0.425);
                                }
                            }
                        }
                        if(animation_time==180){
                            animation_time=0;
                        }else{
                            animation_time+=1;
                        }

                        if(animation_time2>0){
                            animation_time2-=1;
                            mainコンテナ.position.set(150+animation_time2*(animation_time2%2-1),50);

                            RED_fragment = `
                            varying vec2 vTextureCoord;
                            uniform sampler2D uSampler;
                            void main(void)
                            {
                                gl_FragColor = texture2D(uSampler, vTextureCoord)+vec4(`+animation_time2/10+","+(-animation_time2/30)+","+(-animation_time2/30)+`, 0);
                            }
                            `;//こんな書き方が許されるんですか？←うるせえてめぇも赤く染めてやろうか？
                            RED_Filter = new PIXI.Filter(null, RED_fragment);
                            mainコンテナ.filters = [RED_Filter];//間違えてたら赤くしましゅ！
                        }
                    }else if(ゲーム進行度==7){
                        animation_time-=1;
                        ステージ2コンテナ.position.set(50,220-animation_time);
                        ステージ2コンテナ.alpha=animation_time/10;
                        if(animation_time==-10){
                            ゲーム進行度=8;         
                            ステージ2コンテナ.destroy();
                            mainコンテナ.addChild(ステージ3コンテナ); 
                            animation_time=0;                  
                        }
                    }else if(ゲーム進行度==8){
                        animation_time+=1;
                        ステージ3コンテナ.alpha=animation_time/10;
                        if(animation_time==10){
                            ゲーム進行度=9;
                            animation_time=0;
                        }
                    }else if(ゲーム進行度==9){
                        if(animation_time>0){
                            animation_time-=1;
                            mainコンテナ.position.set(150+animation_time*(animation_time%2-1),50);

                            RED_fragment = `
                            varying vec2 vTextureCoord;
                            uniform sampler2D uSampler;
                            void main(void)
                            {
                                gl_FragColor = texture2D(uSampler, vTextureCoord)+vec4(`+animation_time/10+","+(-animation_time/30)+","+(-animation_time/30)+`, 0);
                            }
                            `;//こんな書き方が許されるんですか？←うるせえてめぇも赤く染めてやろうか？
                            RED_Filter = new PIXI.Filter(null, RED_fragment);
                            mainコンテナ.filters = [RED_Filter];//間違えてたら赤くしましゅ！
                        }
                    }else if(ゲーム進行度==10){
                        animation_time-=1;
                        ステージ3コンテナ.position.set(50,220-animation_time);
                        ステージ3コンテナ.alpha=animation_time/10;
                        if(animation_time==-10){
                            ゲーム進行度=11;         
                            ステージ3コンテナ.destroy();
                            mainコンテナ.addChild(ステージ4コンテナ); 
                            animation_time=0;                  
                        }                       
                    }else if(ゲーム進行度==11){
                        animation_time+=1;
                        ステージ4コンテナ.alpha=animation_time/2;
                        if(animation_time==2){
                            ゲーム進行度=12;
                            animation_time=0;
                        }
                    }else if(ゲーム進行度==12){
                        白玉_x=[60+50*Math.sin(time*Math.PI/20),120,170,210,340,390+50*Math.sin(time*Math.PI/15),460+20*Math.sin(time*Math.PI/20),510];
                        白玉_y=[70,450,370+50*Math.sin(time*Math.PI/20),180,140,290+50*Math.sin(time*Math.PI/20),460+20*Math.cos(time*Math.PI/20),50];
                        灰玉_x=[180+50*Math.sin(time*Math.PI/20),220+50*Math.cos(time*Math.PI/20),100,510+50*Math.sin(time*Math.PI/20),310+50*Math.sin(time*Math.PI/20),450,400+150*Math.cos(time*Math.PI/200),70];
                        灰玉_y=[270,150+50*Math.sin(time*Math.PI/20),570+50*Math.sin(time*Math.PI/20),180+50*Math.cos(time*Math.PI/20),540+50*Math.sin(time*Math.PI/50),190,360+150*Math.sin(time*Math.PI/200),150];
                        黒玉_x=[100,220+50*Math.cos(time*Math.PI/20),200+50*Math.sin(time*Math.PI/20),510-50*Math.cos(time*Math.PI/20),350,250,200+50*Math.sin(time*Math.PI/20),520];
                        黒玉_y=[340,50+20*Math.sin(time*Math.PI/10+1.5),500+50*Math.sin(time*Math.PI/20),510-50*Math.sin(time*Math.PI/20),240+50*Math.sin(time*Math.PI/20),290,560,350];
                        for(let i=0;i<8;i++){
                            白玉[i].position.set(白玉_x[i],白玉_y[i]);
                            灰玉[i].position.set(灰玉_x[i],灰玉_y[i]);
                            黒玉[i].position.set(黒玉_x[i],黒玉_y[i]);
                        }
                        if(animation_time>0){
                            animation_time-=1;
                            mainコンテナ.position.set(150+animation_time*(animation_time%2-1),50);

                            RED_fragment = `
                            varying vec2 vTextureCoord;
                            uniform sampler2D uSampler;
                            void main(void)
                            {
                                gl_FragColor = texture2D(uSampler, vTextureCoord)+vec4(`+animation_time/10+","+(-animation_time/30)+","+(-animation_time/30)+`, 0);
                            }
                            `;//こんな書き方が許されるんですか？←うるせえてめぇも赤く染めてやろうか？
                            RED_Filter = new PIXI.Filter(null, RED_fragment);
                            mainコンテナ.filters = [RED_Filter];//間違えてたら赤くしましゅ！
                        }
                    }
                    
                }
            }

        </script>
    </head>
    <body>
        <div id="top"></div>
        <header id="header">
            <button onclick="html_link_btn()" id="html_link_btn"></button>
            <nav id="html_link_nav">
                <ul id="html_link_ul"></ul>
            </nav>
            <a href="../index.html">
                <img id="go_home" src="../images/site/omotyabako_deka.png" alt="トップページへ" height="1px"><!--ここで高さを入れておかないと、クソでかい画像が一瞬読み込まれてボタンの大きさが暴走する-->
            </a>
            <h1 id="title_h1">
                JUN汁ｗおもちゃばこ。
            </h1>
        </header>
        <div id="mannaka">

            <div id="parent_div">
                <button id="start_button"></button><!--すぐ消える-->
                <canvas id="canvas"></canvas>
            </div>
            <footer>
                <ul id="footul">
                    <li id="foot_tweet_li">
                        <a href=""  target="_blank" rel="noopener noreferrer" id="foot_tweet_a"><!--onload_functions()でhrefを書き込んでるで！-->
                            <img src="../images/site/twitterbutton.gif" alt="ツイートボタン" id="tweet_img">
                        </a>
                    </li>
                    <li>
                        <a href="#top" id="totop"> 
                            ページ上部に移動
                        </a>
                    </li>
                </ul>
            </footer>
        </div>
    </body>
</html>
