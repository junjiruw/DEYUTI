<!DOCTYPE html>
<html lang="ja">
    <head prefix="og: http://ogp.me/ns# website: http://ogp.me/ns/website#">
        <meta charset="UTF-8">
        <!--æ–‡å­—ã‚³ãƒ¼ãƒ‰ã¯ä¸Šã®ã»ã†ã«ãªã„ã¨ã™ã¹ã¦ãŠã—ã¾ã„ã«ãªã‚‹ã‚‰ã—ã„-->
        <meta name="description" content="ã‚«ãƒ¼ãƒ‰ã‚²ãƒ¼ãƒ ä½œã‚ŠãŸã„">
        <title>JUNæ±ï½—ãŠã‚‚ã¡ã‚ƒã°ã“ã€‚/ãŠã‚‚ã¡ã‚ƒ/ã—ã‚…ã†ãã‚“ã‚«ãƒ¼ãƒ‰</title>
        <!--OGPã¨ã‹ã„ã†ã®-->
        <meta property="og:site_name" content="JUNæ±ï½—ãŠã‚‚ã¡ã‚ƒã°ã“ã€‚/omocha/syuukun_card">                                <!--ã‚¿ã‚¤ãƒˆãƒ«ã€€å…¥åŠ›ã™ã‚‹ã“ã¨ï¼-->
        <meta property="og:title" content="ã—ã‚…ã†ãã‚“ã‚«ãƒ¼ãƒ‰">                                                               <!--ã‚¿ã‚¤ãƒˆãƒ«ã€€å…¥åŠ›ã™ã‚‹ã“ã¨ï¼-->
        <meta property="og:type" content="article"> <!--websiteã¯ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸ã€articleãŒè¨˜äº‹ã ã£ã¦ã•-->
        <meta property="og:url" content="https://junjiruw.github.io/DEYUTI/omocha/syuukun_card.html">                   <!--ãƒªãƒ³ã‚¯ã€€å…¥åŠ›ã™ã‚‹ã“ã¨ï¼-->
        <meta property="og:image" content="https://github.com/junjiruw/DEYUTI/blob/master/images/site/junjiruw_bako.png?raw=true">
        <meta name="twitter:card" content="summary"><!--ãªã«ã‚’è¡¨ç¤ºã™ã‚‹ã‹-->
        <meta name="twitter:site" content="@junjiruw"><!--ãƒ•ãƒƒã‚¿ãƒ¼ã«è¡¨ç¤ºã•ã‚Œã‚‹ã‚‰ã—ã„â€¦ã©ã“ï¼Ÿ-->
        <link rel="stylesheet" href="../css/style.css">
        
        <link rel="icon" href="../images/site/favicon32.png">
        <style>

            div#mannaka{
                width: 98%;
                margin: auto;
                background: #16151a;
                border: 2px solid #ffffff;
                color: #ffffff;   
                font-size: 16px;    
            }

            div#parent_div{
                text-align: center;
                margin: 10px;
            }
            canvas{
                background: #ffffff;
                height: 70vh;/*ã“ã‚Œã€PCãƒ–ãƒ©ã‚¦ã‚¶ã§æ¨ªã«ç‹­ãã—ãŸã‚‰å´©å£Šã›ãˆã¸ã‚“ï¼Ÿâ†’å‹æ‰‹ã«å´©å£Šã—ã¦ã‚*/
                /*image-rendering: pixelated;ãƒ‰ãƒƒãƒˆçµµã‚’æ‹¡å¤§ã—ãŸã„ãªã‚‰ä½¿ãˆ*/
                
            }
            canvas#cnvs_hidden{
                display: none;                
            }


            div#buttons{
                display: flex;
            }
            input.key_button{
                background-color: #FFFFFF;
                width: 1.5em;
                height: 1.5em;
                font-size: 2em;
                font-family: "misaki_gothic";
                margin: 0.25em;
                margin-left: 1em;
            }
            input.key_button:active{
                background-color: #656965;
                color: #FFFFFF;
            }
            div#button_left{
                text-align: left;
                width: 50%;
            }
            div#button_left div{
                text-align: center;
            }
            div#button_right{
                text-align: center;
                width: 50%;
            }
            #omake_div{
                text-align: right;
            } 
            

        </style>
        <script src="../js/public.js"></script>
        <script>
            //ç´ æèª­ã¿è¾¼ã¿
            var test=new Image();
            test.src="../images/omocha/syuukun_card/200130.png";
            var test_syuukun=new Image();
            test_syuukun.src="../images/omocha/syuukun_card/test_syuukun200130.png";
            
            var title_image =new Image();
            title_image.src="../images/omocha/syuukun_card/syuukunkadotitele.png";
            var turn_end=new Image();
            turn_end.src="../images/omocha/syuukun_card/ta-nendman.png";
            var yamahuda=new Image();
            yamahuda.src="../images/omocha/syuukun_card/yamahuda.png";
            var hakaba=new Image();
            hakaba.src="../images/omocha/syuukun_card/hakaba64.png";
            var card_basyo=new Image();
            card_basyo.src="../images/omocha/syuukun_card/card_basyo.png";
            var yubi=new Image();
            yubi.src="../images/omocha/syuukun_card/ka-soru64.png";//å˜˜ã€‚æ‹¡å¤§ã—ãŸã‹ã‚‰128
            var atk_plate=new Image();
            atk_plate.src="../images/omocha/syuukun_card/atk_plate.png";
            var def_plate=new Image();
            def_plate.src="../images/omocha/syuukun_card/def_plate.png";
            var atk_circle=new Image();
            atk_circle.src="../images/omocha/syuukun_card/atk_circle.png";
            var zuba64=new Image();
            zuba64.src="../images/omocha/syuukun_card/zuba64.png";
            var kati_image=new Image();
            kati_image.src="../images/omocha/syuukun_card/syouhai300_kati.png";
            var make_image=new Image();
            make_image.src="../images/omocha/syuukun_card/syouhai300_make.png";

            var tehuda32=new Image();
            tehuda32.src="../images/omocha/syuukun_card/tehuda32.png";
            var kougeki_1_32=new Image();
            kougeki_1_32.src="../images/omocha/syuukun_card/kougeki1_32.png";
            var tairyoku_1_32=new Image();
            tairyoku_1_32.src="../images/omocha/syuukun_card/tairyoku1_32.png";
            var ponya_32=new Image();
            ponya_32.src="../images/omocha/syuukun_card/ponya_32.png";
            //--ä¸‹ãŒã‚«ãƒ¼ãƒ‰ï¼Ÿ

            var card_syuukun=new Image();
            card_syuukun.src="../images/omocha/syuukun_card/card_syuukun130200.png";
            var hojorobo_image=new Image();
            hojorobo_image.src="../images/omocha/syuukun_card/hojorobo.png";
            var kinkyuujitai5_image=new Image();
            kinkyuujitai5_image.src="../images/omocha/syuukun_card/kinkyuujitai5.png";
            var ryuunoitigeki_img=new Image();
            ryuunoitigeki_img.src="../images/omocha/syuukun_card/ryuunoitigeki.png";
            var powerup3_img=new Image();
            powerup3_img.src="../images/omocha/syuukun_card/powerup3.png";
            var HPup5_img=new Image();
            HPup5_img.src="../images/omocha/syuukun_card/HPup5.png";
            
            var ponya_image=new Image();
            ponya_image.src="../images/omocha/syuukun_card/ponya.png";
            var ponya_ace_image=new Image();
            ponya_ace_image.src="../images/omocha/syuukun_card/ponyaace.png";
            var yakuso_3_image=new Image();
            yakuso_3_image.src="../images/omocha/syuukun_card/yakusou3.png";

            var kameisi_image=new Image();
            kameisi_image.src="../images/omocha/syuukun_card/kameisi.png";
            var kametetu_image=new Image();
            kametetu_image.src="../images/omocha/syuukun_card/kametetu.png";

            var henyamotin_image=new Image();
            henyamotin_image.src="../images/omocha/syuukun_card/henyamotin.png";

            var ponya_sutoraiku_image=new Image();
            ponya_sutoraiku_image.src="../images/omocha/syuukun_card/ponyastrike.png";
            var ponya_big_image=new Image();
            ponya_big_image.src="../images/omocha/syuukun_card/ponyabig.png";            
            var ponya_rein_image=new Image();
            ponya_rein_image.src="../images/omocha/syuukun_card/ponyarein.png";
            var ponya_daburu_image=new Image();
            ponya_daburu_image.src="../images/omocha/syuukun_card/ponyadaburu.png";
            
            var kyuukoukasakusenki_image=new Image();
            kyuukoukasakusenki_image.src="../images/omocha/syuukun_card/kyuukoukasakusenki.png";
            var atakkumojuru_image=new Image();
            atakkumojuru_image.src="../images/omocha/syuukun_card/atakkumojuru.png";
            var kaihukumojuru_image=new Image();
            kaihukumojuru_image.src="../images/omocha/syuukun_card/kaihukumojuru.png";
            var sukurappudoro_image=new Image();
            sukurappudoro_image.src="../images/omocha/syuukun_card/sukurappudoro.png";

            var sasori_image=new Image();
            sasori_image.src="../images/omocha/syuukun_card/sasori.png";
            var sasori_seitai_image=new Image();
            sasori_seitai_image.src="../images/omocha/syuukun_card/sasori_seitai.png";

            var ikkakudaija_atama_image=new Image();
            ikkakudaija_atama_image.src="../images/omocha/syuukun_card/ikkakudaija_atama.png";
            var ikkakudaija_hara_image=new Image();
            ikkakudaija_hara_image.src="../images/omocha/syuukun_card/ikkakudaija_hara.png";
            var ikkakudaija_yubi_image=new Image();
            ikkakudaija_yubi_image.src="../images/omocha/syuukun_card/ikkakudaija_yubi.png";

            var buiwa_image=new Image();
            buiwa_image.src="../images/omocha/syuukun_card/buiwa.png";
            var raihudaiya_image=new Image();
            raihudaiya_image.src="../images/omocha/syuukun_card/raihudaiya.png";
            var seiretu_image=new Image();
            seiretu_image.src="../images/omocha/syuukun_card/seiretu.png";

            var kyuusainote_image=new Image();
            kyuusainote_image.src="../images/omocha/syuukun_card/kyuusainote.png";
            var kenrounarusoukou_image=new Image();
            kenrounarusoukou_image.src="../images/omocha/syuukun_card/kenrounarukata.png";
            var zettainotamasii_image=new Image();
            zettainotamasii_image.src="../images/omocha/syuukun_card/zettainotamasii.png";

            var kyousinja_image=new Image();
            kyousinja_image.src="../images/omocha/syuukun_card/kyousinja.png";
            var hametunokami_image=new Image();
            hametunokami_image.src="../images/omocha/syuukun_card/hametunokami.png";

            var burakkusyuukun_image=new Image();
            burakkusyuukun_image.src="../images/omocha/syuukun_card/burakkusyuukun.png";
            var doragonburesu_image=new Image();
            doragonburesu_image.src="../images/omocha/syuukun_card/doragonburesu.png";
            var hojoseki_image=new Image();
            hojoseki_image.src="../images/omocha/syuukun_card/hojoseki.png";
            var musyounoai_image=new Image();
            musyounoai_image.src="../images/omocha/syuukun_card/musyounoai.png";
            var nitouryuukengi_image=new Image();
            nitouryuukengi_image.src="../images/omocha/syuukun_card/nitouryuukengi.png";
            var sinennoai_image=new Image();
            sinennoai_image.src="../images/omocha/syuukun_card/sinennoai.png";
            var tyoubusou_image=new Image();
            tyoubusou_image.src="../images/omocha/syuukun_card/tyoubusou.png";
            var yamika_image=new Image();
            yamika_image.src="../images/omocha/syuukun_card/yamika.png";
            var yamiryuusyuu_image=new Image();
            yamiryuusyuu_image.src="../images/omocha/syuukun_card/yamiryuusyuu.png";
            var zerozonbizu_image=new Image();
            zerozonbizu_image.src="../images/omocha/syuukun_card/zerozonbizu.png";

            var aidorukourin_image=new Image();
            aidorukourin_image.src="../images/omocha/syuukun_card/aidorukourin.png";
            var hametunosinkou_image=new Image();
            hametunosinkou_image.src="../images/omocha/syuukun_card/hametunosinkou.png";
            var ikkakudaija_2_image=new Image();
            ikkakudaija_2_image.src="../images/omocha/syuukun_card/ikkakudaija_2.png";
            var ittouryoudan_image=new Image();
            ittouryoudan_image.src="../images/omocha/syuukun_card/ittouryoudan.png";
            var ponyaaidoru_image=new Image();
            ponyaaidoru_image.src="../images/omocha/syuukun_card/ponyaaidoru.png";
            var ponyasyoukansi_image=new Image();
            ponyasyoukansi_image.src="../images/omocha/syuukun_card/ponyasyoukansi.png";
            var sentanseisei_image=new Image();
            sentanseisei_image.src="../images/omocha/syuukun_card/sentanseisei.png";
            var sukurappubirudo_image=new Image();
            sukurappubirudo_image.src="../images/omocha/syuukun_card/sukurappubirudo.png";
            var sukurappugoremu_image=new Image();
            sukurappugoremu_image.src="../images/omocha/syuukun_card/sukurappugoremu.png";
            var zousyoku_image=new Image();
            zousyoku_image.src="../images/omocha/syuukun_card/zousyoku.png";
            //--ãƒ¡ãƒ‹ãƒ¥ãƒ¼ï¼Ÿ

            var kuria=new Image();
            kuria.src="../images/omocha/syuukun_card/kuria.png";
            var okane=new Image();
            okane.src="../images/omocha/syuukun_card/okane.png";
            var omise_image=new Image();
            omise_image.src="../images/omocha/syuukun_card/omise64.png";
            //--ãŠåº—ï¼Ÿ

            var sakyura_omise=new Image();
            sakyura_omise.src="../images/omocha/syuukun_card/sakyura_omise.png";
            var ponya_pack=new Image();
            ponya_pack.src="../images/omocha/syuukun_card/ponyapakku.png";
            var jouisyoukanpakku=new Image();
            jouisyoukanpakku.src="../images/omocha/syuukun_card/jouisyoukanpakku.png";
            //--ã‚¹ãƒ†ãƒ¼ã‚¸ï¼Ÿ
            var henyamoti_title=new Image();
            henyamoti_title.src="../images/omocha/syuukun_card/henyamotinsougen_title.png";
            var henyamoti=new Image();
            henyamoti.src="../images/omocha/syuukun_card/henyamotinsougen.png";
            var henyamotin_kuria=new Image();
            henyamotin_kuria.src="../images/omocha/syuukun_card/henyamotin_kuria.png";

            var saiten_title=new Image();
            saiten_title.src="../images/omocha/syuukun_card/tikaranosaiten_title.png";
            var saiten=new Image();
            saiten.src="../images/omocha/syuukun_card/tikaranosaiten.png";
            var saiten_kuria=new Image();
            saiten_kuria.src="../images/omocha/syuukun_card/tikaranosaiten_kuria.png";

            var burakku_title=new Image();
            burakku_title.src="../images/omocha/syuukun_card/burakku_title.png";
            var burakku_manga=new Image();
            burakku_manga.src="../images/omocha/syuukun_card/burakku_manga.png";
            var burakku_kuria=new Image();
            burakku_kuria.src="../images/omocha/syuukun_card/burakku_kuria.png";
                //æ£®
            var hujounomori_title=new Image();
            hujounomori_title.src="../images/omocha/syuukun_card/hujounomori_title.png";
            var hujounomori_kakoi=new Image();
            hujounomori_kakoi.src="../images/omocha/syuukun_card/hujou_kakoi.png";

            var syuukun_20_0=new Image();
            syuukun_20_0.src="../images/omocha/syuukun_card/syuukun_20_0.png";
            var syuukun_20_1=new Image();
            syuukun_20_1.src="../images/omocha/syuukun_card/syuukun_20_1.png";
            var syuukun_20_2=new Image();
            syuukun_20_2.src="../images/omocha/syuukun_card/syuukun_20_2.png";
            var syuukun_20_3=new Image();
            syuukun_20_3.src="../images/omocha/syuukun_card/syuukun_20_3.png";

            var syuukun_20=[syuukun_20_0,syuukun_20_1,syuukun_20_2,syuukun_20_3];

            var kumo_mori_0=new Image();
            kumo_mori_0.src="../images/omocha/syuukun_card/kumo_mori_0.png";
            var kumo_mori_1=new Image();
            kumo_mori_1.src="../images/omocha/syuukun_card/kumo_mori_1.png";
            var kumo_mori_2=new Image();
            kumo_mori_2.src="../images/omocha/syuukun_card/kumo_mori_2.png";
            var kumo_mori_3=new Image();
            kumo_mori_3.src="../images/omocha/syuukun_card/kumo_mori_3.png";
            var kumo_mori_4=new Image();
            kumo_mori_4.src="../images/omocha/syuukun_card/kumo_mori_4.png";

            var kumo_mori=[kumo_mori_0,kumo_mori_1,kumo_mori_2,kumo_mori_3,kumo_mori_4];

            var sasori_hujou_0=new Image();
            sasori_hujou_0.src="../images/omocha/syuukun_card/sasori_hujou_20_0.png";
            var sasori_hujou_1=new Image();
            sasori_hujou_1.src="../images/omocha/syuukun_card/sasori_hujou_20_1.png";

            var sasori_hujou_20=[sasori_hujou_0,sasori_hujou_1];

            var morikabe_1_0=new Image();
            morikabe_1_0.src="../images/omocha/syuukun_card/morikabe_1_0.png";
            var morikabe_1_1=new Image();
            morikabe_1_1.src="../images/omocha/syuukun_card/morikabe_1_1.png";

            var morikabe_1=[morikabe_1_0,morikabe_1_1];


                //æ£®

            var junbityuu_title=new Image();
            junbityuu_title.src="../images/omocha/syuukun_card/junbityuu.png";
            //ã“ã“ã«ã‚²ãƒ¼ãƒ ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’ç½®ãã¨ã‚¤ã‚¤ãƒã€‚
            var my_deck=[];
            var teki_deck=[];
            var my_yamahuda=[];
            var teki_yamahuda=[];
            var my_tehuda=[];
            var teki_tehuda=[];
            var my_ba=["","","","",""];

            var teki_ba=["","","","",""];
            var death_my_ba=["","","","",""];//æ­»äº¡æ™‚æ¼”å‡ºã®ãŸã‚ã«ã‚«ãƒ¼ãƒ‰ã‚’åˆ¥ã®å ´æ‰€ã«ç§»ã—ãŸã„ï¼ˆå ´ã«æ®‹ã™ã¨ãƒã‚°ã®æ¸©åºŠã«ãªã‚‹ã“ã¨ã¯è‡ªæ˜ãªã®ã§ï¼‰
            var death_teki_ba=["","","","",""];
            var tukau_mahou=[];//é­”æ³•ã¤ã‹ã£ãŸç¬é–“ã«æ¶ˆãˆã‚‹ã®ã‚ˆããªã„ã¨æ€ã£ãŸã€‚
            
            var my_haka=[];
            var teki_haka=[];
            //ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ãªã©ã€ã‚·ã‚¹ãƒ†ãƒ ã®ã€ã‚ã®ã€ã‚¢ãƒ¬ã€ã‚¢ãƒ¬ã•ï¼-------------------------------------------------
            var key_input="";
            var what_input="";//ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰åŒæ™‚ãŠã—ã«ä½¿ã†
            var key_interval=0;//n*10[s]ã€€é•·æŠ¼ã—ã®é€£ç¶šå…¥åŠ›ã«ä½¿ã£ã¦ã‚‹
            var key_owarasete=0;
            var é•·æŠ¼ã—é˜»æ­¢=0;//æ±ºå®šãƒœã‚¿ãƒ³ã‚’é•·æŠ¼ã—é€£æ‰“ã™ã‚‹ã®ã¯ã¾ãšã„ã®ã§ã¯ï¼Ÿã¨ãªã£ãŸã®ã§é˜»æ­¢ã—ã¾ã™ã€‚

            var game_phase="ã‚¿ã‚¤ãƒˆãƒ«";

            var ãŠé‡‘=0;
            //----------------------
            var drop_gold=0;

            var cursor=16;
            var pre_cursor;
            var ba_haiti=[2,1,3,0,4];
            var cursor2=0;
            var cursor_lock=0;//ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã®é¸æŠã‚’å‘ã“ã†ã«ã—ãŸã„ã¨ãã«0ä»¥å¤–ã‚’å…¥ã‚Œã‚‹ã€‚äºˆå®šã€‚

            var duel_phase="è‡ªç”±";
            var aite_phase=0;//ç›¸æ‰‹ã®ã‚¿ãƒ¼ãƒ³ã«å‹•ã‹ã—ãŸã„ã€‚
            var aite_nayami;//ç›¸æ‰‹ã‚¿ãƒ¼ãƒ³ã®æ‚©ã¿ãƒ•ã‚§ãƒ¼ã‚ºã«ä½¿ã†ãªã‚“ã‹ç”¨é€”ä¸æ˜ã®å¤‰æ•°ã ï¼
            var aite_delay=0;//ãŠå‰é«˜é€Ÿã§å‹•ãã™ãï¼

            var atk_card;
            var def_card;
            var tukau_card_num;

            var my_pull=2;
            var my_deck_pull=my_pull;
            var my_deck_pull_ç·¨é›†ä¸­=my_deck_pull;
            var my_now_pull=my_pull;
            var teki_pull=2;

            var syousai_card;
            var syousai_state;
            var syousai_state_color;

            var my_kougeki_sum=0;//AIç”¨
            var teki_kougeki_sum=0;//é™å‚ã«ã‚‚ä½¿ã£ã¦ã‚‹

            var tehuda_maisuu=0;//æ‰‹æœ­ã®è§’åº¦è¦šãˆã‚‹ã®ã«ä½¿ã£ã¦ã‚‹
            var card_kankaku=0;
            var kakudo=10;

            var zuba=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]//zuba64ã‚’è¡¨ç¤ºã™ã‚‹ã‚¿ã‚¤ãƒãƒ¼
            var yamahuda_damage=[0,0,0,0];//0,2ãŒä¿ºã¸ã®ãƒ€ãƒ¡ãƒ¼ã‚¸ã§ã€1,3ãŒç›¸æ‰‹ã¸ã®ãƒ€ãƒ¡ãƒ¼ã‚¸æå†™

            var get_card="";
            var card_count=0;
            var new_card=0;

            var time=0;

            var ç‰¹æ®ŠçŠ¶æ…‹=[];
            var ç›¸æ‰‹ã®é™å‚=0;
            //---ä¸Šãƒ‡ãƒ¥ã‚¨ãƒ«ç³»ï¼Ÿã€€ä¸‹ãƒ‡ãƒƒã‚­ç³»â€¦ï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿ
            var æ‰€æŒã‚«ãƒ¼ãƒ‰=[];
            var deck_list;
            var teki_deck_list;

            var ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­={card_list:[],ACE:[],TOP_ACE:[]};
            var ä¿å­˜ãƒ‡ãƒƒã‚­=[{card_list:[],ACE:[],TOP_ACE:[]},{card_list:[],ACE:[],TOP_ACE:[]},{card_list:[],ACE:[],TOP_ACE:[]},{card_list:[],ACE:[],TOP_ACE:[]},{card_list:[],ACE:[],TOP_ACE:[]}];
            var ã‚«ãƒ¼ãƒ‰ã‚«ã‚¦ãƒ³ãƒˆ=0;
            var pre_ã‚«ãƒ¼ãƒ‰="";

            var sub_phase="åŸºæœ¬";

            var MAX_deck=20;
            var MAX_ACE=2;
            var MAX_TOP_ACE=1;

            var ã‚«ãƒ¼ãƒ‰ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹=0;
            var ã‚«ãƒ¼ãƒ‰ã‚¹ãƒ¯ãƒƒãƒ—=0;
            var ã‚«ãƒ¼ãƒ‰ã‚¹ãƒ¯ãƒƒãƒ—_ã‚«ãƒ¼ãƒ‰=0;//ãŠå‰ãŒå…¨éƒ¨ã‚°ãƒ­ãƒ¼ãƒãƒ«ãªå¤‰æ•°ã§è§£æ±ºã™ã‚‹ã›ã„ã§ãƒã‚°ã‚Šã¾ãã‚Šã ãœï¼
            var ã“ã‚Œã®ãƒ‡ãƒƒã‚­æšæ•°=0;
            var ã“ã‚Œã®æ‰€æŒæšæ•°=0;

            var scroll_x=0;
            var scroll_x2=0;

            var cursor_x=0;
            var cursor_y=0;

            var ç·¨é›†ä¸­ACE=[];
            var ç·¨é›†ä¸­TOP_ACE=[];
            //---------ã‚¹ãƒ†ãƒ¼ã‚¸ï¼Ÿ
            var stage=1;
            var mini_stage=0;
            var next_mini_stage=0;

            var æ¼”å‡ºã‚«ã‚¦ãƒ³ãƒˆ=-1;
            var next_phase="";

            var MAX_STAGE=1;

            var åˆå›ã‚¯ãƒªã‚¢ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ•ãƒ©ã‚°=0;

            var URL_tweet_text="";
                //æ£®
            var mori_stage=[[[[]]]];//xy-xyã®å››æ¬¡å…ƒã«ãªã‚‹ã¨æ€ã†ï¼0:æ­©ã‘ã‚‹ã€€1:å£â€¦5:å£ã€€6~:ãƒ¢ãƒ³ã‚¹ã‚¿ãƒ¼ã¨ã‹â€¦ã‚¤ãƒ™ãƒ³ãƒˆç³»â€¦ã‹ã‚‚â€¦
            var stage_x=0;
            var stage_y=0;
            
            var syuukun_x=0;
            var syuukun_y=0;
            var syuukun_move=[0,0];
            var syuukun_muki=0;

            var æœ¨æ¼ã‚Œæ—¥=[[[]]];
            var é›²=[[]];
            //------------ã‚»ãƒ¼ãƒ–
            var save_æ‰€æŒã‚«ãƒ¼ãƒ‰=[];
            var save_deck_list={card_list:[],ACE:[],TOP_ACE:[]};
            var all_card=[];

            //---ãŠåº—

            var ãƒ‘ãƒƒã‚¯å£²ã‚‹ã‚ˆ=-1;
            //ãƒ‘ãƒƒã‚¯ã®å®šç¾©ã¯â€¦ã‚«ãƒ¼ãƒ‰ãŒå®šç¾©ã•ã‚Œã¦ãªã„ã¨â€¦ã§ããªã„
            var è³¼å…¥æ•°=[0,0,0];
            var é‡‘é¡=[10,100,0,0,0,0,0,0,0];
            var å‡ºã¦ããŸã‚«ãƒ¼ãƒ‰=[];
            var å‡ºã¦ããŸã‚«ãƒ¼ãƒ‰_ã‚½ãƒ¼ãƒˆ=[];
            

            onload = function(){
                onload_functions();
                const cnvs = document.getElementById('cnvs');//IDã‚’æŒ‡å®šã—ã¦å¤‰æ•°ã«ã¶ã¡è¾¼ã‚€
                const ctx = cnvs.getContext("2d");

                const cnvs2 = document.getElementById('cnvs_hidden');//IDã‚’æŒ‡å®šã—ã¦å¤‰æ•°ã«ã¶ã¡è¾¼ã‚€
                const ctx2 = cnvs2.getContext("2d");
                ctx.font = "50px  'ï¼­ï¼³ ã‚´ã‚·ãƒƒã‚¯'";//ãƒ•ã‚©ãƒ³ãƒˆè¨­å®šã€‚å·¦ã®ãƒ•ã‚©ãƒ³ãƒˆãŒãªã„ã¨å³ã®ãƒ•ã‚©ãƒ³ãƒˆã‚’é©ç”¨ã™ã‚‹ã‚‰ã—ã„ã€‚

                if (navigator.userAgent.match(/iPhone|Android.+Mobile/)) {//è²´æ§˜ï¼ã‚¹ãƒãƒ›ã§è¦‹ã¦ã„ã‚‹ãªï¼ï¼Ÿ
                    cnvs.style.width=100+"%";
                    cnvs.style.height=cnvs.clientWidth+"px";
                }

                var buttons = document.getElementsByClassName("key_button");//ãƒœã‚¿ãƒ³æ“ä½œ
                if( window.ontouchstart === null ){ // æ³¨ï¼šontouchstartãŒå­˜åœ¨ã—ãªã„æ™‚ã¯ undefined ãŒè¿”ã‚‹
                    //ã‚ˆã†ã™ã‚‹ã«ã‚¿ãƒƒãƒæ©Ÿèƒ½ãŒã‚ã‚‹ç«¯æœ«ãªã‚‰
                    for(let i=0;i<buttons.length;i++){
                        buttons[i].addEventListener("touchstart",function(e){//æŠ¼ã™ã¨å‹•ã
                            e.preventDefault();//ãƒœã‚¿ãƒ³ã‚’ã‚‚ã¨ã®çŠ¶æ…‹ã«æˆ»ã—ã¦ãã ã•ã„ï¼ˆè¡€æ¶™ï¼‰
                            key_input=this.value;
                            key_interval=-1;//åˆå›é™å®šãƒ¢ãƒ¼ãƒ‰ï¼ˆ1å›ã¯å‹•ä½œã•ã›ãŸã„ã®ã§ã€‚ï¼‰
                            key_owarasete=0;
                        });
                        buttons[i].addEventListener("touchend",function(e){//é›¢ã™ã¨å‹•ã
                            e.preventDefault();//ãƒœã‚¿ãƒ³ã‚’ã‚‚ã¨ã®çŠ¶æ…‹ã«æˆ»ã—ã¦ãã ã•ã„ï¼ˆè¡€æ¶™ï¼‰
                            if(key_interval!=-1){//ä¸€å›ã‚‚å®Ÿè¡Œã•ã‚Œã¦ãªã„ã®ã«çµ‚äº†ã™ã‚‹ã®ã¯ãƒœã‚¿ãƒ³ã¨ã—ã¦ãŠã‹ã—ã„ã®ã§ã€ã¯ã˜ã
                                key_input="";
                                key_interval=0;//é•·æŠ¼ã—ã®é€£ç¶šå…¥åŠ›ã«ä½¿ã£ã¦ã‚‹ã ã‘ãªã®ã§é•·æŠ¼ã—ãŒçµ‚ã‚ã£ãŸã‚‰åˆæœŸåŒ–ã™ã‚‹ã‚“ã‚ˆ
                            }else{
                                key_owarasete=1;//ä¸€åº¦ã‚‚å®Ÿè¡Œã•ã‚Œã¦ãªã„ã‘ã©ã€ãƒœã‚¿ãƒ³ã¯ã‚‚ã†æŠ¼ã—ã¦ãªã„ã®ã‚ˆã€‚
                            }
                        });
                    }
                }else{
                    //ä¸€èˆ¬çš„ãªPCãªã‚‰
                    for(let i=0;i<buttons.length;i++){
                        buttons[i].addEventListener("mousedown",function(){//æŠ¼ã™ã¨å‹•ã
                            key_input=this.value;
                            key_interval=-1;//åˆå›é™å®šãƒ¢ãƒ¼ãƒ‰ï¼ˆ1å›ã¯å‹•ä½œã•ã›ãŸã„ã®ã§ã€‚ï¼‰
                            key_owarasete=0;
                        });
                        buttons[i].addEventListener("mouseup",function(){//é›¢ã™ã¨å‹•ã
                            if(key_interval!=-1){//ä¸€å›ã‚‚å®Ÿè¡Œã•ã‚Œã¦ãªã„ã®ã«çµ‚äº†ã™ã‚‹ã®ã¯ãƒœã‚¿ãƒ³ã¨ã—ã¦ãŠã‹ã—ã„ã®ã§ã€ã¯ã˜ã
                                key_input="";
                                key_interval=0;//é•·æŠ¼ã—ã®é€£ç¶šå…¥åŠ›ã«ä½¿ã£ã¦ã‚‹ã ã‘ãªã®ã§é•·æŠ¼ã—ãŒçµ‚ã‚ã£ãŸã‚‰åˆæœŸåŒ–ã™ã‚‹ã‚“ã‚ˆ
                            }else{
                                key_owarasete=1;//ä¸€åº¦ã‚‚å®Ÿè¡Œã•ã‚Œã¦ãªã„ã‘ã©ã€ãƒœã‚¿ãƒ³ã¯ã‚‚ã†æŠ¼ã—ã¦ãªã„ã®ã‚ˆã€‚
                            }
                        });

                    }
                }
                
                document.addEventListener('keydown', function(key){//ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰æ“ä½œ

                    what_input="";
                    if(key.key=="w" || key.key=="k" || key.key=="ArrowUp"){
                        what_input="â†‘";
                    }else if(key.key=="a" || key.key=="h" || key.key=="ArrowLeft"){
                        what_input="â†";
                    }else if(key.key=="d" || key.key=="l" || key.key=="ArrowRight"){
                        what_input="â†’";
                    }else if(key.key=="s" || key.key=="j" || key.key=="ArrowDown"){
                        what_input="â†“";
                    }else if(key.key=="Enter"){
                        what_input="ã€‡";
                    }else if(key.key=="Shift"){
                        what_input="Ã—";
                    }
                    if(key_input.indexOf(what_input)==-1){//ã™ã§ã«æŠ¼ã•ã‚Œã¦ã„ãŸã‚‰ã€æ–‡å­—åˆ—æ¤œç´¢ã§ã²ã£ã‹ã‹ã‚‹ã€‚ã²ã£ã‹ã‹ã‚‰ãªã„ãªã‚‰-1ãŒå¸°ã£ã¦ãã‚‹
                        key_input=key_input+what_input;//ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ã¯åŒæ™‚æŠ¼ã—ãŒå¯èƒ½ãªã®ã§æ›¸ãæ›ãˆã§ã¯ãªãã€è¿½åŠ ã«ã—ã¾ã™ã€‚ãˆï¼Ÿã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ã¨ãƒœã‚¿ãƒ³åŒæ™‚æŠ¼ã—ã•ã‚ŒãŸã‚‰ï¼Ÿãƒï½ã‚«
                    }
                    if (what_input != ""){key.preventDefault();}//çŸ¢å°ã‚­ãƒ¼ã§ã®æ“ä½œæ™‚ã«ã€ç”»é¢ãŒä¸Šä¸‹ã«ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã—ã¦ã—ã¾ã†ã“ã¨ã‚’é˜²ã

                    
                });
                document.addEventListener('keyup', function(key){//ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰æ“ä½œ
                    what_input="";
                    if(key.key=="w" || key.key=="ArrowUp"){
                        what_input="â†‘";
                    }else if(key.key=="a" || key.key=="ArrowLeft"){
                        what_input="â†";
                    }else if(key.key=="d" || key.key=="ArrowRight"){
                        what_input="â†’";
                    }else if(key.key=="s" || key.key=="ArrowDown"){
                        what_input="â†“";
                    }else if(key.key=="Enter"){
                        what_input="ã€‡";
                    }else if(key.key=="Shift"){
                        what_input="Ã—";
                    }
                    
                    key_input=key_input.slice(0,key_input.indexOf(what_input))+key_input.slice(key_input.indexOf(what_input)+1);//è©²å½“æ–‡å­—ã‚’æ¶ˆå»
                    if(key_input==""){
                        key_interval=0;//é•·æŠ¼ã—ã®é€£ç¶šå…¥åŠ›ã«ä½¿ã£ã¦ã‚‹ã ã‘ãªã®ã§é•·æŠ¼ã—ãŒçµ‚ã‚ã£ãŸã‚‰åˆæœŸåŒ–ã™ã‚‹ã‚“ã‚ˆ
                    }
                });

                function card_draw(print_card,x,y,of_y=0){
                    ctx.drawImage(print_card.card.image,x,y+of_y);
                    
                    if(print_card.state.indexOf("TOP_ACE")!=-1){
                        ctx.fillStyle="rgb(255,0,0,1)";
                        ctx.fillRect(x-2,y+of_y,5,200);
                        ctx.fillRect(x+128,y+of_y,5,200);
                        ctx.fillRect(x,y+of_y,133,5);
                        ctx.fillRect(x,y+of_y+195,133,5);
                    }
                    if(print_card.state.indexOf("ACE")!=-1){
                        ctx.fillStyle="rgb(255,255,0)";
                        ctx.fillRect(x-2,y+of_y,5,200);
                        ctx.fillRect(x+128,y+of_y,5,200);
                        ctx.fillRect(x,y+of_y,133,5);
                        ctx.fillRect(x,y+195+of_y,133,5);
                    }
                    if(print_card.state.indexOf("ãƒ¢ãƒ³ã‚¹ã‚¿ãƒ¼")!=-1){
                        ctx.drawImage(atk_plate,x,y+104+of_y);
                        ctx.drawImage(def_plate,x,y+152+of_y);
                        ctx.font = "40px  'ï¼­ï¼³ ã‚´ã‚·ãƒƒã‚¯'";//ãƒ•ã‚©ãƒ³ãƒˆè¨­å®šã€‚å·¦ã®ãƒ•ã‚©ãƒ³ãƒˆãŒãªã„ã¨å³ã®ãƒ•ã‚©ãƒ³ãƒˆã‚’é©ç”¨ã™ã‚‹ã‚‰ã—ã„ã€‚
                        ctx.fillStyle="rgb(255,255,255)";
                        if(print_card.ATK<10){
                            ctx.fillText(print_card.ATK, x+13, y+146+of_y,42);
                        }else{
                            ctx.fillText(print_card.ATK, x+3, y+146+of_y,42);
                        }
                        if(print_card.HP<10){
                            ctx.fillText(print_card.HP, x+13, y+188+of_y,42);
                        }else{
                            ctx.fillText(print_card.HP, x+3, y+188+of_y,42);
                        }
                        for(let i=0;i<print_card.can_ATK;i++){//æ”»æ’ƒå¯èƒ½ãƒ¢ãƒ³ã‚¹ã‚¿ãƒ¼ã«ã¯ãƒãƒ¼ã‚¯ã‚’è¡¨ç¤º,æ”»æ’ƒå¯èƒ½å›æ•°ã¾ã§ã€‚
                            ctx.drawImage(atk_circle,x+10+10*Math.sin(time*Math.PI/64)+i*30,y+20+8*Math.sin(time*Math.PI/16)+of_y+i*30);
                        }
                    }else{//é­”æ³•ã˜ã‚ƒã‚“ï¼ˆã»ã‚“ã¾ã‹ï¼Ÿï¼‰
                        ctx.fillStyle="rgb(0,200,0)";
                        ctx.fillRect(x-2,y+of_y,3,200);
                        ctx.fillRect(x+130,y+of_y,3,200);
                        ctx.fillRect(x,y+of_y,133,3);
                        ctx.fillRect(x,y+197+of_y,133,3);
                    }
                    
                    
                }
                function death_card(shi_card,haka,doko){
                    if(haka==teki_haka){
                        shi_card.position="teki_haka";
                        death_teki_ba[doko]=shi_card;
                        death_teki_ba[doko].move=10;
                    }else{
                        shi_card.position="my_haka";
                        death_my_ba[doko]=shi_card;
                        death_my_ba[doko].move=10;
                    }

                    shi_card.HP=shi_card.card.HP;//å›å¾©
                    //shi_card.state=shi_card.card.state;
                    shi_card.can_ATK=0;//æ”»æ’ƒä¸å¯
                    
                    haka.push(shi_card);//GOå¢“å ´â€¦ãªã‚“ã§ã“ã“ã ã‘pushä½¿ã£ã¦ã‚‹ã‚“ã ã‚
                    
                    return "";//å ´ã‹ã‚‰é™¤å»ã™ã‚‹ãŸã‚ã«ã“ã„ã¤ã‚’ba_i[n]ã«ä»£å…¥ã—ã¦ãŠã„ã¦ãã‚Œã€‚
                    
                }
                function è˜‡ç”Ÿ(ba,ba_i,haka,haka_i){
                    ba[ba_i]=haka[haka_i];
                    haka.splice(haka_i, 1);
                    if(ba==my_ba){
                        ba[ba_i].position="my_ba";
                    }else{
                        ba[ba_i].position="teki_ba";
                    }
                    
                    ba[ba_i].move=5;
                }
                function syoukan(card,ba_name,num){
                    var ba
                    ba=card;
                    ba.position=ba_name;
                    
                    if(ba.state.indexOf("ä¸‰å›æ”»æ’ƒ")!=-1){
                        ba.can_ATK=3;
                    }else if(ba.state.indexOf("äºŒå›æ”»æ’ƒ")!=-1){
                        ba.can_ATK=2;
                    }else{
                        ba.can_ATK=1;
                    }
                    
                    ba.move=5;
                    if(ba_name=="my_ba"){
                        for(let i=0;i<ç‰¹æ®ŠçŠ¶æ…‹.length;i++){
                            if(ç‰¹æ®ŠçŠ¶æ…‹[i]=="æ”»æ’ƒ+1"){
                                ba.ATK+=1;
                            }else if(ç‰¹æ®ŠçŠ¶æ…‹[i]=="ä½“åŠ›+1"){
                                ba.HP+=1;
                            }
                        }
                        my_ba[num]=ba;
                        my_ba[num].card.effect("å¬å–šã•ã‚ŒãŸ",["my_ba",my_ba[num]]);
                    }else{
                        teki_ba[num]=ba;
                        teki_ba[num].card.effect("å¬å–šã•ã‚ŒãŸ",["teki_ba",teki_ba[num]]);
                    }
                    
                }
                function ä¸Šä½å¬å–š(joui_card,deck,num,ç¶™æ‰¿state){
                    let doko_syoukan;
                    let doko_tehuda;
                    let ba;
                    let deck_length=deck.length;

                    if(deck==my_deck){//è‡ªãƒ‡ãƒƒã‚­
                        doko_syoukan="my_ba";
                        ba=my_ba;
                    }else{//æ•µã ã­ã€‚
                        doko_syoukan="teki_ba";
                        ba=teki_ba;
                    }
                    
                    deck[deck_length]={card:joui_card};
                    deck[deck_length].ATK=joui_card.ATK;
                    deck[deck_length].HP=joui_card.HP;
                    deck[deck_length].state=joui_card.state.slice();//sliceã‚’ã¤ã‘ã‚‹ã“ã¨ã§å‚ç…§æ¸¡ã—ã‚’ã‚„ã‚ã•ã›ã¦å€¤æ¸¡ã—ã‚’è¡Œã‚ã›ã¦ã„ã¾ã™
                    deck[deck_length].position=doko_syoukan;
                    deck[deck_length].state.push(...ç¶™æ‰¿state);
                
                    
                    syoukan(deck[deck_length],doko_syoukan,num);
                    
                }
                function deck_initialize(list,deck,yamahuda){
                    //my_deck[i]={card:test_card,ATK:1,HP:1,state:[],position:"my_yamahuda",can_ATK:0};
                    var doko_position;
                    var doko_syoukan;
                    var doko_tehuda;
                    var ba;
                    var tehuda;
                    if(deck==my_deck){
                        doko_position="my_yamahuda";//è‡ªãƒ‡ãƒƒã‚­ã®åˆæœŸåŒ–ãªã‚‰è‡ªåˆ†ã®å±±æœ­ã«å…¥ã‚Œã¦ã­
                        doko_syoukan="my_ba";
                        doko_tehuda="my_tehuda";
                        ba=my_ba;
                        tehuda=my_tehuda;
                    }else{
                        doko_position="teki_yamahuda";//æ•µã ã­ã€‚
                        doko_syoukan="teki_ba";
                        doko_tehuda="teki_tehuda";
                        ba=teki_ba;
                        tehuda=teki_tehuda;
                    }
                    var nani_card;
                    var imano_num;
                    var swap;
                    var ACE;
                    imano_num=0;

                    for(let i=0;i<list.card_list.length;i++){
                        nani_card=list.card_list[i][0];//ã“ã®ã‚«ãƒ¼ãƒ‰næšå±±æœ­ã«å…¥ã‚Œã‚‹ãœï¼
                        for(let j=0;j<list.card_list[i][1];j++){
                            deck[imano_num]={card:nani_card};//ã“ã“ã ã‘æãæ–¹ãŒé•ã†ã®ã¯ãªã€ã—ã‹ãŸãªã„ã‚“ã‚„ãªã£ã¦
                            deck[imano_num].ATK=nani_card.ATK;
                            deck[imano_num].HP=nani_card.HP;
                            deck[imano_num].state=nani_card.state.slice();//sliceã‚’ã¤ã‘ã‚‹ã“ã¨ã§å‚ç…§æ¸¡ã—ã‚’ã‚„ã‚ã•ã›ã¦å€¤æ¸¡ã—ã‚’è¡Œã‚ã›ã¦ã„ã¾ã™
                            deck[imano_num].position=doko_position;
                            deck[imano_num].can_ATK=0;//ã“ã‚Œã¯æ”»æ’ƒå¯èƒ½ã‹ã©ã†ã‹ã‚’æ„å‘³ã™ã‚‹ãï¼å±±æœ­ã‹ã‚‰æ”»æ’ƒã—ãªã„ã§ãã‚Œã‚ˆãªï¼ï¼ˆã„ã‚„ã€ã§ãã‚‹ã‚„ã¤ãŒã„ãšã‚Œã§ã‚‹ã‹ã‚‚ã—ã‚Œã‚“ãŒï¼‰
                            yamahuda[imano_num]=deck[imano_num];//ã¨ã‚Šã‚ãˆãšå…¨éƒ¨å±±æœ­ã«ã¶ã¡ã“ã‚“ã§ã‚„ã‚‹ãœï½ï¼
                            imano_num+=1;
                        }
                    }
                    
                    ACE=[...list.TOP_ACE];//ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰æ§‹æ–‡ã€€...hoge ã¯hogeã®ä¸­èº«ã¨åŒæ§˜ã«ãªã‚‹ã€‚
                    
                    let TOPã®ä¸€æ™‚ä¿ç®¡=[];//ã„ã£ãŸã‚“TOP_ACEã‚’éš”é›¢ã—ãªã„ã¨ãƒ€ãƒ¡ã ã¨æ€ã£ãŸ

                    for(let j=0;j<ACE.length;j++){//ãªã‚“ã§jãŒiã‚ˆã‚Šå…ˆã«ã‚ã‚‹ã‹ã ã£ã¦ï¼ŸçŸ¥ã‚‰ãªã„ã»ã†ãŒã„ã„ã“ã¨ã‚‚â€¦ã‚ã‚‹ã‚“ã ã‚ˆ
                         for(let i=0;i<yamahuda.length;i++){//TOP_ACEã‚’æŠœãå‡ºã™
                            if(yamahuda[i].card==ACE[j]){//TOPã‚’ç™ºè¦‹ã—ãŸ
                                yamahuda[i].state[yamahuda[i].state.length]="TOP_ACE";
                                TOPã®ä¸€æ™‚ä¿ç®¡[TOPã®ä¸€æ™‚ä¿ç®¡.length]=yamahuda[i];
                                ACE.splice(j,1);
                                yamahuda.splice(i,1);//å¬å–šã—ãŸã®ã§å±±æœ­æ¸›ã‚Šã¾ã™ã€‚
                                j-=1;//å–ã‚Šå‡ºã—ãŸã®ã§
                                break;
                            }
                        }
                        if(ACE.length==0){
                            break;
                        }
                    }

                    ACE=[...list.ACE];//ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰æ§‹æ–‡ã€€...hoge ã¯hogeã®ä¸­èº«ã¨åŒæ§˜ã«ãªã‚‹ã€‚
                    for(let i=0;i<yamahuda.length;i++){//ACEã«ACEstateã‚’ã‚ã’ã‚‹
                        for(let j=0;j<ACE.length;j++){
                            if(yamahuda[i].card==ACE[j]){
                                
                                yamahuda[i].state[yamahuda[i].state.length]="ACE";
                                ACE.splice(j,1);
                                break;
                            }
                        }
                        if(ACE.length==0){
                            break;
                        }
                    }
                    //ã“ã“ã§ã‚·ãƒ£ãƒƒãƒ•ãƒ«ã™ã¹ãã‚ˆï¼ãã†ã ã‚ï¼ã€€â†’Fisher-Yates shuffleã¨ã„ã†ã‚‰ã—ã„
                    for(let i=yamahuda.length-1;i>0;i--){//ãƒ‡ãƒƒã‚­ã®ã‚±ãƒ„ã‹ã‚‰â€¦
                        var j = Math.floor(Math.random() * (i + 1));//ã‚±ãƒ„ä»¥ä¸‹ã®ç•ªå·ã®æœ­ã‚’ãƒ©ãƒ³ãƒ€ãƒ ã«é¸ã³
                        swap =yamahuda[i];//iã¨jã§ã‚¹ãƒ¯ãƒƒãƒ—ã™ã‚‹ã€‚
                        yamahuda[i]=yamahuda[j];
                        yamahuda[j]=swap;
                    }
                    //TOP_ACEã®å¬å–šé †ã‚‚ãƒ©ãƒ³ãƒ€ãƒ ã«â€¦ã™ã‚‹ã¨æ¼”å‡ºãŒçµ‚ã‚ã‚‹ã‹ã‚‰ã‚„ã‚ã‚
                   

                    //ã‚·ãƒ£ãƒƒãƒ•ãƒ«ãŒçµ‚ã‚ã£ãŸã‚‰TOP_ACEã‚’å¬å–šã—ã¦ã„ããœï¼
                    let ACE_count=0;//å¬å–šæ•°è¦‹ã¾ã™
                    for(let i=0;i< TOPã®ä¸€æ™‚ä¿ç®¡.length;i++){
                        if(TOPã®ä¸€æ™‚ä¿ç®¡[i].state.indexOf("ãƒ¢ãƒ³ã‚¹ã‚¿ãƒ¼")!=-1 && ACE_count!=5){//ãƒ¢ãƒ³ã‚¹ã‚¿ãƒ¼ã®TOP_ACEã¯å¬å–š
                            for(let j=ACE_count;j<5;j++){
                                if(ba[ba_haiti[j]]==""){
                                    syoukan(TOPã®ä¸€æ™‚ä¿ç®¡[i],doko_syoukan,ba_haiti[j]);//ãƒ‡ãƒƒã‚­ã®æœ€åˆã«ã„ã‚‹ã‚„ã¤ã‹ã‚‰å¬å–šã—ã¦ã„ã
                                    ACE_count=j+1;
                                    break;
                                }else if(j==4){//ãªã‚“ã‹ã—ã‚‰ã­ãˆãŒå ´ãŒåŸ‹ã¾ã£ã¦ã¦å¬å–šã§ããªã‹ã£ãŸãœï¼
                                    ACE_count=5;
                                    tehuda[tehuda.length]=TOPã®ä¸€æ™‚ä¿ç®¡[i];
                                    tehuda[tehuda.length-1].position=doko_tehuda;
                                }
                            }
                        }else{//é­”æ³•ã¯æ‰‹æœ­ã«â€¦ã‚‚ã—ãã¯å¬å–šã—ã™ããŸãƒ¢ãƒ³ã‚¹ã‚¿ãƒ¼
                            tehuda[tehuda.length]=TOPã®ä¸€æ™‚ä¿ç®¡[i];
                            tehuda[tehuda.length-1].position=doko_tehuda;
                        }
                    }
                }
                function pull_card(yamahuda,tehuda=undefined,maisuu){
                    if(yamahuda.length<maisuu){
                        maisuu=yamahuda.length;//å±±æœ­ã«ã‚«ãƒ¼ãƒ‰ãŒãªã„ã®ã«å¼•ãã‚“ã˜ã‚ƒãªã„
                    }
                    if(yamahuda==my_yamahuda){//è‡ªãƒ‡ãƒƒã‚­ã®åˆæœŸåŒ–ãªã‚‰è‡ªåˆ†ã®å±±æœ­ã«å…¥ã‚Œã¦ã­
                        for(let i=0;i<maisuu;i++){
                            tehuda[tehuda.length]=yamahuda[yamahuda.length-1];
                            tehuda[tehuda.length-1].position="my_tehuda";
                            yamahuda.splice(-1,1);//ãƒ‰ãƒ­ãƒ¼ã—ãŸã®ã§å±±æœ­æ¸›ã‚Šã¾ã™ã€‚
                        }
                    }else{//æ•µã ã­ã€‚
                        for(let i=0;i<maisuu;i++){
                            tehuda[tehuda.length]=yamahuda[yamahuda.length-1];
                            tehuda[tehuda.length-1].position="teki_tehuda";
                            yamahuda.splice(-1,1);//ãƒ‰ãƒ­ãƒ¼ã—ãŸã®ã§å±±æœ­æ¸›ã‚Šã¾ã™ã€‚
                        }
                    }
                    
                    
                }
                function atk_mons(atk_card,def_card){//ä½“åŠ›æ¸›ã‚‰ã™ã¨ã“ã‚ã¾ã§ã—ã‹ãªã„ã€‚ã“ã®ã‚ã¨ã«æ®ºã—ã¦ã‚‹ã€‚â€¦ã©ã†ãªã‚“ã 
                    def_card.card.effect("æ”»æ’ƒã•ã‚ŒãŸ");//æ”»æ’ƒã‚«ãƒ¼ãƒ‰ã¨ã‹æ¸¡ã—ãŸããªã„ã§ã™ã‹ï¼Ÿâ†’ã©ã†ã›ã‚°ãƒ­ãƒ¼ãƒãƒ«å¤‰æ•°ã«ã‚ã‚‹ã‹ã‚‰æ¸¡ã•ã‚“ã§ãˆãˆï¼ï¼ˆãªã‚‹ã»ã©ï½ï¼‰
                    def_card.HP-=atk_card.ATK;

                }
                function atk_yamahuda(atk,yamahuda,haka,ba,tehuda){
                    var doko_haka;
                    var dare_kati;
                    var doko_syoukan;
                    var doko_tehuda;
                    var haka_length_pre;
                    if(yamahuda==teki_yamahuda){//æ•µã¸ã®æ”»æ’ƒã•ï¼
                        dare_kati="ä¿ºå‹ã¡";                          
                        doko_haka="teki_haka";
                        doko_syoukan="teki_ba";
                        doko_tehuda="teki_tehuda";
                        haka_length_pre=teki_haka.length;
                    }else{
                        dare_kati="æ•µå‹ã¡";                          
                        doko_haka="my_haka";
                        doko_syoukan="my_ba";
                        doko_tehuda="my_tehuda";
                        haka_length_pre=my_haka.length;
                    }
                    if(atk>yamahuda.length){//ã¯ã„æ­»äº¡ï½ï¼æ”»æ’ƒã•ã‚ŒãŸå´ã®è² ã‘ğŸ‘(0æšã«ãªã£ãŸã ã‘ã§ã¯æ­»ãªãªã„ã‚ˆ)
                        atk=yamahuda.length;
                        duel_phase=dare_kati;
                    }
                    if(yamahuda==teki_yamahuda){//æ•µã¸ã®æ”»æ’ƒã•ï¼
                        yamahuda_damage[1]=atk;
                    }else{
                        yamahuda_damage[0]=atk;
                    }
                    let deck_top;
                    for(let i=0;i<atk;i++){
                        deck_top=yamahuda[yamahuda.length-1];
                        yamahuda.splice(-1,1);//ã“ã“ã«ãªã„ã¨ãƒ‰ãƒ­ãƒ¼ç³»ACEãŒå£Šã‚Œã‚‹
                        if(deck_top.state.indexOf("ACE")!=-1 || deck_top.state.indexOf("TOP_ACE")!=-1){//ACEãƒ¢ãƒ³ã‚¹ã‚¿ãƒ¼æ¥ãŸï¼
                            if(deck_top.state.indexOf("ãƒ¢ãƒ³ã‚¹ã‚¿ãƒ¼")!=-1){
                                for(let j=0;j<5;j++){
                                    if(ba[ba_haiti[j]]==""){
                                        syoukan(deck_top,doko_syoukan,ba_haiti[j]);
                                        if(atk>yamahuda.length+i+1){//å¬å–šæ™‚ã®ãƒ‰ãƒ­ãƒ¼å‡¦ç†ãªã©ã§ãƒ‡ãƒƒã‚­æšæ•°ãŒæ¸›ã£ã¦ã„ã‚‹ã¨æšæ•°ãŒãƒã‚¤ãƒŠã‚¹ã«ãªã£ãŸã‚Šã™ã‚‹ã®ã§æ¸›ã‚‰ã™
                                            atk=yamahuda.length+i+1;
                                        }
                                        break;
                                    }
                                    if(j==4){//å¬å–šã§ããªã‹ã£ãŸï¼ˆç¬‘ï¼‰â†’æ‰‹æœ­ã¸
                                        tehuda[tehuda.length]=deck_top;
                                        tehuda[tehuda.length-1].position=doko_tehuda;
                                    }
                                }
                                
                                if(dare_kati=="ä¿ºå‹ã¡"){
                                    duel_phase="è‡ªç”±";//æœ€å¾Œã®ç ¦ãŒå¬å–šã•ã‚ŒãŸã®ã§å‹ã¡ã‚’å–ã‚Šæ¶ˆã—ã¦ã‚¿ãƒ¼ãƒ³ç¶šè¡Œ
                                }else{
                                    duel_phase="ç›¸æ‰‹";
                                }
                            }else{//å¬å–šã§ããªã‹ã£ãŸï¼ˆç¬‘ï¼‰â†’æ‰‹æœ­ã¸
                                tehuda[tehuda.length]=deck_top;
                                tehuda[tehuda.length-1].position=doko_tehuda;

                            }
                        }else{
                            haka[haka.length]=deck_top;
                            haka[haka.length-1].position=doko_haka;
                        }
                        
                    }
                    if(yamahuda==teki_yamahuda){//æ•µã¸ã®æ”»æ’ƒã•ï¼
                        yamahuda_damage[3]=teki_haka.length-haka_length_pre;
                    }else{
                        yamahuda_damage[2]=my_haka.length-haka_length_pre;
                    }
                }
                function ba_mons_num(ba){
                    var num_of_mons;
                    num_of_mons=0;
                    for(let i=0;i<5;i++){
                        if(ba[i]!=""){
                            num_of_mons+=1;
                        }
                    }
                    return num_of_mons;
                }
                function text_kaigyou_hyouji(txt,x,y,x_haba,y_haba,moji_zenkaku,iro=[]){//ãƒ†ã‚­ã‚¹ãƒˆã‚’canvasã§ã‚‚æ”¹è¡Œã—ã¦ãã‚Œã‚‹ã‚“ã‚„ï¼
                    var txt_array;
                    var past_i;
                    var moji_x;
                    var moji_count;
                    var moji_color;
                    var color_count;
                    var iro_count;
                    txt_array=[];
                    past_i=0;
                    moji_count=0;
                    color_count=-1;
                    iro_count=0;
                    moji_color=ctx.fillStyle;
                    ctx.font = moji_zenkaku+"px  'ï¼­ï¼³ ã‚´ã‚·ãƒƒã‚¯'";//ãƒ•ã‚©ãƒ³ãƒˆè¨­å®šã€‚
                    for (let i=0; i<txt.length; i++){
                        if(ctx.measureText(txt.substr(past_i,i-past_i+2)).width > x_haba){
                            txt_array[txt_array.length]=txt.substr(past_i,i-past_i+1);
                            past_i=i+1;
                        }
                    }
                    if(past_i!=txt.length){//åˆ‡ã‚Šå–ã‚Šä½™ã£ã¦ã¾ã™ã‚ˆ
                        txt_array[txt_array.length]=txt.substr(past_i);
                    }
                    if(txt_array.length+1>Math.floor(y_haba/moji_zenkaku)){//ç¸¦ã«ã¯ã¿å‡ºã—ã¦ã‚‹ã
                        text_kaigyou_hyouji(txt,x,y,x_haba,y_haba,moji_zenkaku-1,iro);//ã¡ã‚‡ã£ã¨å°ã•ããªã£ã¦ã‚„ã‚ŠãªãŠã—ã¦ã“ã„
                    }else{
                        if(iro==""){//è‰²ã¬ã‚Šã—ãªã„
                            for (let i=0; i<txt_array.length; i++){
                                    ctx.fillText(txt_array[i], x, y+(i+1)*moji_zenkaku);//æ–‡å­—ã‚’è¡¨ç¤ºã—ã¦ã„ããœãƒ¼ï¼
                            }
                        }else{
                            //è‰²ã‚’å¡—ã‚ŠãŸã„ã¨ã„ã†æ°—æŒã¡ã¯ã‚ã‚Šã¾ã›ã‚“ã‹ï¼Ÿ
                            //iro[[è‰²å¤‰ãˆã¯ã˜ã‚,å¡—ã‚‹æ–‡å­—æ•°,"rgb( , , )"],[],[],...] 
                            iro[iro.length]=[0,0,"çµ‚ã‚ã‚Š"];
                            for (let i=0; i<txt_array.length; i++){
                                moji_x=0;
                                for(let j=0;j<txt_array[i].length;j++){
                                    
                                    if(moji_count==iro[iro_count][0]){
                                        color_count=iro[iro_count][1];
                                        ctx.fillStyle=iro[iro_count][2];
                                        iro_count+=1;
                                    }
                                        
                                    if(color_count>=1){
                                        color_count-=1;
                                    }else if(color_count==0){
                                        color_count-=1;
                                        ctx.fillStyle=moji_color;//è‰²æˆ»ã—ã¦
                                    }
                                    ctx.fillText(txt_array[i][j], x+moji_x, y+(i+1)*moji_zenkaku);//æ–‡å­—ã‚’è¡¨ç¤ºã—ã¦ã„ããœãƒ¼!(1æ–‡å­—ãšã¤)
                                    moji_x+=ctx.measureText(txt_array[i][j]).width;
                                    moji_count+=1;
                                }
                            }
                        }
                        ctx.fillStyle=moji_color;//è‰²æˆ»ã—ã¦
                    }
                }
                function takusan_card_draw(card,x,y,x_haba,y_haba){
                    var kakudai;
                    var x_maisuu;
                    kakudai=1;
                    while(card.length>Math.floor(x_haba/(kakudai*140))*Math.floor(y_haba/(kakudai*210))){//æ‹¡å¤§ç‡ã‚’ä¸‹ã’ã¦ã‚«ãƒ¼ãƒ‰ãŒå…¨éƒ¨æ ã«å…¥ã‚‹ã‚ˆã†ã«èª¿æ•´ã™ã‚‹
                        kakudai-=0.01;
                    }
                    x_maisuu=Math.floor(x_haba/(kakudai*140));
                    ctx.save();
                    ctx.scale(kakudai,kakudai);
                    for(let i=0;i<card.length;i++){
                        card_draw(card[i],x/kakudai+140*(i%x_maisuu),y/kakudai+210*(Math.floor(i/x_maisuu)));
                    }
                    ctx.restore();
                }
                function ã‚·ãƒ³ãƒ—ãƒ«ã‚«ãƒ¼ãƒ‰è¡¨ç¤º(print_card,x,y,of_y=0){
                    ctx.drawImage(print_card.image,x,y+of_y);
                    
                    if(print_card.state.indexOf("ãƒ¢ãƒ³ã‚¹ã‚¿ãƒ¼")!=-1){
                        ctx.drawImage(atk_plate,x,y+104+of_y);
                        ctx.drawImage(def_plate,x,y+152+of_y);
                        ctx.font = "40px  'ï¼­ï¼³ ã‚´ã‚·ãƒƒã‚¯'";//ãƒ•ã‚©ãƒ³ãƒˆè¨­å®šã€‚å·¦ã®ãƒ•ã‚©ãƒ³ãƒˆãŒãªã„ã¨å³ã®ãƒ•ã‚©ãƒ³ãƒˆã‚’é©ç”¨ã™ã‚‹ã‚‰ã—ã„ã€‚
                        ctx.fillStyle="rgb(255,255,255)";
                        if(print_card.ATK<10){
                            ctx.fillText(print_card.ATK, x+13, y+146+of_y,42);
                        }else{
                            ctx.fillText(print_card.ATK, x+3, y+146+of_y,42);
                        }
                        if(print_card.HP<10){
                            ctx.fillText(print_card.HP, x+13, y+188+of_y,42);
                        }else{
                            ctx.fillText(print_card.HP, x+3, y+188+of_y,42);
                        }
                    }else{//é­”æ³•ã˜ã‚ƒã‚“ï¼ˆã»ã‚“ã¾ã‹ï¼Ÿï¼‰
                        ctx.fillStyle="rgb(0,200,0)";
                        ctx.fillRect(x-2,y+of_y,3,200);
                        ctx.fillRect(x+130,y+of_y,3,200);
                        ctx.fillRect(x,y+of_y,133,3);
                        ctx.fillRect(x,y+197+of_y,133,3);
                    }   
                }
                function ãƒ‘ãƒƒã‚¯ã®ä¸­èº«(card,x,y,x_haba,y_haba){
                    var kakudai;
                    var x_maisuu;
                    var hyouji_maisuu=1;
                    var count=0;

                    for(let i=1;i<card.length;i++){
                        if(card[i-1]!=card[i]){
                            hyouji_maisuu+=1;
                        }
                        
                    }

                    kakudai=1;
                    while(hyouji_maisuu>Math.floor(x_haba/(kakudai*140))*Math.floor(y_haba/(kakudai*210))){//æ‹¡å¤§ç‡ã‚’ä¸‹ã’ã¦ã‚«ãƒ¼ãƒ‰ãŒå…¨éƒ¨æ ã«å…¥ã‚‹ã‚ˆã†ã«èª¿æ•´ã™ã‚‹
                        kakudai-=0.01;
                    }
                    x_maisuu=Math.floor(x_haba/(kakudai*140));
                    ctx.save();
                    ctx.scale(kakudai,kakudai);

                    ã‚·ãƒ³ãƒ—ãƒ«ã‚«ãƒ¼ãƒ‰è¡¨ç¤º(card[0],x/kakudai,y/kakudai);
                    for(let i=1;i<card.length;i++){
                        if(card[i-1]!=card[i]){
                            count+=1;
                            ã‚·ãƒ³ãƒ—ãƒ«ã‚«ãƒ¼ãƒ‰è¡¨ç¤º(card[i],x/kakudai+140*(count%x_maisuu),y/kakudai+210*(Math.floor(count/x_maisuu)));
                        }
                        
                    }
                    ctx.restore();
                }
                function å‡ºã¦ããŸã‚«ãƒ¼ãƒ‰ã®ä¸­èº«(card,x,y,x_haba,y_haba){
                    var kakudai;
                    var x_maisuu;
                    var count=0;

                    kakudai=1;
                    while(card.length>Math.floor(x_haba/(kakudai*140))*Math.floor(y_haba/(kakudai*210))){//æ‹¡å¤§ç‡ã‚’ä¸‹ã’ã¦ã‚«ãƒ¼ãƒ‰ãŒå…¨éƒ¨æ ã«å…¥ã‚‹ã‚ˆã†ã«èª¿æ•´ã™ã‚‹
                        kakudai-=0.01;
                    }
                    x_maisuu=Math.floor(x_haba/(kakudai*140));
                    ctx.save();
                    ctx.scale(kakudai,kakudai);

                    for(let i=0;i<card.length;i++){
                        ã‚·ãƒ³ãƒ—ãƒ«ã‚«ãƒ¼ãƒ‰è¡¨ç¤º(card[i],x/kakudai+140*(i%x_maisuu),y/kakudai+210*(Math.floor(i/x_maisuu)));
                    }
                    ctx.restore();
                }
                //deck_list={card_list:[[sukurappudoro,2],[atakkumojuru,10]],ACE:[],TOP_ACE:[]};
                function ãƒ‡ãƒƒã‚­è¡¨ç¤º(card,x,y,x_haba,y_haba){
                    var kakudai;
                    var x_maisuu;
                    var hyouji_maisuu=0;
                    var count=0;

                    for(let i=0;i<card.card_list.length;i++){
                        hyouji_maisuu+=card.card_list[i][1];                        
                    }

                    kakudai=1;
                    while(hyouji_maisuu>Math.floor(x_haba/(kakudai*140))*Math.floor(y_haba/(kakudai*210))){//æ‹¡å¤§ç‡ã‚’ä¸‹ã’ã¦ã‚«ãƒ¼ãƒ‰ãŒå…¨éƒ¨æ ã«å…¥ã‚‹ã‚ˆã†ã«èª¿æ•´ã™ã‚‹
                        kakudai-=0.01;
                    }

                    x_maisuu=Math.floor(x_haba/(kakudai*140));
                    ctx.save();
                    ctx.scale(kakudai,kakudai);

                    var ä¸€æ™‚_ACE=[...card.ACE];
                    var ä¸€æ™‚_TOP_ACE=[...card.TOP_ACE];
                    var ã‚‚ã†æ æã„ãŸã®ã§ç„¡è¦–ã—ã¦ãã ã•ã„=0;
                    for(let i=0;i<card.card_list.length;i++){
                        for(let j=0;j<card.card_list[i][1];j++){
                            ã‚‚ã†æ æã„ãŸã®ã§ç„¡è¦–ã—ã¦ãã ã•ã„=0;
                            for(let k=0;k<ä¸€æ™‚_TOP_ACE.length;k++){
                                if(ä¸€æ™‚_TOP_ACE[k]==card.card_list[i][0]){
                                    ctx.fillStyle="rgb(255,0,0)";
                                    ctx.fillRect(x/kakudai+140*(count%x_maisuu)-4,y/kakudai+210*(Math.floor(count/x_maisuu))-4,138,208);
                                    ä¸€æ™‚_TOP_ACE.splice(k,1);
                                    ã‚‚ã†æ æã„ãŸã®ã§ç„¡è¦–ã—ã¦ãã ã•ã„=1;
                                    break;
                                }
                            }
                            if(ã‚‚ã†æ æã„ãŸã®ã§ç„¡è¦–ã—ã¦ãã ã•ã„==0){
                                for(let k=0;k<ä¸€æ™‚_ACE.length;k++){
                                    if(ä¸€æ™‚_ACE[k]==card.card_list[i][0]){
                                        ctx.fillStyle="rgb(255,255,0)";
                                        ctx.fillRect(x/kakudai+140*(count%x_maisuu)-4,y/kakudai+210*(Math.floor(count/x_maisuu))-4,138,208);
                                        ä¸€æ™‚_ACE.splice(k,1);
                                        break;
                                    }
                                }
                            }
                            
                            ã‚·ãƒ³ãƒ—ãƒ«ã‚«ãƒ¼ãƒ‰è¡¨ç¤º(card.card_list[i][0],x/kakudai+140*(count%x_maisuu),y/kakudai+210*(Math.floor(count/x_maisuu)));
                            count+=1;
                        }
                        
                    }
                    ctx.restore();
                }
                function ä¿å­˜ãƒ‡ãƒƒã‚­è¡¨ç¤º(card,x,y,x_haba,y_haba){
                    var kakudai;
                    var x_maisuu;
                    var hyouji_maisuu=0;

                    kakudai=1;
                    while(card.card_list.length>Math.floor(x_haba/(kakudai*140))*Math.floor(y_haba/(kakudai*210))){//æ‹¡å¤§ç‡ã‚’ä¸‹ã’ã¦ã‚«ãƒ¼ãƒ‰ãŒå…¨éƒ¨æ ã«å…¥ã‚‹ã‚ˆã†ã«èª¿æ•´ã™ã‚‹
                        kakudai-=0.01;
                    }

                    x_maisuu=Math.floor(x_haba/(kakudai*140));
                    ctx.save();
                    ctx.scale(kakudai,kakudai);

                    for(let i=0;i<card.ACE.length;i++){
                        ctx.fillStyle="rgb(255,255,0)";
                        ctx.fillRect(x/kakudai+140*(card.ACE[i]%x_maisuu)-4,y/kakudai+210*(Math.floor(card.ACE[i]/x_maisuu))-4,138,208);
                    }
                    for(let i=0;i<card.TOP_ACE.length;i++){
                        ctx.fillStyle="rgb(255,0,0)";
                        ctx.fillRect(x/kakudai+140*(card.TOP_ACE[i]%x_maisuu)-4,y/kakudai+210*(Math.floor(card.TOP_ACE[i]/x_maisuu))-4,138,208);
                    }
                    for(let i=0;i<card.card_list.length;i++){
                        ã‚·ãƒ³ãƒ—ãƒ«ã‚«ãƒ¼ãƒ‰è¡¨ç¤º(card.card_list[i],x/kakudai+140*(i%x_maisuu),y/kakudai+210*(Math.floor(i/x_maisuu)));
                    }
                    ctx.restore();
                }
                function tokusyu_hyouji(x,y){
                    ctx.font = "32px  'ï¼­ï¼³ ã‚´ã‚·ãƒƒã‚¯'";//ãƒ•ã‚©ãƒ³ãƒˆè¨­å®šã€‚å·¦ã®ãƒ•ã‚©ãƒ³ãƒˆãŒãªã„ã¨å³ã®ãƒ•ã‚©ãƒ³ãƒˆã‚’é©ç”¨ã™ã‚‹ã‚‰ã—ã„ã€‚
                    ctx.fillStyle="rgb(0,0,0)";
                    for(let i=0;i<ç‰¹æ®ŠçŠ¶æ…‹.length;i++){
                        if(ç‰¹æ®ŠçŠ¶æ…‹[i]=="æ”»æ’ƒ+1"){
                            ctx.drawImage(kougeki_1_32,x+64*i,y);
                            ctx.fillText("1", x+35+64*i, y+27);
                        }else if(ç‰¹æ®ŠçŠ¶æ…‹[i]=="ä½“åŠ›+1"){
                            ctx.drawImage(tairyoku_1_32,x+64*i,y);
                            ctx.fillText("1", x+35+64*i, y+27);
                        }
                    }
                }

                function ã‚«ãƒ¼ãƒ‰ãƒ‘ãƒƒã‚¯(x,y,pack){
                    ctx.fillStyle="rgb(20,20,50)";
                    ctx.fillRect(x-2,y-2,134,224);

                    ctx.drawImage(pack,x,y);

                    ctx.beginPath();
                    ctx.arc(x+65,y+12, 8,0,Math.PI*2, true);
                    ctx.stroke();
                    ctx.beginPath();
                    ctx.arc(x+65,y+12, 8,0,Math.PI*2, true);
                    ctx.fillStyle ="rgb(20,20,50,0.1)";
                    ctx.fill();

                    ctx.fillStyle="rgb(20,20,20,0.5)";
                    ctx.fillRect(x,y+22,130,2);
                    ctx.fillRect(x,y+22,2,198);
                    ctx.fillRect(x+128,y+22,2,198);
                    ctx.fillRect(x+2,y+218,126,2);
                    ctx.fillRect(x+2,y+24,126,2);
                    
                }
                function ãƒ‘ãƒƒã‚¯é™³åˆ— (x,y,pack,ä»Šé¸ã°ã‚Œã¦ã¾ã™){
                    if(ä»Šé¸ã°ã‚Œã¦ã¾ã™){
                        ctx.fillStyle="rgb(0,0,0,0.2)";
                        ctx.fillRect(x-10,y,140,235);
                        ã‚«ãƒ¼ãƒ‰ãƒ‘ãƒƒã‚¯(x,y,pack);
                        ã‚«ãƒ¼ãƒ‰ãƒ‘ãƒƒã‚¯(x+10,y,pack);
                        ctx.fillStyle="rgb(0,0,0,0.2)";
                        ctx.fillRect(x+25,y,5,220);
                        ã‚«ãƒ¼ãƒ‰ãƒ‘ãƒƒã‚¯(x+30,y,pack);
                        ctx.fillStyle="rgb(0,0,0,0.2)";
                        ctx.fillRect(x+60,y,40,220);

                        ctx.fillStyle="rgb(20,20,50)";
                        ctx.beginPath();
                        ctx.arc(x+95,y+12, 8,0,Math.PI*2, true);
                        ctx.stroke();
                        ctx.beginPath();

                        ctx.beginPath();
                        ctx.arc(x+95,y+12, 7,0,Math.PI*2, true);
                        ctx.fillStyle ="rgb(150,150,150)";
                        ctx.fill();

                        ã‚«ãƒ¼ãƒ‰ãƒ‘ãƒƒã‚¯(x+100,y,pack);
                        
                        ctx.beginPath();
                        ctx.arc(x+165,y+12, 8,0,Math.PI*2, true);
                        ctx.stroke();
                        ctx.beginPath();
                        ctx.arc(x+165,y+2, 8,0,Math.PI*2, true);
                        ctx.stroke();
                        ctx.beginPath();

                        ctx.fill();
                        ctx.arc(x+165,y+12, 7,0,Math.PI*2, true);
                        ctx.fillStyle ="rgb(200,200,200)";
                        ctx.fill();
                        ctx.beginPath();
                        ctx.arc(x+165,y+2, 7,0,Math.PI*2, true);
                        ctx.fillStyle ="rgb(200,200,200)";
                        ctx.fill();
                        
                    }else{
                        ctx.fillStyle="rgb(0,0,0,0.2)";
                        ctx.fillRect(x-10,y,140,235);
                        ã‚«ãƒ¼ãƒ‰ãƒ‘ãƒƒã‚¯(x,y,pack);
                        ã‚«ãƒ¼ãƒ‰ãƒ‘ãƒƒã‚¯(x+10,y,pack);
                        ctx.fillStyle="rgb(0,0,0,0.2)";
                        ctx.fillRect(x+25,y,5,220);
                        ã‚«ãƒ¼ãƒ‰ãƒ‘ãƒƒã‚¯(x+30,y,pack);
                        ctx.fillStyle="rgb(0,0,0,0.2)";
                        ctx.fillRect(x+50,y,10,220);
                        ã‚«ãƒ¼ãƒ‰ãƒ‘ãƒƒã‚¯(x+60,y,pack);

                        ctx.fillStyle="rgb(20,20,50)";
                        ctx.fillRect(x+125,y+3,40,18);
                        
                        ctx.beginPath();
                        ctx.arc(x+125,y+12, 8,0,Math.PI*2, true);
                        ctx.stroke();
                        ctx.beginPath();
                        ctx.arc(x+165,y+12, 8,0,Math.PI*2, true);
                        ctx.stroke();
                        ctx.beginPath();
                        ctx.arc(x+165,y+2, 8,0,Math.PI*2, true);
                        ctx.stroke();
                        ctx.beginPath();

                        ctx.beginPath();
                        ctx.arc(x+125,y+12, 7,0,Math.PI*2, true);
                        ctx.fillStyle ="rgb(200,200,200)";
                        ctx.fill();
                        ctx.arc(x+165,y+12, 7,0,Math.PI*2, true);
                        ctx.fillStyle ="rgb(200,200,200)";
                        ctx.fill();
                        
                        
                        ctx.fillStyle="rgb(200,200,200)";
                        ctx.fillRect(x+125,y+5,40,14);

                        ctx.fillStyle="rgb(0,0,0,0.4)";
                        ctx.fillRect(x,y,190,220);

                        ctx.beginPath();
                        ctx.arc(x+165,y+2, 7,0,Math.PI*2, true);
                        ctx.fillStyle ="rgb(200,200,200)";
                        ctx.fill();
                        ctx.fillStyle="rgb(200,200,200)";
                        ctx.fillRect(x+125,y+5,40,2);
                    }
                    
                }
                function å…‰(x,y,bairitu){
                    let iro_pixel=ctx.getImageData(x*bairitu,y*bairitu,bairitu,bairitu);
                    let iro_heikin;
                    for(let i=0;i<bairitu*bairitu*4;i+=4){
                        iro_heikin=(iro_pixel.data[0+i]+iro_pixel.data[1+i]+iro_pixel.data[2+i])/3;
                        iro_pixel.data[0+i]=iro_pixel.data[0+i]+((iro_pixel.data[0+i]/iro_heikin)*50);
                        iro_pixel.data[1+i]=iro_pixel.data[1+i]+((iro_pixel.data[1+i]/iro_heikin)*50);
                        iro_pixel.data[2+i]=iro_pixel.data[2+i]+((iro_pixel.data[2+i]/iro_heikin)*50);
                        
                    }
                    ctx.putImageData(iro_pixel, x*bairitu, y*bairitu);
                }
                function æ£®ã‚¤ãƒ™ãƒ³ãƒˆ(ID){
                    if(ID==6){
                        æ¼”å‡ºã‚«ã‚¦ãƒ³ãƒˆ=1;
                        mini_stage=2;
                        next_mini_stage=1;
                        teki_deck_list=sasori_list;//ä½¿ç”¨ãƒ‡ãƒƒã‚­ ã‚ã‚Œï¼Ÿå®£è¨€ç®‡æ‰€ä¸‹ã®ã»ã†ã ã‘ã©ã„ã„ã®ã‹ãªã€ã„ã„ã‹
                        teki_pull=2;//ãƒ‰ãƒ­ãƒ¼æšæ•°
                        drop_gold=0;//ãŠé‡‘ãƒ¼ï¼
                    }
                }
                function ä¸æµ„ã®æ£®(){
                    if(key_interval<=0 && key_input!=""){//ã‚­ãƒ¼ãŒé•·æŠ¼ã—ã•ã‚Œã¦ã„ã‚‹å ´åˆã¯key_intervalãŒ0ã«ãªã£ã¦ã¦ã€ã‚­ãƒ¼æ“ä½œãŒé£›ã‚“ã§ããŸã‚‰
                        key_interval=5;//30*n/1000[s]ã®é–“ã€é•·æŠ¼ã—ã§ã®é€£ç¶šå…¥åŠ›ã‚’ç„¡åŠ¹ã€‚
                        for(let i=0;i<key_input.length;i++){
                            if(key_input.charAt(i)=="â†‘"){
                                if(mini_stage==1){
                                    if(syuukun_y==0){
                                        syuukun_y=4;
                                        stage_y-=1;
                                    }else if(mori_stage[stage_x][stage_y][syuukun_x][syuukun_y-1]!=1){
                                        syuukun_y-=1;
                                        syuukun_move[1]+=20;
                                        if(mori_stage[stage_x][stage_y][syuukun_x][syuukun_y]>5){//ã‚¤ãƒ™ãƒ³ãƒˆã‚‰ï½
                                            æ£®ã‚¤ãƒ™ãƒ³ãƒˆ(mori_stage[stage_x][stage_y][syuukun_x][syuukun_y]);
                                        }
                                    }
                                }
                            }else if(key_input.charAt(i)=="â†"){
                                if(mini_stage==1){
                                    if(syuukun_x==0){
                                        syuukun_x=4;
                                        stage_x-=1;
                                    }else if(mori_stage[stage_x][stage_y][syuukun_x-1][syuukun_y]!=1){
                                        syuukun_x-=1;
                                        syuukun_move[0]+=20;
                                        if(mori_stage[stage_x][stage_y][syuukun_x][syuukun_y]>5){//ã‚¤ãƒ™ãƒ³ãƒˆã‚‰ï½
                                            æ£®ã‚¤ãƒ™ãƒ³ãƒˆ(mori_stage[stage_x][stage_y][syuukun_x][syuukun_y]);
                                        }
                                    }
                                }
                            }else if(key_input.charAt(i)=="â†’"){
                                if(mini_stage==1){
                                    if(syuukun_x==4){
                                        syuukun_x=0;
                                        stage_x+=1;
                                    }else if(mori_stage[stage_x][stage_y][syuukun_x+1][syuukun_y]!=1){
                                        syuukun_x+=1;
                                        syuukun_move[0]+=-20;
                                        if(mori_stage[stage_x][stage_y][syuukun_x][syuukun_y]>5){//ã‚¤ãƒ™ãƒ³ãƒˆã‚‰ï½
                                            æ£®ã‚¤ãƒ™ãƒ³ãƒˆ(mori_stage[stage_x][stage_y][syuukun_x][syuukun_y]);
                                        }
                                    }
                                }
                            }else if(key_input.charAt(i)=="â†“"){
                                if(mini_stage==1){
                                    if(syuukun_y==4){
                                        syuukun_y=0;
                                        stage_y+=1;
                                    }else if(mori_stage[stage_x][stage_y][syuukun_x][syuukun_y+1]!=1){
                                        syuukun_y+=1;
                                        syuukun_move[1]+=-20;
                                        if(mori_stage[stage_x][stage_y][syuukun_x][syuukun_y]>5){//ã‚¤ãƒ™ãƒ³ãƒˆã‚‰ï½
                                            æ£®ã‚¤ãƒ™ãƒ³ãƒˆ(mori_stage[stage_x][stage_y][syuukun_x][syuukun_y]);
                                        }
                                    }
                                }
                            }else if(key_input.charAt(i)=="ã€‡" && é•·æŠ¼ã—é˜»æ­¢==0){
                                é•·æŠ¼ã—é˜»æ­¢=1;
                                if(mini_stage==1){
                                }
                            }else if(key_input.charAt(i)=="Ã—" && é•·æŠ¼ã—é˜»æ­¢==0){
                                é•·æŠ¼ã—é˜»æ­¢=1;
                            }
                            
                        }
                        if(key_owarasete==1){//ã‚‚ã†ãƒœã‚¿ãƒ³æŠ¼ã—ã¦ãªã„ã€‚æŠ¼ã—ã¦ãªã„ã¨ãã¯ã‚¤ãƒ™ãƒ³ãƒˆãã‚“ã§æ¤œçŸ¥ã™ã‚‹ã‚“ã ã‘ã©ã€å®Ÿè¡Œã‚ˆã‚Šã‚‚å…ˆã«ã‚¤ãƒ™ãƒ³ãƒˆãŒå‘¼ã°ã‚Œã¦ãŸã‚‰ã—ã‹ãŸãªã„ã®ã§ã“ã„ã¤ã§æ­¢ã‚ã‚‹
                            key_input="";
                            key_interval=0;
                        }
                    }else if(key_interval>0){
                        key_interval=key_interval-1;//ã‚«ã‚¦ãƒ³ãƒˆãƒ€ã‚¦ãƒ³
                    }

                    if(é•·æŠ¼ã—é˜»æ­¢==1 && (key_input.indexOf("ã€‡")==-1 && key_input.indexOf("Ã—")==-1)){//ã€‡Ã—ãƒœã‚¿ãƒ³ã®é•·æŠ¼ã—é€£æ‰“é˜»æ­¢ã€‚
                        é•·æŠ¼ã—é˜»æ­¢=0; 
                    }
                    
                    if(mini_stage==0){
                        my_deck=[];//åˆæœŸåŒ–åˆæœŸåŒ–ãƒ¼ï¼ã£ã¦åˆæœŸåŒ–ã—ãªãã¦è‰¯ã„ãƒ¤ãƒ„ã‚‚åˆæœŸåŒ–ã—ã¦ã‚‹æ°—ãŒã™ã‚‹ã€‚ã¾ã‚ã„ã„ã‹
                        
                        my_yamahuda=[];
                        my_tehuda=[];
                        my_ba=["","","","",""];
                        death_my_ba=["","","","",""];//æ­»äº¡æ™‚æ¼”å‡ºã®ãŸã‚ã«ã‚«ãƒ¼ãƒ‰ã‚’åˆ¥ã®å ´æ‰€ã«ç§»ã—ãŸã„ï¼ˆå ´ã«æ®‹ã™ã¨ãƒã‚°ã®æ¸©åºŠã«ãªã‚‹ã“ã¨ã¯è‡ªæ˜ãªã®ã§ï¼‰
                        tukau_mahou=[];//é­”æ³•ã¤ã‹ã£ãŸç¬é–“ã«æ¶ˆãˆã‚‹ã®ã‚ˆããªã„ã¨æ€ã£ãŸã€‚
                        my_haka=[];

                        
                        deck_initialize(deck_list,my_deck,my_yamahuda);

                        my_now_pull=my_deck_pull;//å ´åˆã«ã‚ˆã£ã¦ã¯ã“ã“ã§å¢—ã‚„ã—ã¦ã‚‚ã„ã„ã¨ã€ã§ã‚†ã£ã¡ã¯æ€ã†ã‚ˆ
                        pull_card(my_yamahuda,my_tehuda,my_now_pull);

                        mini_stage=1;//ã“ã‚Œã‚’åŸºæº–ä¸–ç•Œã¨ã™ã‚‹
                        mori_stage[0]=[];
                        mori_stage[0][0]=[[1,1,1,1,1],[1,1,0,1,1],[1,0,0,0,1],[1,1,0,1,1],[1,1,0,1,1]];//xy-xyã®å››æ¬¡å…ƒã«ãªã‚‹ã¨æ€ã†ï¼0:æ­©ã‘ã‚‹ã€€1:å£â€¦5:å£ã€€6~:ãƒ¢ãƒ³ã‚¹ã‚¿ãƒ¼ã¨ã‹â€¦ã‚¤ãƒ™ãƒ³ãƒˆç³»â€¦ã‹ã‚‚â€¦
                        mori_stage[1]=[];
                        mori_stage[1][0]=[[1,1,0,1,1],[1,0,0,0,1],[1,0,6,0,1],[1,0,0,0,1],[1,1,1,1,1]];
                        
                        æœ¨æ¼ã‚Œæ—¥[0]=[[]];//x,y,æºã‚Œã‚‹æ–¹å‘
                        for(let i=0;i<16;i++){
                            æœ¨æ¼ã‚Œæ—¥[0].push([50+i%4,100+Math.floor(i/4),0]);
                            æœ¨æ¼ã‚Œæ—¥[0].push([20+i%4,20+Math.floor(i/4),0]);
                            æœ¨æ¼ã‚Œæ—¥[0].push([23+i%4,22+Math.floor(i/4),0]);
                            æœ¨æ¼ã‚Œæ—¥[0].push([26+i%4,19+Math.floor(i/4),0]);
                            æœ¨æ¼ã‚Œæ—¥[0].push([45+i%4,57+Math.floor(i/4),0]);
                            æœ¨æ¼ã‚Œæ—¥[0].push([45+i%4,62+Math.floor(i/4),0]);
                            æœ¨æ¼ã‚Œæ—¥[0].push([49+i%4,62+Math.floor(i/4),0]);
                            æœ¨æ¼ã‚Œæ—¥[0].push([53+i%4,61+Math.floor(i/4),0]);
                            æœ¨æ¼ã‚Œæ—¥[0].push([57+i%4,62+Math.floor(i/4),0]);
                            æœ¨æ¼ã‚Œæ—¥[0].push([49+i%4,58+Math.floor(i/4),0]);
                            æœ¨æ¼ã‚Œæ—¥[0].push([53+i%4,57+Math.floor(i/4),0]);
                            æœ¨æ¼ã‚Œæ—¥[0].push([57+i%4,56+Math.floor(i/4),0]);

                            æœ¨æ¼ã‚Œæ—¥[0].push([90+i%4,38+Math.floor(i/4),0]);
                            æœ¨æ¼ã‚Œæ—¥[0].push([94+i%4,68+Math.floor(i/4),0]);
                            æœ¨æ¼ã‚Œæ—¥[0].push([91+i%4,67+Math.floor(i/4),0]);

                            æœ¨æ¼ã‚Œæ—¥[0].push([51+i%4,50+Math.floor(i/4),1]);
                            æœ¨æ¼ã‚Œæ—¥[0].push([55+i%4,51+Math.floor(i/4),1]);
                            æœ¨æ¼ã‚Œæ—¥[0].push([59+i%4,51+Math.floor(i/4),1]);
                            æœ¨æ¼ã‚Œæ—¥[0].push([63+i%4,51+Math.floor(i/4),1]);
                            æœ¨æ¼ã‚Œæ—¥[0].push([59+i%4,55+Math.floor(i/4),1]);
                            æœ¨æ¼ã‚Œæ—¥[0].push([63+i%4,55+Math.floor(i/4),1]);
                            æœ¨æ¼ã‚Œæ—¥[0].push([63+i%4,47+Math.floor(i/4),1]);
                            æœ¨æ¼ã‚Œæ—¥[0].push([67+i%4,49+Math.floor(i/4),1]);

                            æœ¨æ¼ã‚Œæ—¥[0].push([74+i%4,14+Math.floor(i/4),1]);
                            æœ¨æ¼ã‚Œæ—¥[0].push([73+i%4,11+Math.floor(i/4),1]);
                            æœ¨æ¼ã‚Œæ—¥[0].push([23+i%4,80+Math.floor(i/4),1]);
                            æœ¨æ¼ã‚Œæ—¥[0].push([18+i%4,83+Math.floor(i/4),1]);
                            æœ¨æ¼ã‚Œæ—¥[0].push([25+i%4,76+Math.floor(i/4),1]);
                            æœ¨æ¼ã‚Œæ—¥[0].push([95+i%4,86+Math.floor(i/4),1]);
                        }
                        æœ¨æ¼ã‚Œæ—¥[1]=[];
                        for(let i=0;i<16;i++){
                            æœ¨æ¼ã‚Œæ—¥[1].push([50+i%4,100+Math.floor(i/4),0]);
                            æœ¨æ¼ã‚Œæ—¥[1].push([53+i%4,102+Math.floor(i/4),0]);
                            æœ¨æ¼ã‚Œæ—¥[1].push([23+i%4,22+Math.floor(i/4),0]);
                            æœ¨æ¼ã‚Œæ—¥[1].push([33+i%4,25+Math.floor(i/4),0]);
                            æœ¨æ¼ã‚Œæ—¥[1].push([83+i%4,52+Math.floor(i/4),0]);
                            æœ¨æ¼ã‚Œæ—¥[1].push([84+i%4,53+Math.floor(i/4),0]);
                            æœ¨æ¼ã‚Œæ—¥[1].push([87+i%4,48+Math.floor(i/4),0]);
                            æœ¨æ¼ã‚Œæ—¥[1].push([94+i%4,13+Math.floor(i/4),0]);
                            æœ¨æ¼ã‚Œæ—¥[1].push([12+i%4,98+Math.floor(i/4),0]);
                            æœ¨æ¼ã‚Œæ—¥[1].push([16+i%4,96+Math.floor(i/4),0]);
                            æœ¨æ¼ã‚Œæ—¥[1].push([7+i%4,89+Math.floor(i/4),0]);

                            æœ¨æ¼ã‚Œæ—¥[1].push([54+i%4,24+Math.floor(i/4),1]);
                            æœ¨æ¼ã‚Œæ—¥[1].push([77+i%4,21+Math.floor(i/4),1]);
                            æœ¨æ¼ã‚Œæ—¥[1].push([73+i%4,60+Math.floor(i/4),1]);
                            æœ¨æ¼ã‚Œæ—¥[1].push([88+i%4,63+Math.floor(i/4),1]);
                            æœ¨æ¼ã‚Œæ—¥[1].push([35+i%4,86+Math.floor(i/4),1]);
                            æœ¨æ¼ã‚Œæ—¥[1].push([75+i%4,26+Math.floor(i/4),1]);

                            æœ¨æ¼ã‚Œæ—¥[1].push([90+i%4,89+Math.floor(i/4),0]);
                            æœ¨æ¼ã‚Œæ—¥[1].push([94+i%4,89+Math.floor(i/4),0]);
                            æœ¨æ¼ã‚Œæ—¥[1].push([98+i%4,89+Math.floor(i/4),0]);
                            æœ¨æ¼ã‚Œæ—¥[1].push([94+i%4,93+Math.floor(i/4),0]);
                            æœ¨æ¼ã‚Œæ—¥[1].push([96+i%4,85+Math.floor(i/4),0]);

                            æœ¨æ¼ã‚Œæ—¥[1].push([94+i%4,84+Math.floor(i/4),1]);
                            æœ¨æ¼ã‚Œæ—¥[1].push([90+i%4,84+Math.floor(i/4),1]);
                            æœ¨æ¼ã‚Œæ—¥[1].push([98+i%4,84+Math.floor(i/4),1]);
                            æœ¨æ¼ã‚Œæ—¥[1].push([93+i%4,80+Math.floor(i/4),1]);
                            æœ¨æ¼ã‚Œæ—¥[1].push([97+i%4,80+Math.floor(i/4),1]);

                            æœ¨æ¼ã‚Œæ—¥[1].push([93+i%4,90+Math.floor(i/4),1]);
                        }
                        é›²=[];
                        for(let i=0;i<5;i++){
                            é›².push([Math.random()*300+334,Math.random()*330,Math.random()+0.5]);
                        }
                        
                        
                        stage_x=0;
                        stage_y=0;
                        syuukun_x=2;
                        syuukun_y=2;
                        syuukun_move=[0,0];
                        syuukun_muki=0;
                    }else if(mini_stage==1){

                        
                    }else if(mini_stage==2){
                        teki_deck=[];
                        teki_yamahuda=[];
                        teki_tehuda=[];
                        teki_ba=["","","","",""];
                        death_teki_ba=["","","","",""];
                        teki_haka=[];
                        
                        deck_initialize(teki_deck_list,teki_deck,teki_yamahuda);

                        
                        my_now_pull=my_deck_pull;//å ´åˆã«ã‚ˆã£ã¦ã¯ã“ã“ã§å¢—ã‚„ã—ã¦ã‚‚ã„ã„ã¨ã€ã§ã‚†ã£ã¡ã¯æ€ã†ã‚ˆ
                        //ãƒ‰ãƒ­ãƒ¼ã¯ã•ã›ãªã„ã‚“ã§ã™ã‹ï¼Ÿâ†’ã¯ã„ã§ãã¾ã›ã‚“ã€‚è‹¦ã—ã‚“ã§ãã ã•ã„
                        for(let i=0;i<5;i++){//æ”»æ’ƒå›æ•°ã®å›å¾©
                            if(my_ba[i]!=""){
                                if(my_ba[i].state.indexOf("ä¸‰å›æ”»æ’ƒ")!=-1){
                                    my_ba[i].can_ATK=3;
                                }else if(my_ba[i].state.indexOf("äºŒå›æ”»æ’ƒ")!=-1){
                                    my_ba[i].can_ATK=2;
                                }else{
                                    my_ba[i].can_ATK=1;
                                }
                            }
                        }

                        next_phase="æˆ¦é—˜";

                        cursor=16;
                        cursor2=0;
                        duel_phase="è‡ªç”±";
                        aite_phase=0;//ç›¸æ‰‹ã®ã‚¿ãƒ¼ãƒ³ã«å‹•ã‹ã—ãŸã„ã€‚
                       
                        aite_delay=0;//ãŠå‰é«˜é€Ÿã§å‹•ãã™ãï¼

                        my_kougeki_sum=0;//AIç”¨
                        teki_kougeki_sum=0;//é™å‚ã«ã‚‚ä½¿ã£ã¦ã‚‹

                        zuba=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]//zuba64ã‚’è¡¨ç¤ºã™ã‚‹ã‚¿ã‚¤ãƒãƒ¼
                        yamahuda_damage=[0,0,0,0];//å·¦ãŒä¿ºã¸ã®ãƒ€ãƒ¡ãƒ¼ã‚¸ã§ã€å³ãŒç›¸æ‰‹ã¸ã®ãƒ€ãƒ¡ãƒ¼ã‚¸æå†™
                        
                        get_card="";
                        new_card=0;
                        ç›¸æ‰‹ã®é™å‚=0;
                    }

                    ctx.save();
                    ctx.scale(9,9);
                    ctx.imageSmoothingEnabled = false;//ç”»åƒã‚’æ‹¡å¤§ã—ã¦ã‚‚ã¼ã‚„ã‘ãªã„ï¼ãˆã‚‰ã„ãï½

                    ctx.fillStyle="rgb(0,30,5)";
                    ctx.fillRect(0,0,1000,1000);
                    
                    for(let i=0;i<5;i++){//ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’æã“ã†
                        for(let j=0;j<5;j++){
                            if(mori_stage[stage_x][stage_y][i][j]==1){
                                ctx.drawImage(morikabe_1[(i+j)%2],i*20+6,j*20+10);
                            }else if(mori_stage[stage_x][stage_y][i][j]==6){
                                ctx.drawImage(sasori_hujou_20[Math.floor(time%30/20)],i*20+6,j*20+10);
                            }
                        }
                    }

                    if(syuukun_muki==0){
                        if(syuukun_move[0]!=0){
                            ctx.drawImage(syuukun_20[(time)%4],syuukun_x*20+6+syuukun_move[0],syuukun_y*20+10+syuukun_move[1]-(time)%2);
                        }else if(syuukun_move[1]!=0){
                            ctx.drawImage(syuukun_20[(time)%4],syuukun_x*20+6+syuukun_move[0]-(time)%2,syuukun_y*20+10+syuukun_move[1]);
                        }else{
                            ctx.drawImage(syuukun_20[1],syuukun_x*20+6+syuukun_move[0],syuukun_y*20+10+syuukun_move[1]);
                        }
                    }else{
                        ctx.scale(-1,1);
                        if(syuukun_move[0]!=0){
                            ctx.drawImage(syuukun_20[(time)%4],-syuukun_x*20-26-syuukun_move[0],syuukun_y*20+10+syuukun_move[1]-(time)%2);
                        }else if(syuukun_move[1]!=0){
                            ctx.drawImage(syuukun_20[(time)%4],-syuukun_x*20-26-syuukun_move[0]-(time)%2,syuukun_y*20+10+syuukun_move[1]);
                        }else{
                            ctx.drawImage(syuukun_20[1],-syuukun_x*20-26-syuukun_move[0],syuukun_y*20+10+syuukun_move[1]);
                        }
                    }
                    ctx.restore();

                    if(syuukun_move[0]>0){
                        syuukun_move[0]-=4;
                        syuukun_muki=0;
                    }else if(syuukun_move[0]<0){
                        syuukun_move[0]+=4;
                        syuukun_muki=1;
                    }
                    if(syuukun_move[1]>0){
                        syuukun_move[1]-=4;
                    }else if(syuukun_move[1]<0){
                        syuukun_move[1]+=4;
                    }

                    ctx.fillStyle="rgb(255,255,255,0.1)";
                    ctx.fillRect(0,0,1000,1000);//ã¼ã‚“ã‚„ã‚Šã¨ã—ãŸå…‰
                    ctx.fillStyle="rgb(0,0,0,0.5)";
                    ctx.fillRect(0,0,1000,1000);//ã¼ã‚“ã‚„ã‚Šã¨ã—ãŸå½±

                    ctx.drawImage(hujounomori_kakoi,0,0);

                    for(let i=0;i<æœ¨æ¼ã‚Œæ—¥[(stage_x+stage_y)%2].length;i++){
                        if(æœ¨æ¼ã‚Œæ—¥[(stage_x+stage_y)%2][i][2]==0){
                            å…‰(æœ¨æ¼ã‚Œæ—¥[(stage_x+stage_y)%2][i][0]+Math.floor(Math.abs(time%300-150)/51),æœ¨æ¼ã‚Œæ—¥[(stage_x+stage_y)%2][i][1],9);
                        }else if(æœ¨æ¼ã‚Œæ—¥[(stage_x+stage_y)%2][i][2]==1){
                            å…‰(æœ¨æ¼ã‚Œæ—¥[(stage_x+stage_y)%2][i][0],æœ¨æ¼ã‚Œæ—¥[(stage_x+stage_y)%2][i][1]+Math.floor(Math.abs((time+50)%400-200)/101),9);
                        }
                    }

                    ctx.save();
                    ctx.scale(3,3);
                    for(let i=0;i<5;i++){
                        ctx.drawImage(kumo_mori[i],é›²[i][0],é›²[i][1]);
                        é›²[i][0]-=é›²[i][2];
                        if(é›²[i][0]<-200){
                            é›²[i]=[Math.random()*300+334,Math.random()*330,Math.random()+0.5];
                        }
                    }
                    
                    ctx.restore();



                    

                    ctx.fillStyle="rgb(0,0,0)";//ä¸Šã®ã»ã†ã‚’æã„ã¦ã¾ã™ã€‚
                    ctx.fillRect(105,5,440,90);
                    ctx.fillStyle="rgb(255,255,255)";
                    ctx.fillRect(110,10,430,80);
                    ctx.fillStyle="rgb(150,200,255)";
                    ctx.fillRect(388,12,150,76);
                    ctx.font = "50px  'ï¼­ï¼³ ã‚´ã‚·ãƒƒã‚¯'";//ãƒ•ã‚©ãƒ³ãƒˆè¨­å®šã€‚å·¦ã®ãƒ•ã‚©ãƒ³ãƒˆãŒãªã„ã¨å³ã®ãƒ•ã‚©ãƒ³ãƒˆã‚’é©ç”¨ã™ã‚‹ã‚‰ã—ã„ã€‚
                    ctx.fillStyle="rgb(0,0,0)";
                    ctx.drawImage(yamahuda,110,20);
                    ctx.fillText(my_yamahuda.length, 174, 70,70);
                    ctx.drawImage(hakaba,250,20);
                    ctx.fillText(my_haka.length, 308, 70,70);
                    ctx.font = "32px  'ï¼­ï¼³ ã‚´ã‚·ãƒƒã‚¯'";//ãƒ•ã‚©ãƒ³ãƒˆè¨­å®šã€‚å·¦ã®ãƒ•ã‚©ãƒ³ãƒˆãŒãªã„ã¨å³ã®ãƒ•ã‚©ãƒ³ãƒˆã‚’é©ç”¨ã™ã‚‹ã‚‰ã—ã„ã€‚
                    ctx.fillStyle="rgb(0,0,0)";
                    if(my_tehuda.length>0){
                        ctx.drawImage(tehuda32,390,14);
                        ctx.fillText(my_tehuda.length, 425, 41);
                    }
                    if(ba_mons_num(my_ba)>0){
                        ctx.drawImage(ponya_32,460,14);
                        ctx.fillText(ba_mons_num(my_ba), 495, 41);
                    }
                    tokusyu_hyouji(390,46);

                    
                }

                function æ‰€æŒã‚«ãƒ¼ãƒ‰ã®ã‚»ãƒ¼ãƒ–(){
                    save_æ‰€æŒã‚«ãƒ¼ãƒ‰=[];
                    for(let i=0;i<æ‰€æŒã‚«ãƒ¼ãƒ‰.length;i++){
                        save_æ‰€æŒã‚«ãƒ¼ãƒ‰[i]=[æ‰€æŒã‚«ãƒ¼ãƒ‰[i][0].name,æ‰€æŒã‚«ãƒ¼ãƒ‰[i][1]];
                    }
                    localStorage.setItem('æ‰€æŒã‚«ãƒ¼ãƒ‰',JSON.stringify(save_æ‰€æŒã‚«ãƒ¼ãƒ‰));//ã‚²ãƒ¼ãƒ ãƒ‡ãƒ¼ã‚¿ã‚»ãƒ¼ãƒ–
                }
                
                function æ‰€æŒã‚«ãƒ¼ãƒ‰ã®ãƒ­ãƒ¼ãƒ‰(){
                    æ‰€æŒã‚«ãƒ¼ãƒ‰=localStorage.getItem('æ‰€æŒã‚«ãƒ¼ãƒ‰');//ã‚²ãƒ¼ãƒ ãƒ‡ãƒ¼ã‚¿ãƒ­ãƒ¼ãƒ‰
                    æ‰€æŒã‚«ãƒ¼ãƒ‰=JSON.parse(æ‰€æŒã‚«ãƒ¼ãƒ‰);
                    for(let i=0;i<æ‰€æŒã‚«ãƒ¼ãƒ‰.length;i++){
                        for(let j=0;j<all_card.length;j++){
                            if(all_card[j].name==æ‰€æŒã‚«ãƒ¼ãƒ‰[i][0]){//å…¨ã‚«ãƒ¼ãƒ‰ã‹ã‚‰åå‰ã‚’æ¤œç´¢ã—ã¦ã‚«ãƒ¼ãƒ‰ã«ç½®ãæ›ãˆã‚‹
                                æ‰€æŒã‚«ãƒ¼ãƒ‰[i][0]=all_card[j];
                                break;
                            }
                        }
                    }
                }

                function ãƒ‡ãƒƒã‚­ã®ã‚»ãƒ¼ãƒ–(){
                    save_deck_list={card_list:[[]],ACE:[],TOP_ACE:[]};
                    if(deck_list.card_list.length!=0){
                        for(let i=0;i<deck_list.card_list.length;i++){
                            save_deck_list.card_list[i]=[deck_list.card_list[i][0].name,deck_list.card_list[i][1]];
                        }
                        for(let i=0;i<deck_list.ACE.length;i++){
                            save_deck_list.ACE[i]=deck_list.ACE[i].name;
                        }
                        for(let i=0;i<deck_list.TOP_ACE.length;i++){
                            save_deck_list.TOP_ACE[i]=deck_list.TOP_ACE[i].name;
                        }
                    }
                    
                    localStorage.setItem('deck_list',JSON.stringify(save_deck_list));//ã‚²ãƒ¼ãƒ ãƒ‡ãƒ¼ã‚¿ã‚»ãƒ¼ãƒ–
                }

                function ãƒ‡ãƒƒã‚­ã®ãƒ­ãƒ¼ãƒ‰(){
                    deck_list=localStorage.getItem('deck_list');//ã‚²ãƒ¼ãƒ ãƒ‡ãƒ¼ã‚¿ãƒ­ãƒ¼ãƒ‰
                    deck_list=JSON.parse(deck_list);
                    for(let i=0;i<deck_list.card_list.length;i++){
                        for(let j=0;j<all_card.length;j++){
                            if(all_card[j].name==deck_list.card_list[i][0]){//å…¨ã‚«ãƒ¼ãƒ‰ã‹ã‚‰åå‰ã‚’æ¤œç´¢ã—ã¦ã‚«ãƒ¼ãƒ‰ã«ç½®ãæ›ãˆã‚‹
                                deck_list.card_list[i][0]=all_card[j];
                                break;
                            }
                        }
                    }
                    for(let i=0;i<deck_list.ACE.length;i++){
                        for(let j=0;j<deck_list.card_list.length;j++){
                            if(deck_list.card_list[j][0].name==deck_list.ACE[i]){//å…¨ã‚«ãƒ¼ãƒ‰ã‹ã‚‰åå‰ã‚’æ¤œç´¢ã—ã¦ã‚«ãƒ¼ãƒ‰ã«ç½®ãæ›ãˆã‚‹
                                deck_list.ACE[i]=deck_list.card_list[j][0];
                                break;
                            }
                        }
                    }
                    for(let i=0;i<deck_list.TOP_ACE.length;i++){
                        for(let j=0;j<deck_list.card_list.length;j++){
                            if(deck_list.card_list[j][0].name==deck_list.TOP_ACE[i]){//å…¨ã‚«ãƒ¼ãƒ‰ã‹ã‚‰åå‰ã‚’æ¤œç´¢ã—ã¦ã‚«ãƒ¼ãƒ‰ã«ç½®ãæ›ãˆã‚‹
                                deck_list.TOP_ACE[i]=deck_list.card_list[j][0];
                                break;
                            }
                        }
                    }
                }
                //ä¿å­˜ãƒ‡ãƒƒã‚­=[{card_list:[***,***,***],ACE:[1,2,3],TOP_ACE:[5]},{card_list:[],ACE:[],TOP_ACE:[]},{card_list:[],ACE:[],TOP_ACE:[]},{card_list:[],ACE:[],TOP_ACE:[]},{card_list:[],ACE:[],TOP_ACE:[]}];
                function ä¿å­˜ãƒ‡ãƒƒã‚­ã®ä¿å­˜(){
                    let ä¿å­˜_å¤‰æ›=[{card_list:[],ACE:[],TOP_ACE:[]},{card_list:[],ACE:[],TOP_ACE:[]},{card_list:[],ACE:[],TOP_ACE:[]},{card_list:[],ACE:[],TOP_ACE:[]},{card_list:[],ACE:[],TOP_ACE:[]}];;
                    for(let i=0;i<5;i++){
                        for(let j=0;j<ä¿å­˜ãƒ‡ãƒƒã‚­[i].card_list.length;j++){
                            ä¿å­˜_å¤‰æ›[i].card_list[j]= ä¿å­˜ãƒ‡ãƒƒã‚­[i].card_list[j].name;
                        }
                        ä¿å­˜_å¤‰æ›[i].ACE=[...ä¿å­˜ãƒ‡ãƒƒã‚­[i].ACE];
                        ä¿å­˜_å¤‰æ›[i].TOP_ACE=[...ä¿å­˜ãƒ‡ãƒƒã‚­[i].TOP_ACE];
                    }
                    localStorage.setItem('ä¿å­˜ãƒ‡ãƒƒã‚­',JSON.stringify(ä¿å­˜_å¤‰æ›));
                }
                function ä¿å­˜ãƒ‡ãƒƒã‚­ã®èª­ã¿è¾¼ã¿(){
                    ä¿å­˜ãƒ‡ãƒƒã‚­=localStorage.getItem('ä¿å­˜ãƒ‡ãƒƒã‚­');//ã‚²ãƒ¼ãƒ ãƒ‡ãƒ¼ã‚¿ãƒ­ãƒ¼ãƒ‰
                    ä¿å­˜ãƒ‡ãƒƒã‚­=JSON.parse(ä¿å­˜ãƒ‡ãƒƒã‚­);
                    for(let i=0;i<5;i++){
                        for(let j=0;j<ä¿å­˜ãƒ‡ãƒƒã‚­[i].card_list.length;j++){
                            for(let k=0;k<all_card.length;k++){
                                if(all_card[k].name==ä¿å­˜ãƒ‡ãƒƒã‚­[i].card_list[j]){//å…¨ã‚«ãƒ¼ãƒ‰ã‹ã‚‰åå‰ã‚’æ¤œç´¢ã—ã¦ã‚«ãƒ¼ãƒ‰ã«ç½®ãæ›ãˆã‚‹
                                    ä¿å­˜ãƒ‡ãƒƒã‚­[i].card_list[j]=all_card[k];
                                    break;
                                }
                            }
                            //åŒã˜ã‚«ãƒ¼ãƒ‰é€£ç¶šã—ã¦ã‚‹ã ã‚ã†ã‹ã‚‰è³¢ã„å‡¦ç†ã‚’æãã“ã¨ã‚‚ã§ãã‚‹ã‘ã©ã€ãƒ­ãƒ¼ãƒ‰æ™‚ã«ä¸€å›å‹•ãã ã‘ã ã—ã€ã„ã£ã‹ï¼ˆç¬‘ï¼‰
                        }
                    }
                }
                function å…¨ãƒ‡ãƒ¼ã‚¿æ¶ˆå»(){
                    localStorage.removeItem("æ‰€æŒã‚«ãƒ¼ãƒ‰");
                    localStorage.removeItem("deck_list");
                    localStorage.removeItem('ä¿å­˜ãƒ‡ãƒƒã‚­');
                    localStorage.removeItem('MAX_STAGE');
                    localStorage.removeItem('MAX_ACE');
                    localStorage.removeItem('MAX_TOP_ACE');
                    localStorage.removeItem('ãŠé‡‘');
                    localStorage.removeItem('MAX_deck');
                    localStorage.removeItem('my_pull');
                    localStorage.removeItem('my_deck_pull');
                    
                }

                function ãƒ‡ãƒƒã‚­ã®ç”»åƒãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰(){
                    ctx.fillStyle="rgb(50,50,80)";
                    ctx.fillRect(0,0,1000,1000);
                    ctx.fillStyle="rgb(255,255,255)";
                    ctx.fillRect(5,5,990,990);
                    ctx.fillStyle="rgb(50,50,80)";
                    ctx.fillRect(10,10,980,980);

                    ãƒ‡ãƒƒã‚­è¡¨ç¤º(deck_list,15,15,970,970);
                    var ä»Š= new Date();
                    var ä»Š_æ–‡å­—=ä»Š.getDate()+""+ä»Š.getHours()+""+ä»Š.getMinutes()+""+ä»Š.getSeconds();
                    var DL_URL = document.createElement('a');
                    DL_URL.href=cnvs.toDataURL("image/png");
                    DL_URL.download = 'mydeck'+ ä»Š_æ–‡å­—+ '.png';//ãƒ•ã‚¡ã‚¤ãƒ«åæ±ºã‚ã¦ã‚‹
                    DL_URL.click();//å¼·åˆ¶ã‚¯ãƒªãƒƒã‚¯
                }
                document.getElementById('download_button').addEventListener("click", ãƒ‡ãƒƒã‚­ã®ç”»åƒãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰);

                var compare = function (a, b) {//sort()é–¢æ•°ã®å¼•æ•°ã«ã“ã®é–¢æ•°ã‚’æ¸¡ã™ã¨ã€æ•°å­—ã®ã‚½ãƒ¼ãƒˆãŒå¯èƒ½ã«ãªã‚‹ã€‚
                    return a - b
                }
                //ã‚«ãƒ¼ãƒ‰å®šç¾©ãƒ¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ãƒ¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼
                //effectã‚’ä½¿ã†ã¨ãã¯effect()
                //å ´æ‰€æ‚ªããªã„ï¼Ÿâ†’ã ã£ã¦ã‚«ãƒ¼ãƒ‰å†…ã«é–¢æ•°ä½¿ã„ãŸã‹ã£ãŸã‚“ã ã‚‚ã‚“â€¦
                var test_card={name:"ãƒ†ã‚¹ãƒˆã‚«ãƒ¼ãƒ‰",image:test,ATK:1,HP:1,state:["ãƒ¢ãƒ³ã‚¹ã‚¿ãƒ¼","test"],effect_req:function(ã‚¿ã‚¤ãƒŸãƒ³ã‚°){return false;},effect:function(ã‚¿ã‚¤ãƒŸãƒ³ã‚°){},AI:function(ã‚¿ã‚¤ãƒŸãƒ³ã‚°){return true;},text:"ã‚ªã‚¤ãƒ©ã¯ãƒ†ã‚¹ãƒˆã‚«ãƒ¼ãƒ‰ï¼çœŸã£èµ¤ãªèµ¤è‰²ãŒãƒˆãƒ¬ãƒ¼ãƒ‰ãƒãƒ¼ã‚¯ã•ï¼â€¦ã¨ã“ã‚ã§ä¿ºãŒã‚ã¡ã‚ƒãã¡ã‚ƒé•·ã„èª¬æ˜æ–‡ã‚’æŒã£ã¦ãŸã¨ã—ãŸã‚‰ã©ã†ã™ã‚‹ï¼Ÿãã’ã’ã’ã’ã’ã’ã’ã’ã’ã’ã’ã’ã’ã’ã’ã’ã’ã’ã’ã’ã’ã’ã’ã’ã’ã’ã’ã’ã’ã’ã’ã’ã’ã’ã’ã’ã’ã’ã’ã’ã’ã’",text_iro:[]};
                var test_card2={name:"ãƒ†ã‚¹ãƒˆã‚«ãƒ¼ãƒ‰2",image:test_syuukun,ATK:300,HP:400,state:["ãƒ¢ãƒ³ã‚¹ã‚¿ãƒ¼","test"],effect_req:function(ã‚¿ã‚¤ãƒŸãƒ³ã‚°){return false;},effect:function(ã‚¿ã‚¤ãƒŸãƒ³ã‚°){},AI:function(ã‚¿ã‚¤ãƒŸãƒ³ã‚°){return true;},text:"ä¼èª¬ã®ãƒ†ã‚¹ãƒˆã—ã‚…ã†ãã‚“ã€‚ã‚ã€ã¾ã£ã¦åŠè§’æ–‡å­—ã®ãƒ†ã‚¹ãƒˆã—ãŸã„123456789aqswderfï¾ï½²ï¾ï½²ï¾ï½²ï¾„ï¾ï½³ï¾…ï¾ï¾€ï¾ï½²ï¾ï½²ï¾ï½²â€¦ã„ã‘ã‚‹ã˜ã‚ƒã‚“ï¼",text_iro:[[0,1,"rgb(255,0,0)"],[1,1,"rgb(255,255,0)"],[2,1,"rgb(0,255,0)"],[3,1,"rgb(0,255,255)"],[4,1,"rgb(0,0,255)"],[5,1,"rgb(255,0,255)"],[6,1,"rgb(255,0,0)"],[7,1,"rgb(255,255,0)"],[8,1,"rgb(0,255,0)"],[9,1,"rgb(0,255,255)"],[10,1,"rgb(0,0,255)"]]};
                
                var syuukun={name:"ã—ã‚…ã†ãã‚“",image:card_syuukun,ATK:3,HP:10,state:["ãƒ¢ãƒ³ã‚¹ã‚¿ãƒ¼","ã—ã‚…ã†ãã‚“"],effect_req:function(ã‚¿ã‚¤ãƒŸãƒ³ã‚°){return false;},effect:function(ã‚¿ã‚¤ãƒŸãƒ³ã‚°){},AI:function(ã‚¿ã‚¤ãƒŸãƒ³ã‚°){return true;},text:"ã‚«ãƒ¼ãƒ‰ã«åŠ›ã‚’è¾¼ã‚ã‚ï¼",text_iro:[[4,1,"rgb(255,0,0)"]]};
                var hojorobo={name:"è£œåŠ©ãƒ­ãƒœ",image:hojorobo_image,ATK:3,HP:2,state:["ãƒ¢ãƒ³ã‚¹ã‚¿ãƒ¼","æ©Ÿæ¢°"],effect_req:function(ã‚¿ã‚¤ãƒŸãƒ³ã‚°){return false;},effect:function(ã‚¿ã‚¤ãƒŸãƒ³ã‚°){},AI:function(ã‚¿ã‚¤ãƒŸãƒ³ã‚°){return true;},text:"å†’é™ºè€…ã‚’è£œåŠ©ã™ã‚‹ãƒ­ãƒœã€ãƒ›ã‚¸ãƒ§ãƒœã€‚",text_iro:[]};
                var kinkyuujitai5={name:"ç·Šæ€¥äº‹æ…‹â”€ï¼•â”€",image:kinkyuujitai5_image,state:["é­”æ³•","è¶…å±é™º"],effect_req:function(ã‚¿ã‚¤ãƒŸãƒ³ã‚°){
                    if(ã‚¿ã‚¤ãƒŸãƒ³ã‚°=="æ‰‹æœ­ã‹ã‚‰"){
                        for(let i=0;i<5;i++){//ç ´å£Šå¯èƒ½å¯¾è±¡ãŒã„ã‚‹ãªã‚‰ç™ºå‹•å¯èƒ½ã€‚
                            if(my_ba[i]!="" && my_ba[i].state.indexOf("TOP_ACE")==-1 && my_ba[i].state.indexOf("ACE")==-1){
                                return true; 
                            }
                            if(teki_ba[i]!="" && teki_ba[i].state.indexOf("TOP_ACE")==-1 && teki_ba[i].state.indexOf("ACE")==-1){
                                return true; 
                            }
                        }
                        return false;  
                    }else{
                        return false;  
                    }
                      
                },effect:function(ã‚¿ã‚¤ãƒŸãƒ³ã‚°){
                    if(ã‚¿ã‚¤ãƒŸãƒ³ã‚°=="æ‰‹æœ­ã‹ã‚‰"){
                        for(let i=0;i<5;i++){
                            if(my_ba[i]!="" && my_ba[i].state.indexOf("TOP_ACE")==-1 && my_ba[i].state.indexOf("ACE")==-1){
                                my_ba[i]=death_card(my_ba[i],my_haka,i);
                            }
                            if(teki_ba[i]!="" && teki_ba[i].state.indexOf("TOP_ACE")==-1 && teki_ba[i].state.indexOf("ACE")==-1){
                                teki_ba[i]=death_card(teki_ba[i],teki_haka,i);
                            }
                        }
                    }
                },AI:function(ã‚¿ã‚¤ãƒŸãƒ³ã‚°){
                    if(ã‚¿ã‚¤ãƒŸãƒ³ã‚°=="æ‰‹æœ­ã‹ã‚‰"){
                        my_kougeki_sum=0;
                        teki_kougeki_sum=0;
                        for(let i=0;i<5;i++){
                            if(my_ba[i]!="" && my_ba[i].state.indexOf("ACE")==-1 && my_ba[i].state.indexOf("TOP_ACE")==-1){//zakoãƒ¢ãƒ³ã‚¹ã‚¿ãƒ¼ã ã­
                                my_kougeki_sum+=my_ba[i].ATK;
                            }
                            if(teki_ba[i]!="" && teki_ba[i].state.indexOf("TOP_ACE")==-1 && teki_ba[i].state.indexOf("ACE")==-1){//zakoãƒ¢ãƒ³ã‚¹ã‚¿ãƒ¼ã ã­
                                teki_kougeki_sum+=teki_ba[i].ATK;
                            }
                        }
                        if(my_kougeki_sum>teki_kougeki_sum){//ç™ºå‹•æ¡ä»¶ã–ã¤ã™ãã‚“ï¼Ÿ
                            return true;
                        }
                        return false; 
                    }
                },text:"å…¨ãƒ¢ãƒ³ã‚¹ã‚¿ãƒ¼ç ´å£Šã€‚(TOP_ACE ACEã‚’é™¤ã)ã€Œäº‹æ•…ç™ºç”Ÿã€ç·Šæ€¥äº‹æ…‹â”€ï¼•â”€ã€€æœ¬ã‚¨ãƒªã‚¢ã¯å°é–ã•ã‚Œã¾ã™ã€",text_iro:[[10,7,"rgb(255,0,0)"],[18,3,"rgb(200,200,0)"]]};
                var ryuunoitigeki={name:"é¾ã®ä¸€æ’ƒ",image:ryuunoitigeki_img,state:["é­”æ³•","æ•µé¸æŠ"],effect_req:function(ã‚¿ã‚¤ãƒŸãƒ³ã‚°){
                    if(ã‚¿ã‚¤ãƒŸãƒ³ã‚°=="æ‰‹æœ­ã‹ã‚‰"){
                        if(duel_phase!="ç›¸æ‰‹"){
                            for(let i=0;i<5;i++){//ç ´å£Šå¯èƒ½å¯¾è±¡ãŒã„ã‚‹ãªã‚‰ç™ºå‹•å¯èƒ½ã€‚
                                if(teki_ba[i]!="" && teki_ba[i].state.indexOf("TOP_ACE")==-1 && teki_ba[i].state.indexOf("ACE")==-1){
                                    return true; 
                                }
                            }
                        }else{
                            for(let i=0;i<5;i++){//ç ´å£Šå¯èƒ½å¯¾è±¡ãŒã„ã‚‹ãªã‚‰ç™ºå‹•å¯èƒ½ã€‚
                                if(my_ba[i]!="" && my_ba[i].state.indexOf("TOP_ACE")==-1 && my_ba[i].state.indexOf("ACE")==-1){
                                    return true; 
                                }
                            }
                        }
                        return false;  
                    }else{
                        return false;  
                    }  
                },effect:function(ã‚¿ã‚¤ãƒŸãƒ³ã‚°){
                    if(ã‚¿ã‚¤ãƒŸãƒ³ã‚°=="æ‰‹æœ­ã‹ã‚‰"){
                        if(duel_phase!="ç›¸æ‰‹"){
                            if(teki_ba[cursor2]!="" && teki_ba[cursor2].state.indexOf("TOP_ACE")==-1 && teki_ba[cursor2].state.indexOf("ACE")==-1){
                                teki_ba[cursor2]=death_card(teki_ba[cursor2],teki_haka,cursor2);
                                return true; //é¸æŠç³»é­”æ³•ã¯æ­£ã—ãå‹•ã„ãŸã‚‰trueã‚’è¿”ã™ã“ã¨ï¼ 
                            }
                            return false; 
                        }else{
                            var ä¸€ç•ªå¼·ã„ã‚«ãƒ¼ãƒ‰ã®æ•°å€¤=0;
                            for(let i=0;i<5;i++){
                                if(my_ba[i]!="" && my_ba[i].state.indexOf("TOP_ACE")==-1 && my_ba[i].state.indexOf("ACE")==-1){//ç ´å£Šå¯èƒ½å¯¾è±¡
                                    if(ä¸€ç•ªå¼·ã„ã‚«ãƒ¼ãƒ‰ã®æ•°å€¤<my_ba[i].HP*my_ba[i].ATK){
                                        ä¸€ç•ªå¼·ã„ã‚«ãƒ¼ãƒ‰ã®æ•°å€¤=my_ba[i].HP*my_ba[i].ATK;
                                        cursor2=i;
                                    } 
                                }
                            }
                            my_ba[cursor2]=death_card(my_ba[cursor2],my_haka,cursor2);
                        }
                        
                    }
                },AI:function(ã‚¿ã‚¤ãƒŸãƒ³ã‚°){
                    return true;//æ®ºã›ã‚‹ãƒ¤ãƒ„ãŒã„ã‚‹ãªã‚‰ã©ã‚“ã©ã‚“ä½¿ã£ã¦ã„ã‘ï¼
                },text:"ç›¸æ‰‹ãƒ¢ãƒ³ã‚¹ã‚¿ãƒ¼ã‚’1ä½“ç ´å£Šï¼(TOP_ACE ACEã‚’é™¤ã)",text_iro:[[14,7,"rgb(255,0,0)"],[22,3,"rgb(200,200,0)"]]};
                var powerup3={name:"ãƒ‘ãƒ¯ãƒ¼ã‚¢ãƒƒãƒ—ï¼“",image:powerup3_img,state:["é­”æ³•","å‘³æ–¹é¸æŠ","æ”»æ’ƒä¸Šæ˜‡"],effect_req:function(ã‚¿ã‚¤ãƒŸãƒ³ã‚°){
                    if(ã‚¿ã‚¤ãƒŸãƒ³ã‚°=="æ‰‹æœ­ã‹ã‚‰"){
                        if(duel_phase!="ç›¸æ‰‹"){
                            for(let i=0;i<5;i++){//å‘³æ–¹ãŒã„ã‚‹ãªã‚‰ç™ºå‹•å¯èƒ½ã€‚
                                if(my_ba[i]!=""){
                                    return true; 
                                }
                            }
                        }else{
                            for(let i=0;i<5;i++){//å‘³æ–¹ãŒã„ã‚‹ãªã‚‰ç™ºå‹•å¯èƒ½ã€‚
                                if(teki_ba[i]!=""){
                                    return true; 
                                }
                            }
                        }
                        return false;  
                    }else{
                        return false;  
                    }  
                },effect:function(ã‚¿ã‚¤ãƒŸãƒ³ã‚°){
                    if(ã‚¿ã‚¤ãƒŸãƒ³ã‚°=="æ‰‹æœ­ã‹ã‚‰"){
                        if(duel_phase!="ç›¸æ‰‹"){
                            if(my_ba[cursor2]!=""){
                                my_ba[cursor2].ATK+=3;
                                return true; //é¸æŠç³»é­”æ³•ã¯æ­£ã—ãå‹•ã„ãŸã‚‰trueã‚’è¿”ã™ã“ã¨ï¼ 
                            }
                            return false; 
                        }else{
                            var ä¸€ç•ªå…ƒæ°—ãªã‚«ãƒ¼ãƒ‰ã®æ•°å€¤=0;
                            for(let i=0;i<5;i++){
                                if(teki_ba[i]!=""){
                                    if(ä¸€ç•ªå…ƒæ°—ãªã‚«ãƒ¼ãƒ‰ã®æ•°å€¤<teki_ba[i].HP){
                                        ä¸€ç•ªå…ƒæ°—ãªã‚«ãƒ¼ãƒ‰ã®æ•°å€¤=teki_ba[i].HP;
                                        cursor2=i;
                                    } 
                                }
                            }
                            teki_ba[cursor2].ATK+=3;
                        }
                        
                    }
                },AI:function(ã‚¿ã‚¤ãƒŸãƒ³ã‚°){
                    return true;//ä½“åŠ›å¤šã„ã‚­ãƒ£ãƒ©ãŒã„ãªã„ã¨ä½¿ã‚ãªã„ã£ã¦ã»ã†ãŒè³¢ã„æ°—ã‚‚ã™ã‚‹ãŒã€æ°—ã«ã™ã‚‹ãªï¼
                },text:"å‘³æ–¹ãƒ¢ãƒ³ã‚¹ã‚¿ãƒ¼1ä½“ã®æ”»æ’ƒåŠ›+3ï¼ã“ã‚Œã§å›ã‚‚ãƒ¢ãƒ†ãƒ¢ãƒ†ã ï¼",text_iro:[]};
                var HPup5={name:"ä½“åŠ›ã‚¢ãƒƒãƒ—5",image:HPup5_img,state:["é­”æ³•","å‘³æ–¹é¸æŠ","ä½“åŠ›ä¸Šæ˜‡"],effect_req:function(ã‚¿ã‚¤ãƒŸãƒ³ã‚°){
                    if(ã‚¿ã‚¤ãƒŸãƒ³ã‚°=="æ‰‹æœ­ã‹ã‚‰"){
                        if(duel_phase!="ç›¸æ‰‹"){
                            for(let i=0;i<5;i++){//å‘³æ–¹ãŒã„ã‚‹ãªã‚‰ç™ºå‹•å¯èƒ½ã€‚
                                if(my_ba[i]!=""){
                                    return true; 
                                }
                            }
                        }else{
                            for(let i=0;i<5;i++){//å‘³æ–¹ãŒã„ã‚‹ãªã‚‰ç™ºå‹•å¯èƒ½ã€‚
                                if(teki_ba[i]!=""){
                                    return true; 
                                }
                            }
                        }
                        return false;  
                    }else{
                        return false;  
                    }  
                },effect:function(ã‚¿ã‚¤ãƒŸãƒ³ã‚°){
                    if(ã‚¿ã‚¤ãƒŸãƒ³ã‚°=="æ‰‹æœ­ã‹ã‚‰"){
                        if(duel_phase!="ç›¸æ‰‹"){
                            if(my_ba[cursor2]!=""){
                                my_ba[cursor2].HP+=5;
                                return true; //é¸æŠç³»é­”æ³•ã¯æ­£ã—ãå‹•ã„ãŸã‚‰trueã‚’è¿”ã™ã“ã¨ï¼ 
                            }
                            return false; 
                        }else{
                            var ä¸€ç•ªå…ƒæ°—ãªã‚«ãƒ¼ãƒ‰ã®æ•°å€¤=-1;
                            for(let i=0;i<5;i++){
                                if(teki_ba[i]!=""){
                                    if(ä¸€ç•ªå…ƒæ°—ãªã‚«ãƒ¼ãƒ‰ã®æ•°å€¤<teki_ba[i].ATK){
                                        ä¸€ç•ªå…ƒæ°—ãªã‚«ãƒ¼ãƒ‰ã®æ•°å€¤=teki_ba[i].ATK;
                                        cursor2=i;
                                    } 
                                }
                            }
                            teki_ba[cursor2].HP+=5;
                        }
                        
                    }
                },AI:function(ã‚¿ã‚¤ãƒŸãƒ³ã‚°){
                    return true;//å¼·ã„ã‚­ãƒ£ãƒ©ãŒã„ãªã„ã¨ä½¿ã‚ãªã„ã£ã¦ã»ã†ãŒè³¢ã„æ°—ã‚‚ã™ã‚‹ãŒã€æ°—ã«ã™ã‚‹ãªï¼
                },text:"å‘³æ–¹ãƒ¢ãƒ³ã‚¹ã‚¿ãƒ¼1ä½“ã®ä½“åŠ›+5ï¼ãã‚‡ã†ã‚‚ã’ã‚“ãã ï¼",text_iro:[]};

                var ponya={name:"ã½ã«ã‚ƒ",image:ponya_image,ATK:2,HP:1,state:["ãƒ¢ãƒ³ã‚¹ã‚¿ãƒ¼","ã½ã«ã‚ƒ"],effect_req:function(ã‚¿ã‚¤ãƒŸãƒ³ã‚°){return false;},effect:function(ã‚¿ã‚¤ãƒŸãƒ³ã‚°){},AI:function(ã‚¿ã‚¤ãƒŸãƒ³ã‚°){return true;},text:"ã½ã«ã‚ƒã€‚ãã‚‡ã†ã‚‚è‰åŸã‚’æ­©ã",text_iro:[]};
                var ponya_ace={name:"ã½ã«ã‚ƒã‚¨ãƒ¼ã‚¹",image:ponya_ace_image,ATK:3,HP:5,state:["ãƒ¢ãƒ³ã‚¹ã‚¿ãƒ¼","ã½ã«ã‚ƒ"],effect_req:function(ã‚¿ã‚¤ãƒŸãƒ³ã‚°){return false;},effect:function(ã‚¿ã‚¤ãƒŸãƒ³ã‚°){},AI:function(ã‚¿ã‚¤ãƒŸãƒ³ã‚°){return true;},text:"ã½ã«ã‚ƒã‚¨ãƒ¼ã‚¹ã€‚ä»Šæ—¥ã®ãŠèŠ±ã¯é»„è‰²â™ª",text_iro:[]};
                var yakuso_3={name:"è–¬è‰3",image:yakuso_3_image,state:["é­”æ³•","å‘³æ–¹é¸æŠ","ä½“åŠ›ä¸Šæ˜‡"],effect_req:function(ã‚¿ã‚¤ãƒŸãƒ³ã‚°){
                    if(ã‚¿ã‚¤ãƒŸãƒ³ã‚°=="æ‰‹æœ­ã‹ã‚‰"){
                        if(duel_phase!="ç›¸æ‰‹"){for(let i=0;i<5;i++){if(my_ba[i]!=""){return true;}}
                        }else{ for(let i=0;i<5;i++){if(teki_ba[i]!=""){return true; }}
                        }
                        return false;  
                    }else{
                        return false;  
                    }  
                },effect:function(ã‚¿ã‚¤ãƒŸãƒ³ã‚°){
                    if(ã‚¿ã‚¤ãƒŸãƒ³ã‚°=="æ‰‹æœ­ã‹ã‚‰"){
                        if(duel_phase!="ç›¸æ‰‹"){if(my_ba[cursor2]!=""){my_ba[cursor2].HP+=3;return true;}//é¸æŠç³»é­”æ³•ã¯æ­£ã—ãå‹•ã„ãŸã‚‰trueã‚’è¿”ã™ã“ã¨ï¼ 
                            return false; 
                        }else{var ä¸€ç•ªå…ƒæ°—ãªã‚«ãƒ¼ãƒ‰ã®æ•°å€¤=-1;for(let i=0;i<5;i++){if(teki_ba[i]!=""){if(ä¸€ç•ªå…ƒæ°—ãªã‚«ãƒ¼ãƒ‰ã®æ•°å€¤<teki_ba[i].ATK){ ä¸€ç•ªå…ƒæ°—ãªã‚«ãƒ¼ãƒ‰ã®æ•°å€¤=teki_ba[i].ATK;cursor2=i;} }}teki_ba[cursor2].HP+=3;
                        }
                    }
                },AI:function(ã‚¿ã‚¤ãƒŸãƒ³ã‚°){
                    return true;//å¼·ã„ã‚­ãƒ£ãƒ©ãŒã„ãªã„ã¨ä½¿ã‚ãªã„ã£ã¦ã»ã†ãŒè³¢ã„æ°—ã‚‚ã™ã‚‹ãŒã€æ°—ã«ã™ã‚‹ãªï¼
                },text:"ãªãœã ã‹å…ƒæ°—ã«ãªã‚‹è‰ã€‚HP+3",text_iro:[]};

                var kameisi={name:"äº€çŸ³",image:kameisi_image,ATK:2,HP:4,state:["ãƒ¢ãƒ³ã‚¹ã‚¿ãƒ¼","é˜²å¾¡1"],effect_req:function(ã‚¿ã‚¤ãƒŸãƒ³ã‚°){
                    return true;  
                },effect:function(ã‚¿ã‚¤ãƒŸãƒ³ã‚°){
                    if(ã‚¿ã‚¤ãƒŸãƒ³ã‚°=="æ”»æ’ƒã•ã‚ŒãŸ"){
                        if(atk_card.ATK>0){//æ”»æ’ƒåŠ›ãŒ0ã®ãƒ¢ãƒ³ã‚¹ã‚¿ãƒ¼ã«æ®´ã‚‰ã‚ŒãŸã‚‰å›å¾©ã—ã¡ã‚ƒã†ã®ã§â€¦
                            def_card.HP+=1;
                        }
                    }
                },AI:function(ã‚¿ã‚¤ãƒŸãƒ³ã‚°){
                    return true;
                },text:"äº€ã«ä¼¼ãŸçŸ³ã€‚ãƒ€ãƒ¡ãƒ¼ã‚¸ã‚’ï¼‘æ¸›ã‚‰ã™ã€‚",text_iro:[]};
                var kametetu={name:"äº€é‰„",image:kametetu_image,ATK:2,HP:4,state:["ãƒ¢ãƒ³ã‚¹ã‚¿ãƒ¼","é˜²å¾¡2"],effect_req:function(ã‚¿ã‚¤ãƒŸãƒ³ã‚°){
                    return true;  
                },effect:function(ã‚¿ã‚¤ãƒŸãƒ³ã‚°){
                    if(ã‚¿ã‚¤ãƒŸãƒ³ã‚°=="æ”»æ’ƒã•ã‚ŒãŸ"){
                        if(atk_card.ATK>1){//æ”»æ’ƒåŠ›ãŒ1ã®ãƒ¢ãƒ³ã‚¹ã‚¿ãƒ¼ã«æ®´ã‚‰ã‚ŒãŸã‚‰å›å¾©ã—ã¡ã‚ƒã†ã®ã§â€¦
                            def_card.HP+=2;
                        }else if(atk_card.ATK==1){
                            def_card.HP+=1;
                        }
                    }
                },AI:function(ã‚¿ã‚¤ãƒŸãƒ³ã‚°){
                    return true;
                },text:"é‰„ã«ä¼¼ãŸäº€ã€‚ãƒ€ãƒ¡ãƒ¼ã‚¸ã‚’2æ¸›ã‚‰ã™ã€‚",text_iro:[]};

                var henyamotin={name:"ã¸ã«ã‚ƒã‚‚ã¡ã‚“",image:henyamotin_image,ATK:2,HP:1,state:["ãƒ¢ãƒ³ã‚¹ã‚¿ãƒ¼","ã¸ã«ã‚ƒã‚‚ã¡ã‚“","ACE"],effect_req:function(ã‚¿ã‚¤ãƒŸãƒ³ã‚°){return false;},effect:function(ã‚¿ã‚¤ãƒŸãƒ³ã‚°){},AI:function(ã‚¿ã‚¤ãƒŸãƒ³ã‚°){return true;},text:"å½—æ˜Ÿã®ã”ã¨ãç¾ã‚ŒãŸã€æˆ‘ã‚‰ã®ãƒ’ãƒ¼ãƒ­ãƒ¼ï¼ã¸ã«ã‚ƒã‚‚ã¡ã‚“ï¼ã„ã¤ã ã£ã¦ACEã•ï¼",text_iro:[[0,2,"rgb(200,200,0)"],[13,4,"rgb(200,200,0)"],[30,3,"rgb(200,200,0)"]]};
                
                var ponya_sutoraiku={name:"ã½ã«ã‚ƒã‚¹ãƒˆãƒ©ã‚¤ã‚¯",image:ponya_sutoraiku_image,ATK:2,HP:3,state:["ãƒ¢ãƒ³ã‚¹ã‚¿ãƒ¼","ã½ã«ã‚ƒ"],effect_req:function(ã‚¿ã‚¤ãƒŸãƒ³ã‚°){return false;},effect:function(ã‚¿ã‚¤ãƒŸãƒ³ã‚°,option){
                    if(ã‚¿ã‚¤ãƒŸãƒ³ã‚°=="å¬å–šã•ã‚ŒãŸ"){
                        let ponya_æ•°=0;
                        if(option[0]=="my_ba"){//å‘³æ–¹
                            for(let i=0;i<5;i++){
                                if(my_ba[i]!="" && my_ba[i]!=option[1] && my_ba[i].state.indexOf("ã½ã«ã‚ƒ")!=-1){
                                    ponya_æ•°=my_ba[i].state.filter(function(state){
                                        return state=="ã½ã«ã‚ƒ";     //è¦ç´ ã‚’ä¸€å€‹ãšã¤è¦‹ã¦ã€æ¡ä»¶ã¨ä¸€è‡´ã™ã‚‹ã‚‚ã®ã‚’è¦ç´ ã«ã‚‚ã¤é…åˆ—ã‚’ç”Ÿæˆã™ã‚‹
                                    }).length;                      //ã§ããŸé…åˆ—ã®é•·ã•ã‚’ãã‚Œã¨ã™ã‚‹
                                    option[1].ATK+=2*ponya_æ•°;
                                }
                            }
                        }else{//æ•µ
                            for(let i=0;i<5;i++){
                                if(teki_ba[i]!="" && teki_ba[i]!=option[1] && teki_ba[i].state.indexOf("ã½ã«ã‚ƒ")!=-1){
                                    ponya_æ•°=teki_ba[i].state.filter(function(state){
                                        return state=="ã½ã«ã‚ƒ";     //è¦ç´ ã‚’ä¸€å€‹ãšã¤è¦‹ã¦ã€æ¡ä»¶ã¨ä¸€è‡´ã™ã‚‹ã‚‚ã®ã‚’è¦ç´ ã«ã‚‚ã¤é…åˆ—ã‚’ç”Ÿæˆã™ã‚‹
                                    }).length;                      //ã§ããŸé…åˆ—ã®é•·ã•ã‚’ãã‚Œã¨ã™ã‚‹
                                    option[1].ATK+=2*ponya_æ•°;
                                }
                            }
                        }
                    }
                },AI:function(ã‚¿ã‚¤ãƒŸãƒ³ã‚°){return true;},text:"å¬å–šæ™‚ã€è‡ªåˆ†ã®å ´ã®ã½ã«ã‚ƒãƒ¢ãƒ³ã‚¹ã‚¿ãƒ¼ã®æ•°ã ã‘æ”»æ’ƒåŠ›+2ï¼ˆè‡ªåˆ†ã¯å«ã‚ãªã„ï¼‰",text_iro:[]};
                var ponya_big={name:"ã½ã«ã‚ƒBIG",image:ponya_big_image,ATK:1,HP:15,state:["ãƒ¢ãƒ³ã‚¹ã‚¿ãƒ¼","ã½ã«ã‚ƒ","BIG"],effect_req:function(ã‚¿ã‚¤ãƒŸãƒ³ã‚°){return false;},effect:function(ã‚¿ã‚¤ãƒŸãƒ³ã‚°,option){},AI:function(ã‚¿ã‚¤ãƒŸãƒ³ã‚°){return true;},text:"ã§ã‹ã„ã½ã«ã‚ƒã€‚ã“ã®ã‚²ãƒ¼ãƒ ã§ã¯æ”»æ’ƒåŠ›ãŒä½ãã€ä½“åŠ›ãŒå¤šã„ãƒ¢ãƒ³ã‚¹ã‚¿ãƒ¼ã¯æ”»æ’ƒã•ã‚Œã«ãã„ã¨ã„ã†ã“ã¨ã‚’è¦šãˆã¦ãŠã“ã†ã€‚",text_iro:[]};
                var ponya_daburu={name:"ã½ã«ã‚ƒãƒ€ãƒ–ãƒ«",image:ponya_daburu_image,ATK:2,HP:3,state:["ãƒ¢ãƒ³ã‚¹ã‚¿ãƒ¼","ã½ã«ã‚ƒ","ã½ã«ã‚ƒ","äºŒå›æ”»æ’ƒ"],effect_req:function(ã‚¿ã‚¤ãƒŸãƒ³ã‚°){return false;},effect:function(ã‚¿ã‚¤ãƒŸãƒ³ã‚°,option){},AI:function(ã‚¿ã‚¤ãƒŸãƒ³ã‚°){return true;},text:"åŒå­ã®ã½ã«ã‚ƒã¯1ã‚¿ãƒ¼ãƒ³ã«äºŒåº¦æ”»æ’ƒã‚’è¡Œã†ï¼ã—ã‹ã‚‚ã½ã«ã‚ƒäºŒä½“åˆ†ã ï¼",text_iro:[]};
                var ponya_rein={name:"ã½ã«ã‚ƒãƒ¬ã‚¤ãƒ³ï¼",image:ponya_rein_image,state:["é­”æ³•","æ•µãƒ€ãƒ¡ãƒ¼ã‚¸"],effect_req:function(ã‚¿ã‚¤ãƒŸãƒ³ã‚°){
                    if(ã‚¿ã‚¤ãƒŸãƒ³ã‚°=="æ‰‹æœ­ã‹ã‚‰"){
                        if(duel_phase!="ç›¸æ‰‹"){
                            for(let i=0;i<5;i++){
                                if(my_ba[i]!="" && my_ba[i].state.indexOf("ã½ã«ã‚ƒ")!=-1){//ã“ã¡ã‚‰ã®å ´ã«ã½ã«ã‚ƒãŒã„ã‚‹
                                    for(let j=0;j<5;j++){
                                        if(teki_ba[j]!=""){return true; }//æ•µãŒä¸€äººã¯ã„ã‚‹â†’ç™ºå‹•å¯èƒ½
                                    }
                                }
                            }
                        }else{ 
                            for(let i=0;i<5;i++){
                                if(teki_ba[i]!="" && teki_ba[i].state.indexOf("ã½ã«ã‚ƒ")!=-1){//æ•µã®å ´ã«ã½ã«ã‚ƒãŒã„ã‚‹
                                    for(let j=0;j<5;j++){
                                        if(my_ba[j]!=""){return true; }//å‘³æ–¹ãŒä¸€äººã¯ã„ã‚‹â†’ç™ºå‹•å¯èƒ½
                                    }
                                }
                            }
                        }
                        return false;  
                    }else{
                        return false;  
                    }  
                },effect:function(ã‚¿ã‚¤ãƒŸãƒ³ã‚°){
                    if(ã‚¿ã‚¤ãƒŸãƒ³ã‚°=="æ‰‹æœ­ã‹ã‚‰"){
                        let ponya_æ•°=0;
                        let ã½ã«ã‚ƒã‚«ã‚¦ãƒ³ãƒˆ=0;
                        if(duel_phase!="ç›¸æ‰‹"){
                            for(let i=0;i<5;i++){
                                if(my_ba[i]!="" && my_ba[i].state.indexOf("ã½ã«ã‚ƒ")!=-1){//ã“ã¡ã‚‰ã®å ´ã«ã½ã«ã‚ƒãŒã„ã‚‹
                                    ponya_æ•°=my_ba[i].state.filter(function(state){
                                        return state=="ã½ã«ã‚ƒ";     //è¦ç´ ã‚’ä¸€å€‹ãšã¤è¦‹ã¦ã€æ¡ä»¶ã¨ä¸€è‡´ã™ã‚‹ã‚‚ã®ã‚’è¦ç´ ã«ã‚‚ã¤é…åˆ—ã‚’ç”Ÿæˆã™ã‚‹
                                    }).length;                      //ã§ããŸé…åˆ—ã®é•·ã•ã‚’ãã‚Œã¨ã™ã‚‹
                                    ã½ã«ã‚ƒã‚«ã‚¦ãƒ³ãƒˆ+=ponya_æ•°;
                                }
                            }
                            for(let i=0;i<5;i++){
                                if(teki_ba[i]!=""){//æ•µã®å ´
                                    teki_ba[i].HP-=ã½ã«ã‚ƒã‚«ã‚¦ãƒ³ãƒˆ*2;
                                    if(teki_ba[i].HP<=0){
                                        teki_ba[i]=death_card(teki_ba[i],teki_haka,i);
                                    }
                                }
                            }
                        }else{
                            for(let i=0;i<5;i++){
                                if(teki_ba[i]!="" && teki_ba[i].state.indexOf("ã½ã«ã‚ƒ")!=-1){//ã“ã¡ã‚‰ã®å ´ã«ã½ã«ã‚ƒãŒã„ã‚‹
                                    ponya_æ•°=teki_ba[i].state.filter(function(state){
                                        return state=="ã½ã«ã‚ƒ";     //è¦ç´ ã‚’ä¸€å€‹ãšã¤è¦‹ã¦ã€æ¡ä»¶ã¨ä¸€è‡´ã™ã‚‹ã‚‚ã®ã‚’è¦ç´ ã«ã‚‚ã¤é…åˆ—ã‚’ç”Ÿæˆã™ã‚‹
                                    }).length;                      //ã§ããŸé…åˆ—ã®é•·ã•ã‚’ãã‚Œã¨ã™ã‚‹
                                    ã½ã«ã‚ƒã‚«ã‚¦ãƒ³ãƒˆ+=ponya_æ•°;
                                }
                            }
                            for(let i=0;i<5;i++){
                                if(my_ba[i]!=""){//æ•µã®å ´
                                    my_ba[i].HP-=ã½ã«ã‚ƒã‚«ã‚¦ãƒ³ãƒˆ*2;
                                    if(my_ba[i].HP<=0){
                                        my_ba[i]=death_card(my_ba[i],my_haka,i);
                                    }
                                }
                            }
                        }
                        return false; 
                    }
                },AI:function(ã‚¿ã‚¤ãƒŸãƒ³ã‚°){
                    return true;//ã¾ã‚ã€ä½¿ã„ãŸã„ã¨ãã«ã¤ã‹ãˆã‚„ğŸ˜
                },text:"ã“ã¡ã‚‰ã®å ´ã®ã½ã«ã‚ƒãƒ¢ãƒ³ã‚¹ã‚¿ãƒ¼ã®æ•°Ã—ï¼’ã®ãƒ€ãƒ¡ãƒ¼ã‚¸ã‚’ç›¸æ‰‹ãƒ¢ãƒ³ã‚¹ã‚¿ãƒ¼ã™ã¹ã¦ã«ä¸ãˆã‚‹ï¼ã€Œã½ã«ã‚ƒã«ã‚ƒã«ã‚ƒã«ã‚ƒã«ã‚ƒã«ã‚ƒã«ã‚ƒã«ã‚ƒã«ã‚ƒï¼ã€",text_iro:[]};
                
                var kyuukoukasakusenki={name:"æ€¥é™ä¸‹ä½œæˆ¦æ©Ÿ",image:kyuukoukasakusenki_image,ATK:1,HP:2,state:["ãƒ¢ãƒ³ã‚¹ã‚¿ãƒ¼","æ©Ÿæ¢°"],effect_req:function(ã‚¿ã‚¤ãƒŸãƒ³ã‚°){return false;},effect:function(ã‚¿ã‚¤ãƒŸãƒ³ã‚°,option){
                    if(ã‚¿ã‚¤ãƒŸãƒ³ã‚°=="å¬å–šã•ã‚ŒãŸ"){
                        if(option[0]=="my_ba"){//å‘³æ–¹
                            pull_card(my_yamahuda,my_tehuda,1);
                        }else{//æ•µ
                            pull_card(teki_yamahuda,teki_tehuda,1);
                        }
                    }
                },AI:function(ã‚¿ã‚¤ãƒŸãƒ³ã‚°){return true;},text:"å¬å–šæ™‚1ãƒ‰ãƒ­ãƒ¼ã€‚ã“ã‚Œã‚ˆã‚Šæœ¬æ©Ÿã¯ä½œæˆ¦ã‚’é–‹å§‹ã™ã‚‹ï¼",text_iro:[]};
                var atakkumojuru={name:"ã‚¢ã‚¿ãƒƒã‚¯ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«",image:atakkumojuru_image,ATK:1,HP:2,state:["ãƒ¢ãƒ³ã‚¹ã‚¿ãƒ¼","æ©Ÿæ¢°","ãƒ‰ãƒ­ãƒ¼"],effect_req:function(ã‚¿ã‚¤ãƒŸãƒ³ã‚°){return false;},effect:function(ã‚¿ã‚¤ãƒŸãƒ³ã‚°,option){
                    if(ã‚¿ã‚¤ãƒŸãƒ³ã‚°=="å¬å–šã•ã‚ŒãŸ"){
                        if(option[0]=="my_ba"){//å‘³æ–¹
                            for(let i=0;i<5;i++){
                                if(my_ba[i]!="" && my_ba[i]!=option[1]){
                                    my_ba[i].ATK+=1;
                                    if(my_ba[i].state.indexOf("æ©Ÿæ¢°")!=-1){//æ©Ÿæ¢°
                                        my_ba[i].ATK+=1;
                                    }
                                }
                            }
                        }else{//æ•µ
                            for(let i=0;i<5;i++){
                                if(teki_ba[i]!="" && teki_ba[i]!=option[1]){
                                    teki_ba[i].ATK+=1;
                                    if(teki_ba[i].state.indexOf("æ©Ÿæ¢°")!=-1){//æ©Ÿæ¢°
                                        teki_ba[i].ATK+=1;
                                    }
                                }
                            }
                        }
                    }
                },AI:function(ã‚¿ã‚¤ãƒŸãƒ³ã‚°){return true;},text:"å¬å–šæ™‚ã€è‡ªåˆ†ä»¥å¤–ã®å ´ã®ãƒ¢ãƒ³ã‚¹ã‚¿ãƒ¼ã®æ”»æ’ƒåŠ›+1(æ©Ÿæ¢°ã¯+2)",text_iro:[]};
                var kaihukumojuru={name:"å›å¾©ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«",image:kaihukumojuru_image,ATK:1,HP:2,state:["ãƒ¢ãƒ³ã‚¹ã‚¿ãƒ¼","æ©Ÿæ¢°"],effect_req:function(ã‚¿ã‚¤ãƒŸãƒ³ã‚°){return false;},effect:function(ã‚¿ã‚¤ãƒŸãƒ³ã‚°,option){
                    if(ã‚¿ã‚¤ãƒŸãƒ³ã‚°=="å¬å–šã•ã‚ŒãŸ"){
                        if(option[0]=="my_ba"){//å‘³æ–¹
                            for(let i=0;i<5;i++){
                                if(my_ba[i]!="" && my_ba[i]!=option[1]){
                                    my_ba[i].HP+=1;
                                    if(my_ba[i].state.indexOf("æ©Ÿæ¢°")!=-1){//æ©Ÿæ¢°
                                        my_ba[i].HP+=2;
                                    }
                                }
                            }
                        }else{//æ•µ
                            for(let i=0;i<5;i++){
                                if(teki_ba[i]!="" && teki_ba[i]!=option[1]){
                                    teki_ba[i].HP+=1;
                                    if(teki_ba[i].state.indexOf("æ©Ÿæ¢°")!=-1){//æ©Ÿæ¢°
                                        teki_ba[i].HP+=2;
                                    }
                                }
                            }
                        }
                    }
                },AI:function(ã‚¿ã‚¤ãƒŸãƒ³ã‚°){return true;},text:"å¬å–šæ™‚ã€è‡ªåˆ†ä»¥å¤–ã®å ´ã®ãƒ¢ãƒ³ã‚¹ã‚¿ãƒ¼ã®ä½“åŠ›+1(æ©Ÿæ¢°ã¯+3)",text_iro:[]};
                var sukurappudoro={name:"ã‚¹ã‚¯ãƒ©ãƒƒãƒ—ãƒ»ãƒ‰ãƒ­ãƒ¼",image:sukurappudoro_image,state:["é­”æ³•","ãƒ‰ãƒ­ãƒ¼"],effect_req:function(ã‚¿ã‚¤ãƒŸãƒ³ã‚°){
                    let æ©Ÿæ¢°ã®æ•°=0;
                    if(ã‚¿ã‚¤ãƒŸãƒ³ã‚°=="æ‰‹æœ­ã‹ã‚‰"){
                        if(duel_phase!="ç›¸æ‰‹"){
                            for(let i=0;i<my_haka.length;i++){
                                if(my_haka[i].state.indexOf("æ©Ÿæ¢°")!=-1){//å¢“åœ°ã«ã„ã‚‹æ©Ÿæ¢°
                                    æ©Ÿæ¢°ã®æ•°+=1;
                                }
                            }
                            if(Math.floor(æ©Ÿæ¢°ã®æ•°/2)>=1){
                                return true;//1ãƒ‰ãƒ­ãƒ¼ã¯ã§ããªã‚‰ç™ºå‹•å¯èƒ½ã§ã€‚
                            }
                        }else{ 
                            for(let i=0;i<teki_haka.length;i++){
                                if(teki_haka[i].state.indexOf("æ©Ÿæ¢°")!=-1){//å¢“åœ°ã«ã„ã‚‹æ©Ÿæ¢°
                                    æ©Ÿæ¢°ã®æ•°+=1;
                                }
                            }
                            if(Math.floor(æ©Ÿæ¢°ã®æ•°/2)>=1){
                                return true;//1ãƒ‰ãƒ­ãƒ¼ã¯ã§ããªã‚‰ç™ºå‹•å¯èƒ½ã§ã€‚
                            }
                        }
                        return false;  
                    }else{
                        return false;  
                    }  
                },effect:function(ã‚¿ã‚¤ãƒŸãƒ³ã‚°){
                    let æ©Ÿæ¢°ã®æ•°=0;
                    if(ã‚¿ã‚¤ãƒŸãƒ³ã‚°=="æ‰‹æœ­ã‹ã‚‰"){
                        if(duel_phase!="ç›¸æ‰‹"){
                            for(let i=0;i<my_haka.length;i++){
                                if(my_haka[i].state.indexOf("æ©Ÿæ¢°")!=-1){//å¢“åœ°ã«ã„ã‚‹æ©Ÿæ¢°
                                    æ©Ÿæ¢°ã®æ•°+=1;
                                }
                            }
                            pull_card(my_yamahuda,my_tehuda,Math.floor(æ©Ÿæ¢°ã®æ•°/2));
                        }else{ 
                            for(let i=0;i<teki_haka.length;i++){
                                if(teki_haka[i].state.indexOf("æ©Ÿæ¢°")!=-1){//å¢“åœ°ã«ã„ã‚‹æ©Ÿæ¢°
                                    æ©Ÿæ¢°ã®æ•°+=1;
                                }
                            }
                            pull_card(teki_yamahuda,teki_tehuda,Math.floor(æ©Ÿæ¢°ã®æ•°/2));
                        }
                    } 
                },AI:function(ã‚¿ã‚¤ãƒŸãƒ³ã‚°){
                    return true;//ä½¿ãˆã‚‹ãªã‚‰ä½¿ã£ã¨ã‘
                },text:"è‡ªåˆ†ã®å¢“åœ°ã«çœ ã‚‹æ©Ÿæ¢°ãƒ¢ãƒ³ã‚¹ã‚¿ãƒ¼ã®æ•°/2ï¼ˆåˆ‡ã‚Šæ¨ã¦ï¼‰ã ã‘ãƒ‰ãƒ­ãƒ¼ã™ã‚‹ã€‚",text_iro:[]};


                var sasori={name:"ã‚µã‚½ãƒª",image:sasori_image,ATK:2,HP:5,state:["ãƒ¢ãƒ³ã‚¹ã‚¿ãƒ¼","äºŒå›æ”»æ’ƒ"],effect_req:function(ã‚¿ã‚¤ãƒŸãƒ³ã‚°){return false;},effect:function(ã‚¿ã‚¤ãƒŸãƒ³ã‚°,option){},AI:function(ã‚¿ã‚¤ãƒŸãƒ³ã‚°){return true;},text:"äºŒå›æ”»æ’ƒã€‚",text_iro:[]};
                var sasori_seitai={name:"ã‚µã‚½ãƒª_æˆä½“",image:sasori_seitai_image,ATK:2,HP:5,state:["ãƒ¢ãƒ³ã‚¹ã‚¿ãƒ¼","ä¸‰å›æ”»æ’ƒ"],effect_req:function(ã‚¿ã‚¤ãƒŸãƒ³ã‚°){return false;},effect:function(ã‚¿ã‚¤ãƒŸãƒ³ã‚°,option){},AI:function(ã‚¿ã‚¤ãƒŸãƒ³ã‚°){return true;},text:"ä¸‰å›æ”»æ’ƒã€‚",text_iro:[]};
                
                var ikkakudaija_atama={name:"ä¸€è§’å¤§è›‡ã®é ­",image:ikkakudaija_atama_image,ATK:0,HP:30,state:["ãƒ¢ãƒ³ã‚¹ã‚¿ãƒ¼","ä¸€è§’å¤§è›‡","ä¸€è§’å¤§è›‡ã®å…ˆç«¯"],effect_req:function(ã‚¿ã‚¤ãƒŸãƒ³ã‚°){return false;},effect:function(ã‚¿ã‚¤ãƒŸãƒ³ã‚°,option){},AI:function(ã‚¿ã‚¤ãƒŸãƒ³ã‚°){return true;},text:"ç‚ã®æµ·ã‚’æ³³ãã€è’¼ã®è§’ã§è²«ãã€‚ç„æµ·ã‚’æ”¯é…ã™ã‚‹å·¨å¤§ãªå¤§è›‡ã€‚",text_iro:[]};
                var ikkakudaija_hara={name:"ä¸€è§’å¤§è›‡ã®è…¹",image:ikkakudaija_hara_image,ATK:0,HP:5,state:["ãƒ¢ãƒ³ã‚¹ã‚¿ãƒ¼","ä¸€è§’å¤§è›‡"],effect_req:function(ã‚¿ã‚¤ãƒŸãƒ³ã‚°){return false;},effect:function(ã‚¿ã‚¤ãƒŸãƒ³ã‚°,option){
                    if(ã‚¿ã‚¤ãƒŸãƒ³ã‚°=="å¬å–šã•ã‚ŒãŸ"){
                        let å…ˆç«¯æ•°=0;
                        if(option[0]=="my_ba"){//å‘³æ–¹
                            for(let i=0;i<5;i++){
                                if(my_ba[i]!="" && my_ba[i].state.indexOf("ä¸€è§’å¤§è›‡ã®å…ˆç«¯")!=-1){//ã“ã¡ã‚‰ã®å ´ã«ã„ã‚‹
                                    å…ˆç«¯æ•°=my_ba[i].state.filter(function(state){
                                        return state=="ä¸€è§’å¤§è›‡ã®å…ˆç«¯";     //è¦ç´ ã‚’ä¸€å€‹ãšã¤è¦‹ã¦ã€æ¡ä»¶ã¨ä¸€è‡´ã™ã‚‹ã‚‚ã®ã‚’è¦ç´ ã«ã‚‚ã¤é…åˆ—ã‚’ç”Ÿæˆã™ã‚‹
                                    }).length;                      //ã§ããŸé…åˆ—ã®é•·ã•ã‚’ãã‚Œã¨ã™ã‚‹
                                    option[1].ATK+=å…ˆç«¯æ•°*3;
                                    option[1].HP+=å…ˆç«¯æ•°*2;
                                }
                            }

                        }else{//æ•µ
                            for(let i=0;i<5;i++){
                                if(teki_ba[i]!="" && teki_ba[i].state.indexOf("ä¸€è§’å¤§è›‡ã®å…ˆç«¯")!=-1){//ã“ã¡ã‚‰ã®å ´ã«ã„ã‚‹
                                    å…ˆç«¯æ•°=teki_ba[i].state.filter(function(state){
                                        return state=="ä¸€è§’å¤§è›‡ã®å…ˆç«¯";     //è¦ç´ ã‚’ä¸€å€‹ãšã¤è¦‹ã¦ã€æ¡ä»¶ã¨ä¸€è‡´ã™ã‚‹ã‚‚ã®ã‚’è¦ç´ ã«ã‚‚ã¤é…åˆ—ã‚’ç”Ÿæˆã™ã‚‹
                                    }).length;                      //ã§ããŸé…åˆ—ã®é•·ã•ã‚’ãã‚Œã¨ã™ã‚‹
                                    option[1].ATK+=å…ˆç«¯æ•°*3;
                                    option[1].HP+=å…ˆç«¯æ•°*2;
                                }
                            }
                        }
                    }
                },AI:function(ã‚¿ã‚¤ãƒŸãƒ³ã‚°){return true;},text:"ä¸€è§’å¤§è›‡ã®99%ã€‚å¬å–šæ™‚ã€å…ˆç«¯ã®æ•°Ã—3ã®æ”»æ’ƒåŠ›,Ã—2ã®HPã‚’å¾—ã‚‹",text_iro:[]};
                var ikkakudaija_yubi={name:"ä¸€è§’å¤§è›‡ã®æŒ‡",image:ikkakudaija_yubi_image,ATK:5,HP:6,state:["ãƒ¢ãƒ³ã‚¹ã‚¿ãƒ¼","ä¸€è§’å¤§è›‡","ä¸€è§’å¤§è›‡ã®å…ˆç«¯"],effect_req:function(ã‚¿ã‚¤ãƒŸãƒ³ã‚°){return false;},effect:function(ã‚¿ã‚¤ãƒŸãƒ³ã‚°,option){},AI:function(ã‚¿ã‚¤ãƒŸãƒ³ã‚°){return true;},text:"ä¸€è§’å¤§è›‡ã®å°¾ã€‚ç²ç‰©ã‚’æŒ‡å·®ã™ã€‚",text_iro:[]};

                var buiwa={name:"ãƒ–ãƒ»å²©",image:buiwa_image,ATK:2,HP:15,state:["ãƒ¢ãƒ³ã‚¹ã‚¿ãƒ¼","ãƒ–ãƒ­ãƒƒã‚¯"],effect_req:function(ã‚¿ã‚¤ãƒŸãƒ³ã‚°){return false;},effect:function(ã‚¿ã‚¤ãƒŸãƒ³ã‚°,option){},AI:function(ã‚¿ã‚¤ãƒŸãƒ³ã‚°){return true;},text:"ãƒ–ãƒ­ãƒƒã‚¯ãƒ¢ãƒ³ã‚¹ã‚¿ãƒ¼ãŒã„ã‚‹ã¨ãã€ãƒ–ãƒ­ãƒƒã‚¯ãƒ¢ãƒ³ã‚¹ã‚¿ãƒ¼ã«ã—ã‹æ”»æ’ƒã§ããªã„ï¼ˆãã®ãªã‹ã§ã‚‚ä¸€ç•ªä¸Šã«ã„ã‚‹ã‚„ã¤ã«æ”»æ’ƒã™ã‚‹ï¼‰",text_iro:[]};
                var raihudaiya={name:"ãƒ©ã‚¤ãƒ•ãƒ€ã‚¤ãƒ¤",image:raihudaiya_image,state:["é­”æ³•","å‘³æ–¹é¸æŠ","ä½“åŠ›ä¸Šæ˜‡"],effect_req:function(ã‚¿ã‚¤ãƒŸãƒ³ã‚°){
                    if(ã‚¿ã‚¤ãƒŸãƒ³ã‚°=="æ‰‹æœ­ã‹ã‚‰"){
                        if(duel_phase!="ç›¸æ‰‹"){for(let i=0;i<5;i++){if(my_ba[i]!=""){return true;}}
                        }else{ for(let i=0;i<5;i++){if(teki_ba[i]!=""){return true; }}
                        }
                        return false;  
                    }else{
                        return false;  
                    }  
                },effect:function(ã‚¿ã‚¤ãƒŸãƒ³ã‚°){
                    if(ã‚¿ã‚¤ãƒŸãƒ³ã‚°=="æ‰‹æœ­ã‹ã‚‰"){
                        if(duel_phase!="ç›¸æ‰‹"){if(my_ba[cursor2]!=""){my_ba[cursor2].HP+=10;return true;}//é¸æŠç³»é­”æ³•ã¯æ­£ã—ãå‹•ã„ãŸã‚‰trueã‚’è¿”ã™ã“ã¨ï¼ 
                            return false; 
                        }else{var ä¸€ç•ªå…ƒæ°—ãªã‚«ãƒ¼ãƒ‰ã®æ•°å€¤=-1;for(let i=0;i<5;i++){if(teki_ba[i]!=""){if(ä¸€ç•ªå…ƒæ°—ãªã‚«ãƒ¼ãƒ‰ã®æ•°å€¤<teki_ba[i].ATK){ ä¸€ç•ªå…ƒæ°—ãªã‚«ãƒ¼ãƒ‰ã®æ•°å€¤=teki_ba[i].ATK;cursor2=i;} }}teki_ba[cursor2].HP+=10;
                        }
                    }
                },AI:function(ã‚¿ã‚¤ãƒŸãƒ³ã‚°){
                    return true;//å¼·ã„ã‚­ãƒ£ãƒ©ãŒã„ãªã„ã¨ä½¿ã‚ãªã„ã£ã¦ã»ã†ãŒè³¢ã„æ°—ã‚‚ã™ã‚‹ãŒã€æ°—ã«ã™ã‚‹ãªï¼
                },text:"ç”Ÿå‘½ãƒ€ã‚¤ãƒ¤ãƒ¢ãƒ³ãƒ‰ã€èƒ¸ã«å½“ã¦ã¦ç¥ˆã‚‹ã€‚HP+10",text_iro:[]};
                var seiretu={name:"æ•´åˆ—ï¼",image:seiretu_image,state:["é­”æ³•"],effect_req:function(ã‚¿ã‚¤ãƒŸãƒ³ã‚°){
                    if(ã‚¿ã‚¤ãƒŸãƒ³ã‚°=="æ‰‹æœ­ã‹ã‚‰"){
                        if(duel_phase!="ç›¸æ‰‹"){
                            for(let i=0;i<5;i++){
                                if(my_ba[i]!=""){
                                    for(let j=i+1;j<5;j++){
                                        if(my_ba[j]!="" && my_ba[i].HP<my_ba[j].HP){//ãªã‚“ã‹ä¸‹ã®ã»ã†ã«ä½“åŠ›ãŒå¤šã„ãƒ¤ãƒ„ãŒã„ã‚‹
                                            return true;
                                        }
                                    }
                                }
                            }
                            for(let i=0;i<5;i++){
                                if(teki_ba[i]!=""){
                                    for(let j=i+1;j<5;j++){
                                        if(teki_ba[j]!="" && teki_ba[i].HP>teki_ba[j].HP){//ãªã‚“ã‹ä¸‹ã®ã»ã†ã«ä½“åŠ›ãŒå°‘ãªã„ãƒ¤ãƒ„ãŒã„ã‚‹
                                            return true;
                                        }
                                    }
                                }
                            }

                        }else{ 
                            for(let i=0;i<5;i++){
                                if(my_ba[i]!=""){
                                    for(let j=i+1;j<5;j++){
                                        if(my_ba[j]!="" && my_ba[i].HP>my_ba[j].HP){//ãªã‚“ã‹ä¸‹ã®ã»ã†ã«ä½“åŠ›ãŒå°‘ãªã„ãƒ¤ãƒ„ãŒã„ã‚‹
                                            return true;
                                        }
                                    }
                                }
                            }
                            for(let i=0;i<5;i++){
                                if(teki_ba[i]!=""){
                                    for(let j=i+1;j<5;j++){
                                        if(teki_ba[j]!="" && teki_ba[i].HP<teki_ba[j].HP){//ãªã‚“ã‹ä¸‹ã®ã»ã†ã«ä½“åŠ›ãŒå¤šã„ãƒ¤ãƒ„ãŒã„ã‚‹
                                            return true;
                                        }
                                    }
                                }
                            }
                        }

                        return false;  
                    }else{
                        return false;  
                    }  
                },effect:function(ã‚¿ã‚¤ãƒŸãƒ³ã‚°){
                    if(ã‚¿ã‚¤ãƒŸãƒ³ã‚°=="æ‰‹æœ­ã‹ã‚‰"){
                        let ä¸€æ™‚çš„ãªba=["","","","",""];
                        let ä¸€ç•ªå…ƒæ°—ãªã‚«ãƒ¼ãƒ‰ã®æ•°å€¤=-1;
                        if(duel_phase!="ç›¸æ‰‹"){
                            for(let i=0;i<5;i++){
                                for(let j=0;j<5;j++){
                                    if(my_ba[j]!="" && ä¸€ç•ªå…ƒæ°—ãªã‚«ãƒ¼ãƒ‰ã®æ•°å€¤==-1){
                                            ä¸€ç•ªå…ƒæ°—ãªã‚«ãƒ¼ãƒ‰ã®æ•°å€¤=j;
                                    }
                                    if(my_ba[j]!="" && my_ba[j].HP>my_ba[ä¸€ç•ªå…ƒæ°—ãªã‚«ãƒ¼ãƒ‰ã®æ•°å€¤].HP){
                                            ä¸€ç•ªå…ƒæ°—ãªã‚«ãƒ¼ãƒ‰ã®æ•°å€¤=j;
                                    }
                                }//å ´ã«ã‚ã‚‹ä¸€ç•ªä½“åŠ›ãŒå¤šã„ã‚«ãƒ¼ãƒ‰ã‚’è¦‹ã¤ã‘ã‚‹
                                if(ä¸€ç•ªå…ƒæ°—ãªã‚«ãƒ¼ãƒ‰ã®æ•°å€¤!=-1){
                                    ä¸€æ™‚çš„ãªba[i]=my_ba[ä¸€ç•ªå…ƒæ°—ãªã‚«ãƒ¼ãƒ‰ã®æ•°å€¤];
                                    my_ba[ä¸€ç•ªå…ƒæ°—ãªã‚«ãƒ¼ãƒ‰ã®æ•°å€¤]="";
                                    ä¸€ç•ªå…ƒæ°—ãªã‚«ãƒ¼ãƒ‰ã®æ•°å€¤=-1;
                                }
                            }
                            for(let i=0;i<5;i++){
                                my_ba[i]= ä¸€æ™‚çš„ãªba[i];
                                my_ba[i].position="my_ba";
                                my_ba[i].move=5;
                            }
                            ä¸€æ™‚çš„ãªba=["","","","",""];
                            for(let i=0;i<5;i++){
                                for(let j=0;j<5;j++){
                                    if(teki_ba[j]!="" && ä¸€ç•ªå…ƒæ°—ãªã‚«ãƒ¼ãƒ‰ã®æ•°å€¤==-1){
                                            ä¸€ç•ªå…ƒæ°—ãªã‚«ãƒ¼ãƒ‰ã®æ•°å€¤=j;
                                    }
                                    if(teki_ba[j]!="" && teki_ba[j].HP<teki_ba[ä¸€ç•ªå…ƒæ°—ãªã‚«ãƒ¼ãƒ‰ã®æ•°å€¤].HP){
                                            ä¸€ç•ªå…ƒæ°—ãªã‚«ãƒ¼ãƒ‰ã®æ•°å€¤=j;
                                    }
                                }//å ´ã«ã‚ã‚‹ä¸€ç•ªä½“åŠ›ãŒä½ã„ã‚«ãƒ¼ãƒ‰ã‚’è¦‹ã¤ã‘ã‚‹
                                if(ä¸€ç•ªå…ƒæ°—ãªã‚«ãƒ¼ãƒ‰ã®æ•°å€¤!=-1){
                                    ä¸€æ™‚çš„ãªba[i]=teki_ba[ä¸€ç•ªå…ƒæ°—ãªã‚«ãƒ¼ãƒ‰ã®æ•°å€¤];
                                    teki_ba[ä¸€ç•ªå…ƒæ°—ãªã‚«ãƒ¼ãƒ‰ã®æ•°å€¤]="";
                                    ä¸€ç•ªå…ƒæ°—ãªã‚«ãƒ¼ãƒ‰ã®æ•°å€¤=-1;
                                }
                            }
                            for(let i=0;i<5;i++){
                                teki_ba[i]= ä¸€æ™‚çš„ãªba[i];
                                teki_ba[i].position="teki_ba";
                                teki_ba[i].move=5;
                            }
                        }else{

                            for(let i=0;i<5;i++){
                                for(let j=0;j<5;j++){
                                    if(my_ba[j]!="" && ä¸€ç•ªå…ƒæ°—ãªã‚«ãƒ¼ãƒ‰ã®æ•°å€¤==-1){
                                            ä¸€ç•ªå…ƒæ°—ãªã‚«ãƒ¼ãƒ‰ã®æ•°å€¤=j;
                                    }
                                    if(my_ba[j]!="" && my_ba[j].HP<my_ba[ä¸€ç•ªå…ƒæ°—ãªã‚«ãƒ¼ãƒ‰ã®æ•°å€¤].HP){
                                            ä¸€ç•ªå…ƒæ°—ãªã‚«ãƒ¼ãƒ‰ã®æ•°å€¤=j;
                                    }
                                }//å ´ã«ã‚ã‚‹ä¸€ç•ªä½“åŠ›ãŒå¤šã„ã‚«ãƒ¼ãƒ‰ã‚’è¦‹ã¤ã‘ã‚‹
                                if(ä¸€ç•ªå…ƒæ°—ãªã‚«ãƒ¼ãƒ‰ã®æ•°å€¤!=-1){
                                    ä¸€æ™‚çš„ãªba[i]=my_ba[ä¸€ç•ªå…ƒæ°—ãªã‚«ãƒ¼ãƒ‰ã®æ•°å€¤];
                                    my_ba[ä¸€ç•ªå…ƒæ°—ãªã‚«ãƒ¼ãƒ‰ã®æ•°å€¤]="";
                                    ä¸€ç•ªå…ƒæ°—ãªã‚«ãƒ¼ãƒ‰ã®æ•°å€¤=-1;
                                }
                            }
                            for(let i=0;i<5;i++){
                                my_ba[i]= ä¸€æ™‚çš„ãªba[i];
                                my_ba[i].position="my_ba";
                                my_ba[i].move=5;
                            }
                            ä¸€æ™‚çš„ãªba=["","","","",""];
                            for(let i=0;i<5;i++){
                                for(let j=0;j<5;j++){
                                    if(teki_ba[j]!="" && ä¸€ç•ªå…ƒæ°—ãªã‚«ãƒ¼ãƒ‰ã®æ•°å€¤==-1){
                                            ä¸€ç•ªå…ƒæ°—ãªã‚«ãƒ¼ãƒ‰ã®æ•°å€¤=j;
                                    }
                                    if(teki_ba[j]!="" && teki_ba[j].HP>teki_ba[ä¸€ç•ªå…ƒæ°—ãªã‚«ãƒ¼ãƒ‰ã®æ•°å€¤].HP){
                                            ä¸€ç•ªå…ƒæ°—ãªã‚«ãƒ¼ãƒ‰ã®æ•°å€¤=j;
                                    }
                                }//å ´ã«ã‚ã‚‹ä¸€ç•ªä½“åŠ›ãŒä½ã„ã‚«ãƒ¼ãƒ‰ã‚’è¦‹ã¤ã‘ã‚‹
                                if(ä¸€ç•ªå…ƒæ°—ãªã‚«ãƒ¼ãƒ‰ã®æ•°å€¤!=-1){
                                    ä¸€æ™‚çš„ãªba[i]=teki_ba[ä¸€ç•ªå…ƒæ°—ãªã‚«ãƒ¼ãƒ‰ã®æ•°å€¤];
                                    teki_ba[ä¸€ç•ªå…ƒæ°—ãªã‚«ãƒ¼ãƒ‰ã®æ•°å€¤]="";
                                    ä¸€ç•ªå…ƒæ°—ãªã‚«ãƒ¼ãƒ‰ã®æ•°å€¤=-1;
                                }
                            }
                            for(let i=0;i<5;i++){
                                teki_ba[i]= ä¸€æ™‚çš„ãªba[i];
                                teki_ba[i].position="teki_ba";
                                teki_ba[i].move=5;
                            }
                        }
                        return false; 
                    }
                },AI:function(ã‚¿ã‚¤ãƒŸãƒ³ã‚°){
                    return true;//ã©ã†ã›å¤§é‡ã«ãƒ‡ãƒƒã‚­ã«æŠ•å…¥ã™ã‚‹ã®ã§ã„ã¤ã§ã‚‚ä½¿ã£ã¦ãŠã‘
                },text:"æ•´åˆ—ãƒ¼ï¼ä½“åŠ›ãŒé«˜ã„è€…ã¯ä¸Šã¸ï¼ä½“åŠ›ãŒä½ã„ç‰©ã¯ä¸‹ã¸ä¸¦ã¹ï¼æ•µï¼Ÿæ•µã¯é€†é †ã«ã§ã‚‚ä¸¦ã¹ã¦ãŠã‘ã„ï¼",text_iro:[]};


                var kyuusainote={name:"æ•‘æ¸ˆã®æ‰‹",image:kyuusainote_image,ATK:0,HP:10,state:["ãƒ¢ãƒ³ã‚¹ã‚¿ãƒ¼","å›å¾©"],effect_req:function(ã‚¿ã‚¤ãƒŸãƒ³ã‚°){
                    if(ã‚¿ã‚¤ãƒŸãƒ³ã‚°=="ã‚¿ãƒ¼ãƒ³ã‚¨ãƒ³ãƒ‰"){
                        return true;
                    }
                    return false;
                },effect:function(ã‚¿ã‚¤ãƒŸãƒ³ã‚°,option){
                    if(ã‚¿ã‚¤ãƒŸãƒ³ã‚°=="ã‚¿ãƒ¼ãƒ³ã‚¨ãƒ³ãƒ‰"){
                        if(option[0]=="è‡ªã‚¿ãƒ¼ãƒ³"){
                            for(let i=0;i<5;i++){
                                if(my_ba[i]!=""){
                                    my_ba[i].HP+=2;
                                }
                            }
                            my_ba[option[1]].move=-3;
                        }else{//æ•µã‚¿ãƒ¼ãƒ³
                            for(let i=0;i<5;i++){
                                if(teki_ba[i]!=""){
                                    teki_ba[i].HP+=2;
                                }
                            }
                            teki_ba[option[1]].move=-3;
                        }
                    }
                    return false;
                },AI:function(ã‚¿ã‚¤ãƒŸãƒ³ã‚°){return true;},text:"åŠ›ã‚ã‚‹è€…ã‚’æ•‘æ¸ˆã™ã‚‹æ‰‹ã€‚è‡ªã‚¿ãƒ¼ãƒ³ã®çµ‚ã‚ã‚Šã«è‡ªåˆ†ã®å ´ã®ã™ã¹ã¦ã®ãƒ¢ãƒ³ã‚¹ã‚¿ãƒ¼ã®HP+2",text_iro:[]};
                var kenrounarusoukou={name:"å …ç‰¢ãªã‚‹è£…ç”²",image:kenrounarusoukou_image,ATK:0,HP:20,state:["ãƒ¢ãƒ³ã‚¹ã‚¿ãƒ¼","ãƒ–ãƒ­ãƒƒã‚¯"],effect_req:function(ã‚¿ã‚¤ãƒŸãƒ³ã‚°){return false;},effect:function(ã‚¿ã‚¤ãƒŸãƒ³ã‚°,option){},AI:function(ã‚¿ã‚¤ãƒŸãƒ³ã‚°){return true;},text:"åŠ›ã‚ã‚‹è€…ã‚’å®ˆã‚‹è£…ç”²ã€‚ãƒ–ãƒ­ãƒƒã‚¯æŒã¡",text_iro:[]};
                var zettainotamasii={name:"çµ¶å¯¾ã®é­‚",image:zettainotamasii_image,ATK:0,HP:15,state:["ãƒ¢ãƒ³ã‚¹ã‚¿ãƒ¼"],effect_req:function(ã‚¿ã‚¤ãƒŸãƒ³ã‚°){
                    if(ã‚¿ã‚¤ãƒŸãƒ³ã‚°=="ã‚¿ãƒ¼ãƒ³ã‚¨ãƒ³ãƒ‰"){
                        return true;
                    }
                    return false;
                },effect:function(ã‚¿ã‚¤ãƒŸãƒ³ã‚°,option){
                    if(ã‚¿ã‚¤ãƒŸãƒ³ã‚°=="ã‚¿ãƒ¼ãƒ³ã‚¨ãƒ³ãƒ‰"){
                        if(option[0]=="è‡ªã‚¿ãƒ¼ãƒ³"){
                            my_ba[option[1]].ATK+=2;
                        }else{//æ•µã‚¿ãƒ¼ãƒ³
                            teki_ba[option[1]].ATK+=2;
                        }
                    }
                    return false;
                },AI:function(ã‚¿ã‚¤ãƒŸãƒ³ã‚°){return true;},text:"æ•‘æ¸ˆã®æ‰‹ã€å …ç‰¢ãªã‚‹è£…ç”²ã€çµ¶å¯¾ã®é­‚ã€åŠ›ã®ç¥­å…¸ã€‚è‡ªã‚¿ãƒ¼ãƒ³ã®çµ‚ã‚ã‚Šã«æ”»æ’ƒåŠ›+2",text_iro:[]};
                
                var kyousinja={name:"ç‹‚ä¿¡è€…",image:kyousinja_image,ATK:0,HP:1,state:["ãƒ¢ãƒ³ã‚¹ã‚¿ãƒ¼"],effect_req:function(ã‚¿ã‚¤ãƒŸãƒ³ã‚°){return false;},effect:function(ã‚¿ã‚¤ãƒŸãƒ³ã‚°,option){},AI:function(ã‚¿ã‚¤ãƒŸãƒ³ã‚°){return true;},text:"ç¥ˆã‚Šã‚’å±Šã‘ã‚‹ãŸã‚ã€å¤šãã®å‘½ãŒæ§ã’ã‚‰ã‚Œã¦ã„ã",text_iro:[]};
                var hametunokami={name:"ç ´æ»…ã®ç¥",image:hametunokami_image,ATK:20,HP:99,state:["ãƒ¢ãƒ³ã‚¹ã‚¿ãƒ¼","ã—ã‚…ã†ãã‚“"],effect_req:function(ã‚¿ã‚¤ãƒŸãƒ³ã‚°){
                    if(ã‚¿ã‚¤ãƒŸãƒ³ã‚°=="ã‚¿ãƒ¼ãƒ³ã‚¨ãƒ³ãƒ‰"){//ã¡ã‚ƒã‚“ã¨æ¡ä»¶æ¸¡ã—ã¦ã‚‚ã„ã„ã‘ã©ã¾ã‚ã€ã„ã„ã‹ã¨ãªã£ãŸ
                        return true;
                    }
                    return false;
                },effect:function(ã‚¿ã‚¤ãƒŸãƒ³ã‚°,option){
                    if(ã‚¿ã‚¤ãƒŸãƒ³ã‚°=="ã‚¿ãƒ¼ãƒ³ã‚¨ãƒ³ãƒ‰"){
                        if(option[0]=="è‡ªã‚¿ãƒ¼ãƒ³"){
                            for(let i=0;i<5;i++){
                                if(my_ba[i]!="" &&i!=option[1]){
                                    my_ba[i]=death_card(my_ba[i],my_haka,i);
                                }
                            }
                        }else{//æ•µã‚¿ãƒ¼ãƒ³
                            for(let i=0;i<5;i++){
                                if(teki_ba[i]!="" && i!=option[1]){
                                    teki_ba[i]=death_card(teki_ba[i],teki_haka,i);
                                }
                            }
                        }
                    }
                    return false;
                },AI:function(ã‚¿ã‚¤ãƒŸãƒ³ã‚°){return true;},text:"å…¨ã¦ã®å‘½ã‚’ç„¡ã¸ã€‚è‡ªã‚¿ãƒ¼ãƒ³ã®çµ‚ã‚ã‚Šã«ã“ã®ã‚«ãƒ¼ãƒ‰ä»¥å¤–ã®è‡ªåˆ†ã®å ´ã®ãƒ¢ãƒ³ã‚¹ã‚¿ãƒ¼ã‚’å…¨ã¦æ»…ã™ã‚‹",text_iro:[]};
                
                var burakkusyuukun={name:"ãƒ–ãƒ©ãƒƒã‚¯ã—ã‚…ã†ãã‚“",image:burakkusyuukun_image,ATK:0,HP:20,state:["ãƒ¢ãƒ³ã‚¹ã‚¿ãƒ¼","ã—ã‚…ã†ãã‚“"],effect_req:function(ã‚¿ã‚¤ãƒŸãƒ³ã‚°){return false;},effect:function(ã‚¿ã‚¤ãƒŸãƒ³ã‚°){},AI:function(ã‚¿ã‚¤ãƒŸãƒ³ã‚°){return true;},text:"é»’ã—ã‚…ã†ãã‚“ã€‚ãŠå‰ãŒèµ¤ã„ã ã‘ã ã‚ï¼",text_iro:[]};
                var hojoseki={name:"è£œåŠ©çŸ³",image:hojoseki_image,ATK:0,HP:10,state:["ãƒ¢ãƒ³ã‚¹ã‚¿ãƒ¼","ãƒ–ãƒ­ãƒƒã‚¯"],effect_req:function(ã‚¿ã‚¤ãƒŸãƒ³ã‚°){return false;},effect:function(ã‚¿ã‚¤ãƒŸãƒ³ã‚°){},AI:function(ã‚¿ã‚¤ãƒŸãƒ³ã‚°){return true;},text:"ç•°ä¸–ç•Œã«ã‚ã‚‹â€¦ãƒã‚¸ãƒƒã‚¯ã‚¹ãƒˆãƒ¼ãƒ³ã®é¡ã ã‚ã†ã‹ï¼Ÿæ¤…å­ãŒè¶³ã‚Šãªã„ã¨ãã¯å¸­ã«ã‚‚ãªã‚‹ã‚ˆã†ã ",text_iro:[]};
                var musyounoai={name:"ç„¡å„Ÿã®æ„›",image:musyounoai_image,state:["é­”æ³•","å‘³æ–¹é¸æŠ","ä½“åŠ›ä¸Šæ˜‡"],effect_req:function(ã‚¿ã‚¤ãƒŸãƒ³ã‚°){
                    if(ã‚¿ã‚¤ãƒŸãƒ³ã‚°=="æ‰‹æœ­ã‹ã‚‰"){
                        if(duel_phase!="ç›¸æ‰‹"){
                            for(let i=0;i<5;i++){
                                if(my_ba[i]!="" && my_ba[i].state.indexOf("ã—ã‚…ã†ãã‚“")!=-1){return true;}
                            }
                        }else{ for(let i=0;i<5;i++){if(teki_ba[i]!=""&& teki_ba[i].state.indexOf("ã—ã‚…ã†ãã‚“")!=-1){return true; }}
                        }
                        return false;  
                    }else{
                        return false;  
                    }  
                },effect:function(ã‚¿ã‚¤ãƒŸãƒ³ã‚°){
                    if(ã‚¿ã‚¤ãƒŸãƒ³ã‚°=="æ‰‹æœ­ã‹ã‚‰"){
                        if(duel_phase!="ç›¸æ‰‹"){if(my_ba[cursor2]!=""&& my_ba[cursor2].state.indexOf("ã—ã‚…ã†ãã‚“")!=-1){my_ba[cursor2].HP+=20;return true;}//é¸æŠç³»é­”æ³•ã¯æ­£ã—ãå‹•ã„ãŸã‚‰trueã‚’è¿”ã™ã“ã¨ï¼ 
                            return false; 
                        }else{var ä¸€ç•ªå…ƒæ°—ãªã‚«ãƒ¼ãƒ‰ã®æ•°å€¤=-1;
                            for(let i=0;i<5;i++){
                                if(teki_ba[i]!=""&& teki_ba[i].state.indexOf("ã—ã‚…ã†ãã‚“")!=-1){
                                    if(ä¸€ç•ªå…ƒæ°—ãªã‚«ãƒ¼ãƒ‰ã®æ•°å€¤<teki_ba[i].ATK){ 
                                        ä¸€ç•ªå…ƒæ°—ãªã‚«ãƒ¼ãƒ‰ã®æ•°å€¤=teki_ba[i].ATK;cursor2=i;} }}
                                        teki_ba[cursor2].HP+=20;
                        }
                    }
                },AI:function(ã‚¿ã‚¤ãƒŸãƒ³ã‚°){
                    return true;//å¼·ã„ã‚­ãƒ£ãƒ©ãŒã„ãªã„ã¨ä½¿ã‚ãªã„ã£ã¦ã»ã†ãŒè³¢ã„æ°—ã‚‚ã™ã‚‹ãŒã€æ°—ã«ã™ã‚‹ãªï¼
                },text:"è‡ªåˆ†ã®å ´ã®ã—ã‚…ã†ãã‚“ã‚’é¸ã‚“ã§ã€HP+20ã€Œ(*Â´Îµ`*)ï¾ï½­ï½¯ï¾ï½­ã€",text_iro:[]};
                var nitouryuukengi={name:"äºŒåˆ€æµå‰£æŠ€ï¼",image:nitouryuukengi_image,state:["é­”æ³•","å‘³æ–¹é¸æŠ","æ”»æ’ƒå›æ•°å¢—åŠ "],effect_req:function(ã‚¿ã‚¤ãƒŸãƒ³ã‚°){
                    if(ã‚¿ã‚¤ãƒŸãƒ³ã‚°=="æ‰‹æœ­ã‹ã‚‰"){
                        if(duel_phase!="ç›¸æ‰‹"){
                            for(let i=0;i<5;i++){
                                if(my_ba[i]!="" && my_ba[i].state.indexOf("ã—ã‚…ã†ãã‚“")!=-1){return true;}
                            }
                        }else{ for(let i=0;i<5;i++){if(teki_ba[i]!=""&& teki_ba[i].state.indexOf("ã—ã‚…ã†ãã‚“")!=-1){return true; }}
                        }
                        return false;  
                    }else{
                        return false;  
                    }  
                },effect:function(ã‚¿ã‚¤ãƒŸãƒ³ã‚°){
                    if(ã‚¿ã‚¤ãƒŸãƒ³ã‚°=="æ‰‹æœ­ã‹ã‚‰"){
                        if(duel_phase!="ç›¸æ‰‹"){if(my_ba[cursor2]!=""&& my_ba[cursor2].state.indexOf("ã—ã‚…ã†ãã‚“")!=-1){my_ba[cursor2].can_ATK+=1;return true;}//é¸æŠç³»é­”æ³•ã¯æ­£ã—ãå‹•ã„ãŸã‚‰trueã‚’è¿”ã™ã“ã¨ï¼ 
                            return false; 
                        }else{var ä¸€ç•ªå…ƒæ°—ãªã‚«ãƒ¼ãƒ‰ã®æ•°å€¤=-1;
                            for(let i=0;i<5;i++){
                                if(teki_ba[i]!=""&& teki_ba[i].state.indexOf("ã—ã‚…ã†ãã‚“")!=-1){
                                    if(ä¸€ç•ªå…ƒæ°—ãªã‚«ãƒ¼ãƒ‰ã®æ•°å€¤<teki_ba[i].ATK){ 
                                        ä¸€ç•ªå…ƒæ°—ãªã‚«ãƒ¼ãƒ‰ã®æ•°å€¤=teki_ba[i].ATK;cursor2=i;} }}
                                        teki_ba[cursor2].can_ATK+=1;
                        }
                    }    
                },AI:function(ã‚¿ã‚¤ãƒŸãƒ³ã‚°){
                    for(let i=0;i<5;i++){
                        if(teki_ba[i]!=""&& teki_ba[i].state.indexOf("ã—ã‚…ã†ãã‚“")!=-1 && teki_ba[i].ATK!=0){
                            return true; 
                        }
                    }
                    return false;
                },text:"è‡ªåˆ†ã®å ´ã®ã—ã‚…ã†ãã‚“ã‚’é¸ã³ã€ã“ã®ã‚¿ãƒ¼ãƒ³æ”»æ’ƒå¯èƒ½å›æ•°ãŒ+1ã•ã‚Œã‚‹",text_iro:[]};
                var sinennoai={name:"æ·±æ·µã®æ„›",image:sinennoai_image,state:["é­”æ³•","ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«å¥ªå–"],effect_req:function(ã‚¿ã‚¤ãƒŸãƒ³ã‚°){
                    if(ã‚¿ã‚¤ãƒŸãƒ³ã‚°=="æ‰‹æœ­ã‹ã‚‰"){
                        if(duel_phase!="ç›¸æ‰‹"){
                            if(ba_mons_num(my_ba)==5){//ã“ã‚Œä»¥ä¸Šå¥ªãˆãªã„
                                return false;  
                            }
                            for(let i=0;i<5;i++){
                                if(teki_ba[i]!="" && teki_ba[i].state.indexOf("ã—ã‚…ã†ãã‚“")!=-1){return true;}
                            }
                        }else{
                            if(ba_mons_num(teki_ba)==5){//ã“ã‚Œä»¥ä¸Šå¥ªãˆãªã„
                                return false;  
                            }
                            for(let i=0;i<5;i++){if(my_ba[i]!=""&& my_ba[i].state.indexOf("ã—ã‚…ã†ãã‚“")!=-1){return true; }}
                        }
                        return false;  
                    }else{
                        return false;  
                    }  
                },effect:function(ã‚¿ã‚¤ãƒŸãƒ³ã‚°){
                    if(ã‚¿ã‚¤ãƒŸãƒ³ã‚°=="æ‰‹æœ­ã‹ã‚‰"){
                        if(duel_phase!="ç›¸æ‰‹"){

                            for(let i=0;i<5;i++){
                                if(ba_mons_num(my_ba)==5){//ã“ã‚Œä»¥ä¸Šå¥ªãˆãªã„
                                        break;
                                }
                                if(teki_ba[i]!=""&& teki_ba[i].state.indexOf("ã—ã‚…ã†ãã‚“")!=-1){//ç›¸æ‰‹ã®ã—ã‚…ã†ãã‚“ã‚’æ¢ã™
                                    for(let j=0;j<5;j++){//ç©ºã„ã¦ã‚‹å ´ã‚’æ¢ã™
                                        if(my_ba[j]==""){
                                            my_ba[j]=teki_ba[i];
                                            teki_ba[i]="";
                                            my_ba[j].position="my_ba";
                                            my_ba[j].move=5;
                                            break;
                                        }
                                    }                                    
                                }
                            }
                        }else{
                            for(let i=0;i<5;i++){
                                if(ba_mons_num(teki_ba)==5){//ã“ã‚Œä»¥ä¸Šå¥ªãˆãªã„
                                        break;
                                }
                                if(my_ba[i]!=""&& my_ba[i].state.indexOf("ã—ã‚…ã†ãã‚“")!=-1){//ç›¸æ‰‹ã®ã—ã‚…ã†ãã‚“ã‚’æ¢ã™
                                    for(let j=0;j<5;j++){//ç©ºã„ã¦ã‚‹å ´ã‚’æ¢ã™
                                        if(teki_ba[j]==""){
                                            teki_ba[j]=my_ba[i];
                                            my_ba[i]="";
                                            teki_ba[j].position="teki_ba";
                                            teki_ba[j].move=5;
                                            break;
                                        }
                                    }                                    
                                }
                            }
                        }
                    }    
                },AI:function(ã‚¿ã‚¤ãƒŸãƒ³ã‚°){return true;},text:"ç›¸æ‰‹ã®å ´ã«ã„ã‚‹å…¨ã¦ã®ã—ã‚…ã†ãã‚“ã‚’å¥ªã†ã€‚ã€Œã“ã‚ŒãŒç§ã®æ„›ã§ã™ã‚ˆã€‚ã€",text_iro:[]};
                var tyoubusou={name:"è¶…æ­¦è£…ï¼",image:tyoubusou_image,state:["é­”æ³•","å‘³æ–¹é¸æŠ","æ”»æ’ƒä¸Šæ˜‡"],effect_req:function(ã‚¿ã‚¤ãƒŸãƒ³ã‚°){
                    if(ã‚¿ã‚¤ãƒŸãƒ³ã‚°=="æ‰‹æœ­ã‹ã‚‰"){
                        if(duel_phase!="ç›¸æ‰‹"){
                            for(let i=0;i<5;i++){
                                if(my_ba[i]!="" && my_ba[i].state.indexOf("ã—ã‚…ã†ãã‚“")!=-1){return true;}
                            }
                        }else{ for(let i=0;i<5;i++){if(teki_ba[i]!=""&& teki_ba[i].state.indexOf("ã—ã‚…ã†ãã‚“")!=-1){return true; }}
                        }
                        return false;  
                    }else{
                        return false;  
                    }  
                },effect:function(ã‚¿ã‚¤ãƒŸãƒ³ã‚°){
                    if(ã‚¿ã‚¤ãƒŸãƒ³ã‚°=="æ‰‹æœ­ã‹ã‚‰"){
                        if(duel_phase!="ç›¸æ‰‹"){if(my_ba[cursor2]!=""&& my_ba[cursor2].state.indexOf("ã—ã‚…ã†ãã‚“")!=-1){my_ba[cursor2].ATK+=10;return true;}//é¸æŠç³»é­”æ³•ã¯æ­£ã—ãå‹•ã„ãŸã‚‰trueã‚’è¿”ã™ã“ã¨ï¼ 
                            return false; 
                        }else{var ä¸€ç•ªå…ƒæ°—ãªã‚«ãƒ¼ãƒ‰ã®æ•°å€¤=-1;
                            for(let i=0;i<5;i++){
                                if(teki_ba[i]!=""&& teki_ba[i].state.indexOf("ã—ã‚…ã†ãã‚“")!=-1){
                                    if(ä¸€ç•ªå…ƒæ°—ãªã‚«ãƒ¼ãƒ‰ã®æ•°å€¤<teki_ba[i].ATK){ 
                                        ä¸€ç•ªå…ƒæ°—ãªã‚«ãƒ¼ãƒ‰ã®æ•°å€¤=teki_ba[i].ATK;cursor2=i;} }}
                                        teki_ba[cursor2].ATK+=10;
                        }
                    }
                },AI:function(ã‚¿ã‚¤ãƒŸãƒ³ã‚°){
                    return true;//å¼·ã„ã‚­ãƒ£ãƒ©ãŒã„ãªã„ã¨ä½¿ã‚ãªã„ã£ã¦ã»ã†ãŒè³¢ã„æ°—ã‚‚ã™ã‚‹ãŒã€æ°—ã«ã™ã‚‹ãªï¼
                },text:"è‡ªåˆ†ã®å ´ã®ã—ã‚…ã†ãã‚“ã‚’é¸ã‚“ã§ã€ATK+10ã€Œã‚„ã£ã±ã“ã‚ŒæŒã¤ã®ãŒä¸€ç•ªã¤ãˆãˆã€‚ã€",text_iro:[]};
                var yamiryuusyuu={name:"é—‡é¾ã€€ã‚·ãƒ¥ã‚¦",image:yamiryuusyuu_image,ATK:30,HP:40,state:["ãƒ¢ãƒ³ã‚¹ã‚¿ãƒ¼","ã—ã‚…ã†ãã‚“","ãƒ‰ãƒ©ã‚´ãƒ³"],effect_req:function(ã‚¿ã‚¤ãƒŸãƒ³ã‚°){return false;},effect:function(ã‚¿ã‚¤ãƒŸãƒ³ã‚°){},AI:function(ã‚¿ã‚¤ãƒŸãƒ³ã‚°){return true;},text:"é—‡ã®åŠ›ã‚’è§£æ”¾ã—ãŸã‚‰â€¦ã‚‚ã†ä¿ºã®å‹ã¡ãªã‚“ã ã‚ˆï¼",text_iro:[]};
                var yamika={name:"é—‡åŒ–",image:yamika_image,state:["é­”æ³•","å‘³æ–¹é¸æŠ","ä¸Šä½å¬å–š"],effect_req:function(ã‚¿ã‚¤ãƒŸãƒ³ã‚°){
                    if(ã‚¿ã‚¤ãƒŸãƒ³ã‚°=="æ‰‹æœ­ã‹ã‚‰"){
                        if(duel_phase!="ç›¸æ‰‹"){
                            for(let i=0;i<5;i++){
                                if(my_ba[i]!="" && my_ba[i].state.indexOf("ã—ã‚…ã†ãã‚“")!=-1 && my_ba[i].ATK>=20){return true;}
                            }
                        }else{ for(let i=0;i<5;i++){if(teki_ba[i]!=""&& teki_ba[i].state.indexOf("ã—ã‚…ã†ãã‚“")!=-1 && teki_ba[i].ATK>=20){return true; }}
                        }
                        return false;  
                    }else{
                        return false;  
                    }  
                },effect:function(ã‚¿ã‚¤ãƒŸãƒ³ã‚°){
                    if(ã‚¿ã‚¤ãƒŸãƒ³ã‚°=="æ‰‹æœ­ã‹ã‚‰"){
                        let ç¶™æ‰¿state=[];
                        if(duel_phase!="ç›¸æ‰‹"){
                            if(my_ba[cursor2]!=""&& my_ba[cursor2].state.indexOf("ã—ã‚…ã†ãã‚“")!=-1  && my_ba[cursor2].ATK>=20){
                                if(my_ba[cursor2].state.indexOf("TOP_ACE")!=-1){
                                    ç¶™æ‰¿state=["TOP_ACE"];
                                }else if(my_ba[cursor2].state.indexOf("ACE")!=-1){
                                    ç¶™æ‰¿state=["ACE"];
                                }
                                ç¶™æ‰¿state.push("ä¸Šä½å¬å–š");
                                my_ba[cursor2]=death_card(my_ba[cursor2],my_haka,cursor2);
                                ä¸Šä½å¬å–š(yamiryuusyuu,my_deck,cursor2,ç¶™æ‰¿state);//ã‚«ãƒ¼ãƒ‰ã®è¿½åŠ ã€å¬å–šã‚’è¡Œã„ã¾ã™ã€‚ã„ã„ã§ã™ã­ï¼Ÿãƒã‚¹ã‚¿ãƒ¼

                                return true;//é¸æŠç³»é­”æ³•ã¯æ­£ã—ãå‹•ã„ãŸã‚‰trueã‚’è¿”ã™ã“ã¨ï¼ 
                            }
                            return false; 
                        }else{
                            for(let i=0;i<5;i++){
                                if(teki_ba[i]!=""&& teki_ba[i].state.indexOf("ã—ã‚…ã†ãã‚“")!=-1  && teki_ba[i].ATK>=20){
                                    if(teki_ba[i].state.indexOf("TOP_ACE")!=-1){
                                        ç¶™æ‰¿state=["TOP_ACE"];
                                    }else if(teki_ba[i].state.indexOf("ACE")!=-1){
                                        ç¶™æ‰¿state=["ACE"];
                                    }
                                    ç¶™æ‰¿state.push("ä¸Šä½å¬å–š");
                                    teki_ba[i]=death_card(teki_ba[i],teki_haka,i);
                                    ä¸Šä½å¬å–š(yamiryuusyuu,teki_deck,i,ç¶™æ‰¿state);//ã‚«ãƒ¼ãƒ‰ã®è¿½åŠ ã€å¬å–šã‚’è¡Œã„ã¾ã™ã€‚ã„ã„ã§ã™ã­ï¼Ÿãƒã‚¹ã‚¿ãƒ¼

                                    return true;
                                }
                            }
                        }
                    }
                },AI:function(ã‚¿ã‚¤ãƒŸãƒ³ã‚°){
                    return true;//ä¸Šä½å¬å–šã—ãŸã‚‰å¼±ããªã‚‹ã¨ã‹ã‚ã‚Šãã†ã ãŒæ°—ã«ã™ã‚“ãªï¼
                },text:"è‡ªåˆ†ã®å ´ã®ATKãŒ20ä»¥ä¸Šã®ã—ã‚…ã†ãã‚“ã‚’é¸ã‚“ã§ã€é—‡ã®åŠ›ã‚’è§£æ”¾ã•ã›ã‚‹ã€Œè¦‹ã›ã¦ã‚„ã‚‹ã‚ˆï¼é—‡ã®åŠ›ã‚’ï¼ã€",text_iro:[]};
                var doragonburesu={name:"ãƒ‰ãƒ©ã‚´ãƒ³ãƒ»ãƒ–ãƒ¬ã‚¹",image:doragonburesu_image,state:["é­”æ³•","å‘³æ–¹é¸æŠ","æ•µãƒ€ãƒ¡ãƒ¼ã‚¸"],effect_req:function(ã‚¿ã‚¤ãƒŸãƒ³ã‚°){
                    if(ã‚¿ã‚¤ãƒŸãƒ³ã‚°=="æ‰‹æœ­ã‹ã‚‰"){
                        if(duel_phase!="ç›¸æ‰‹"){
                            for(let i=0;i<5;i++){
                                if(my_ba[i]!="" && my_ba[i].state.indexOf("ãƒ‰ãƒ©ã‚´ãƒ³")!=-1 && my_ba[i].can_ATK>=1){//ã“ã¡ã‚‰ã®å ´ã«æ”»æ’ƒå¯èƒ½ãªãƒ‰ãƒ©ã‚´ãƒ³ãŒã„ã‚‹
                                    for(let j=0;j<5;j++){
                                        if(teki_ba[j]!=""){return true; }//æ•µãŒä¸€äººã¯ã„ã‚‹â†’ç™ºå‹•å¯èƒ½
                                    }
                                }
                            }
                        }else{ 
                            for(let i=0;i<5;i++){
                                if(teki_ba[i]!="" && teki_ba[i].state.indexOf("ãƒ‰ãƒ©ã‚´ãƒ³")!=-1&& teki_ba[i].can_ATK>=1){//æ•µã®å ´ã«ã„ã‚‹
                                    for(let j=0;j<5;j++){
                                        if(my_ba[j]!=""){return true; }//å‘³æ–¹ãŒä¸€äººã¯ã„ã‚‹â†’ç™ºå‹•å¯èƒ½
                                    }
                                }
                            }
                        }
                        return false;  
                    }else{
                        return false;  
                    }  
                },effect:function(ã‚¿ã‚¤ãƒŸãƒ³ã‚°){
                    if(ã‚¿ã‚¤ãƒŸãƒ³ã‚°=="æ‰‹æœ­ã‹ã‚‰"){
                        if(duel_phase!="ç›¸æ‰‹"){
                            if(my_ba[cursor2]!="" && my_ba[cursor2].state.indexOf("ãƒ‰ãƒ©ã‚´ãƒ³")!=-1 && my_ba[cursor2].can_ATK>=1){//ã“ã¡ã‚‰ã®å ´ã«æ”»æ’ƒå¯èƒ½ãªãƒ‰ãƒ©ã‚´ãƒ³ãŒã„ã‚‹
                                
                                my_ba[cursor2].can_ATK-=1;
                                for(let i=0;i<5;i++){
                                    if(teki_ba[i]!=""){//æ•µã®å ´
                                        teki_ba[i].HP-=Math.floor(my_ba[cursor2].ATK/2);
                                        if(teki_ba[i].HP<=0){
                                            teki_ba[i]=death_card(teki_ba[i],teki_haka,i);
                                        }
                                    }
                                }
                                return true;//é¸æŠç³»é­”æ³•ã¯æ­£ã—ãå‹•ã„ãŸã‚‰trueã‚’è¿”ã™ã“ã¨ï¼ 
                            }
                        }else{
                            let ä¸€ç•ªå¼·ã„ã‚«ãƒ¼ãƒ‰ã®æ•°å€¤=-1;
                            for(let i=0;i<5;i++){
                                if(teki_ba[i]!="" && teki_ba[i].state.indexOf("ãƒ‰ãƒ©ã‚´ãƒ³")!=-1&& teki_ba[i].can_ATK>=1){//æ•µã®å ´ã«ã„ã‚‹
                                    if(teki_ba[i].ATK>ä¸€ç•ªå¼·ã„ã‚«ãƒ¼ãƒ‰ã®æ•°å€¤){
                                        ä¸€ç•ªå¼·ã„ã‚«ãƒ¼ãƒ‰ã®æ•°å€¤=teki_ba[i].ATK;
                                        cursor2=i;
                                    }
                                }
                            }

                            teki_ba[cursor2].can_ATK-=1;
                            for(let i=0;i<5;i++){
                                if(my_ba[i]!=""){//æ•µã®å ´
                                    my_ba[i].HP-=Math.floor(teki_ba[cursor2].ATK/2);
                                    if(my_ba[i].HP<=0){
                                        my_ba[i]=death_card(my_ba[i],my_haka,i);
                                    }
                                }
                            }
                            return true; 
                        }
                        return false; 
                    }
                },AI:function(ã‚¿ã‚¤ãƒŸãƒ³ã‚°){
                    return true;//æ”»æ’ƒåŠ›0ã®ãƒ‰ãƒ©ã‚´ãƒ³ãŒã„ãŸã‚‰ã©ã†ã™ã‚‹ã‚“ã§ã™ã‹ï¼Ÿâ†’ï¾”ï¾Š
                },text:"ã“ã¡ã‚‰ã®å ´ã®æ”»æ’ƒå¯èƒ½ãªãƒ‰ãƒ©ã‚´ãƒ³ãƒ¢ãƒ³ã‚¹ã‚¿ãƒ¼ã‚’é¸æŠã—ã€ãã®æ”»æ’ƒåŠ›ã®åŠåˆ†ã®ãƒ€ãƒ¡ãƒ¼ã‚¸ã‚’ç›¸æ‰‹ãƒ¢ãƒ³ã‚¹ã‚¿ãƒ¼ã™ã¹ã¦ã«ä¸ãˆã‚‹ï¼ãã®å¾Œã€æ”»æ’ƒå¯èƒ½å›æ•°-1",text_iro:[]};
                var zerozonbizu={name:"ZEROã‚¾ãƒ³ãƒ“s",image:zerozonbizu_image,state:["é­”æ³•","å¾©æ´»"],effect_req:function(ã‚¿ã‚¤ãƒŸãƒ³ã‚°){
                    if(ã‚¿ã‚¤ãƒŸãƒ³ã‚°=="æ‰‹æœ­ã‹ã‚‰"){
                        if(duel_phase!="ç›¸æ‰‹"){
                            if(ba_mons_num(my_ba)==5){//ã“ã‚Œä»¥ä¸Šå¾©æ´»ã—ãªã„
                                return false;  
                            }
                            for(let i=0;i<my_haka.length;i++){
                                if(my_haka[i].state.indexOf("ãƒ¢ãƒ³ã‚¹ã‚¿ãƒ¼")!=-1 && my_haka[i].card.ATK==0){//å¢“åœ°ã«ã‚‚ã¨ã‚‚ã¨ã®æ”»æ’ƒåŠ›0ã®ãƒ¢ãƒ³ã‚¹ã‚¿ãƒ¼ãŒã„ã‚‹
                                    return true;
                                }
                            }
                        }else{
                            if(ba_mons_num(teki_ba)==5){//ã“ã‚Œä»¥ä¸Šå¾©æ´»ã—ãªã„
                                return false;  
                            }
                            for(let i=0;i<teki_haka.length;i++){
                                if(teki_haka[i].state.indexOf("ãƒ¢ãƒ³ã‚¹ã‚¿ãƒ¼")!=-1 && teki_haka[i].card.ATK==0){//å¢“åœ°ã«ã‚‚ã¨ã‚‚ã¨ã®æ”»æ’ƒåŠ›0ã®ãƒ¢ãƒ³ã‚¹ã‚¿ãƒ¼ãŒã„ã‚‹
                                    return true;
                                }
                            }
                        }
                        return false;  
                    }else{
                        return false;  
                    }  
                },effect:function(ã‚¿ã‚¤ãƒŸãƒ³ã‚°){
                    if(ã‚¿ã‚¤ãƒŸãƒ³ã‚°=="æ‰‹æœ­ã‹ã‚‰"){
                        if(duel_phase!="ç›¸æ‰‹"){
                           
                            for(let i=0;i<my_haka.length;i++){
                                if(my_haka[i].state.indexOf("ãƒ¢ãƒ³ã‚¹ã‚¿ãƒ¼")!=-1 && my_haka[i].card.ATK==0){//å¢“åœ°ã«ã‚‚ã¨ã‚‚ã¨ã®æ”»æ’ƒåŠ›0ã®ãƒ¢ãƒ³ã‚¹ã‚¿ãƒ¼ãŒã„ã‚‹
                                    for(let j=0;j<5;j++){//ç©ºã„ã¦ã‚‹å ´ã‚’æ¢ã™
                                        if(my_ba[j]==""){
                                            è˜‡ç”Ÿ(my_ba,j,my_haka,i);
                                            i-=1;
                                            break;
                                        }
                                    }            
                                    if(ba_mons_num(my_ba)==5){//ã“ã‚Œä»¥ä¸Šå¢—ãˆãªã„
                                        break;
                                    }                    
                                }
                            }
                                    
                            
                        }else{
                            for(let i=0;i<teki_haka.length;i++){
                                if(teki_haka[i].state.indexOf("ãƒ¢ãƒ³ã‚¹ã‚¿ãƒ¼")!=-1 && teki_haka[i].card.ATK==0){//å¢“åœ°ã«ã‚‚ã¨ã‚‚ã¨ã®æ”»æ’ƒåŠ›0ã®ãƒ¢ãƒ³ã‚¹ã‚¿ãƒ¼ãŒã„ã‚‹
                                    for(let j=0;j<5;j++){//ç©ºã„ã¦ã‚‹å ´ã‚’æ¢ã™
                                        if(teki_ba[j]==""){
                                            è˜‡ç”Ÿ(teki_ba,j,teki_haka,i);
                                            i-=1;
                                            break;
                                        }
                                    }            
                                    if(ba_mons_num(teki_ba)==5){//ã“ã‚Œä»¥ä¸Šå¢—ãˆãªã„
                                        break;
                                    }                    
                                }
                            }
                        }
                    }    
                },AI:function(ã‚¿ã‚¤ãƒŸãƒ³ã‚°){return true;},text:"è‡ªåˆ†ã®å¢“ã«ã„ã‚‹æœ¬æ¥ã®æ”»æ’ƒåŠ›ãŒ0ã®ãƒ¢ãƒ³ã‚¹ã‚¿ãƒ¼ã‚’è˜‡ç”Ÿã—ã¾ãã‚‹",text_iro:[]};

                var ponyaaidoru={name:"ã½ã«ã‚ƒã‚¢ã‚¤ãƒ‰ãƒ«â™ª",image:ponyaaidoru_image,ATK:3,HP:10,state:["ãƒ¢ãƒ³ã‚¹ã‚¿ãƒ¼","ã½ã«ã‚ƒ"],effect_req:function(ã‚¿ã‚¤ãƒŸãƒ³ã‚°){return false;},effect:function(ã‚¿ã‚¤ãƒŸãƒ³ã‚°,option){
                    if(ã‚¿ã‚¤ãƒŸãƒ³ã‚°=="å¬å–šã•ã‚ŒãŸ"){
                        if(option[0]=="my_ba"){//å‘³æ–¹
                            for(let i=0;i<my_haka.length;i++){
                                     
                                if(my_haka[i].state.indexOf("ãƒ¢ãƒ³ã‚¹ã‚¿ãƒ¼")!=-1 && my_haka[i].state.indexOf("ã½ã«ã‚ƒ")!=-1){//å¢“åœ°ã«
                                    if(ba_mons_num(my_ba)==5){//ã“ã‚Œä»¥ä¸Šå¢—ãˆãªã„
                                        break;
                                    }   
                                    for(let j=0;j<5;j++){//ç©ºã„ã¦ã‚‹å ´ã‚’æ¢ã™
                                        if(my_ba[j]==""){
                                            è˜‡ç”Ÿ(my_ba,j,my_haka,i);
                                            i-=1;
                                            break;
                                        }
                                    }            
                                }
                            }
                        }else{
                            for(let i=0;i<teki_haka.length;i++){
                                if(teki_haka[i].state.indexOf("ãƒ¢ãƒ³ã‚¹ã‚¿ãƒ¼")!=-1 && teki_haka[i].state.indexOf("ã½ã«ã‚ƒ")!=-1){//å¢“åœ°ã«
                                    if(ba_mons_num(teki_ba)==5){//ã“ã‚Œä»¥ä¸Šå¢—ãˆãªã„
                                        break;
                                    }  
                                    for(let j=0;j<5;j++){//ç©ºã„ã¦ã‚‹å ´ã‚’æ¢ã™
                                        if(teki_ba[j]==""){
                                            è˜‡ç”Ÿ(teki_ba,j,teki_haka,i);
                                            i-=1;
                                            break;
                                        }
                                    }                 
                                }
                            }
                        }
                    }
                },AI:function(ã‚¿ã‚¤ãƒŸãƒ³ã‚°){return true;},text:"å¬å–šæ™‚ã€å¢“åœ°ã®ã½ã«ã‚ƒãƒ¢ãƒ³ã‚¹ã‚¿ãƒ¼ãŸã¡ã‚’å¾©æ´»ã•ã›ã‚‹ã€Œã¿ã‚“ãªï¼é›†ã¾ã‚Œãƒ¼ï¼ï¼ï¼ï¼ã€",text_iro:[]};
                var aidorukourin={name:"ã‚¢ã‚¤ãƒ‰ãƒ«é™è‡¨ï¼",image:aidorukourin_image,state:["é­”æ³•","å‘³æ–¹é¸æŠ","ä¸Šä½å¬å–š"],effect_req:function(ã‚¿ã‚¤ãƒŸãƒ³ã‚°){
                    if(ã‚¿ã‚¤ãƒŸãƒ³ã‚°=="æ‰‹æœ­ã‹ã‚‰"){
                        if(duel_phase!="ç›¸æ‰‹"){
                            for(let i=0;i<5;i++){
                                if(my_ba[i]!="" && my_ba[i].state.indexOf("ã½ã«ã‚ƒ")!=-1){return true;}
                            }
                        }else{ for(let i=0;i<5;i++){if(teki_ba[i]!=""&& teki_ba[i].state.indexOf("ã½ã«ã‚ƒ")!=-1){return true; }}
                        }
                        return false;  
                    }else{
                        return false;  
                    }  
                },effect:function(ã‚¿ã‚¤ãƒŸãƒ³ã‚°){
                    if(ã‚¿ã‚¤ãƒŸãƒ³ã‚°=="æ‰‹æœ­ã‹ã‚‰"){
                        let ç¶™æ‰¿state=[];
                        if(duel_phase!="ç›¸æ‰‹"){
                            if(my_ba[cursor2]!=""&& my_ba[cursor2].state.indexOf("ã½ã«ã‚ƒ")!=-1){
                                if(my_ba[cursor2].state.indexOf("TOP_ACE")!=-1){
                                    ç¶™æ‰¿state=["TOP_ACE"];
                                }else if(my_ba[cursor2].state.indexOf("ACE")!=-1){
                                    ç¶™æ‰¿state=["ACE"];
                                }
                                ç¶™æ‰¿state.push("ä¸Šä½å¬å–š");
                                my_ba[cursor2]=death_card(my_ba[cursor2],my_haka,cursor2);
                                ä¸Šä½å¬å–š(ponyaaidoru,my_deck,cursor2,ç¶™æ‰¿state);//ã‚«ãƒ¼ãƒ‰ã®è¿½åŠ ã€å¬å–šã‚’è¡Œã„ã¾ã™ã€‚ã„ã„ã§ã™ã­ï¼Ÿãƒã‚¹ã‚¿ãƒ¼

                                return true;//é¸æŠç³»é­”æ³•ã¯æ­£ã—ãå‹•ã„ãŸã‚‰trueã‚’è¿”ã™ã“ã¨ï¼ 
                            }
                            return false; 
                        }else{
                            for(let i=0;i<5;i++){
                                if(teki_ba[i]!=""&& teki_ba[i].state.indexOf("ã½ã«ã‚ƒ")!=-1){
                                    if(teki_ba[i].state.indexOf("TOP_ACE")!=-1){
                                        ç¶™æ‰¿state=["TOP_ACE"];
                                    }else if(teki_ba[i].state.indexOf("ACE")!=-1){
                                        ç¶™æ‰¿state=["ACE"];
                                    }
                                    ç¶™æ‰¿state.push("ä¸Šä½å¬å–š");
                                    teki_ba[i]=death_card(teki_ba[i],teki_haka,i);
                                    ä¸Šä½å¬å–š(ponyaaidoru,teki_deck,i,ç¶™æ‰¿state);//ã‚«ãƒ¼ãƒ‰ã®è¿½åŠ ã€å¬å–šã‚’è¡Œã„ã¾ã™ã€‚ã„ã„ã§ã™ã­ï¼Ÿãƒã‚¹ã‚¿ãƒ¼

                                    return true;
                                }
                            }
                        }
                    }
                },AI:function(ã‚¿ã‚¤ãƒŸãƒ³ã‚°){
                    return true;//ä¸Šä½å¬å–šã—ãŸã‚‰å¼±ããªã‚‹ã¨ã‹ã‚ã‚Šãã†ã ãŒæ°—ã«ã™ã‚“ãªï¼
                },text:"è‡ªåˆ†ã®å ´ã®ã½ã«ã‚ƒãƒ¢ãƒ³ã‚¹ã‚¿ãƒ¼1ä½“ãŒã‚¢ã‚¤ãƒ‰ãƒ«ãƒ‡ãƒ“ãƒ¥ãƒ¼ï¼ï¼Ÿã€Œå¢“åœ°ã®ã¿ã‚“ãªãƒ¼ï¼ãƒ©ã‚¤ãƒ–ãŒå§‹ã¾ã‚‹ã‚ˆãƒ¼ï¼ã€",text_iro:[]};
                var hametunosinkou={name:"ç ´æ»…ã®ä¿¡ä»°",image:hametunosinkou_image,state:["é­”æ³•","ä¸Šä½å¬å–š"],effect_req:function(ã‚¿ã‚¤ãƒŸãƒ³ã‚°){
                    if(ã‚¿ã‚¤ãƒŸãƒ³ã‚°=="æ‰‹æœ­ã‹ã‚‰"){
                        let ç‹‚ä¿¡è€…ã‚«ã‚¦ãƒ³ãƒˆ=0;
                        if(duel_phase!="ç›¸æ‰‹"){
                            for(let i=0;i<5;i++){
                                if(my_ba[i]!="" && my_ba[i].card.name=="ç‹‚ä¿¡è€…"){
                                    ç‹‚ä¿¡è€…ã‚«ã‚¦ãƒ³ãƒˆ+=1;
                                }
                            }
                        }else{ 
                            for(let i=0;i<5;i++){
                                if(teki_ba[i]!=""&& teki_ba[i].card.name=="ç‹‚ä¿¡è€…"){
                                    ç‹‚ä¿¡è€…ã‚«ã‚¦ãƒ³ãƒˆ+=1;
                                }
                            }
                        }
                        if(ç‹‚ä¿¡è€…ã‚«ã‚¦ãƒ³ãƒˆ>=5){
                            return true;
                        }else{
                            return false; 
                        }
                         
                    }else{
                        return false;  
                    }  
                },effect:function(ã‚¿ã‚¤ãƒŸãƒ³ã‚°){
                    if(ã‚¿ã‚¤ãƒŸãƒ³ã‚°=="æ‰‹æœ­ã‹ã‚‰"){
                        let ç¶™æ‰¿state=[];
                        if(duel_phase!="ç›¸æ‰‹"){
                            for(let i=0;i<5;i++){
                                if(my_ba[i]!="" && my_ba[i].card.name=="ç‹‚ä¿¡è€…"){//ã‚ã–ã‚ã–ç¢ºèªã™ã‚‹å¿…è¦ã¯ãªã„ã‚“ã§ã™ã‘ã©ã€ãƒ›ãƒ©ã€ã‚ã¨ã‹ã‚‰èª¿æ•´ã—ã‚„ã™ã„ã˜ã‚ƒãªã„ã§ã™ã‹
                                    if(my_ba[i].state.indexOf("TOP_ACE")!=-1){
                                        ç¶™æ‰¿state=["TOP_ACE"];
                                    }else if(my_ba[i].state.indexOf("ACE")!=-1){
                                        ç¶™æ‰¿state=["ACE"];
                                    }
                                    ç¶™æ‰¿state.push("ä¸Šä½å¬å–š");
                                    my_ba[i]=death_card(my_ba[i],my_haka,i);
                                    ä¸Šä½å¬å–š(hametunokami,my_deck,i,ç¶™æ‰¿state);//ã‚«ãƒ¼ãƒ‰ã®è¿½åŠ ã€å¬å–šã‚’è¡Œã„ã¾ã™ã€‚ã„ã„ã§ã™ã­ï¼Ÿãƒã‚¹ã‚¿ãƒ¼
                                    ç¶™æ‰¿state=[];
                                }
                            }
                            
                        }else{
                            for(let i=0;i<5;i++){
                                if(teki_ba[i]!="" && teki_ba[i].card.name=="ç‹‚ä¿¡è€…"){
                                    if(teki_ba[i].state.indexOf("TOP_ACE")!=-1){
                                        ç¶™æ‰¿state=["TOP_ACE"];
                                    }else if(teki_ba[i].state.indexOf("ACE")!=-1){
                                        ç¶™æ‰¿state=["ACE"];
                                    }
                                    ç¶™æ‰¿state.push("ä¸Šä½å¬å–š");
                                    teki_ba[i]=death_card(teki_ba[i],teki_haka,i);
                                    ä¸Šä½å¬å–š(hametunokami,teki_deck,i,ç¶™æ‰¿state);//ã‚«ãƒ¼ãƒ‰ã®è¿½åŠ ã€å¬å–šã‚’è¡Œã„ã¾ã™ã€‚ã„ã„ã§ã™ã­ï¼Ÿãƒã‚¹ã‚¿ãƒ¼
                                    ç¶™æ‰¿state=[];
                                }
                            }
                        }
                    }
                },AI:function(ã‚¿ã‚¤ãƒŸãƒ³ã‚°){
                    return true;//ä¸Šä½å¬å–šã—ãŸã‚‰å¼±ããªã‚‹ã¨ã‹ã‚ã‚Šãã†ã ãŒæ°—ã«ã™ã‚“ãªï¼â†ã“ã®ã‚«ãƒ¼ãƒ‰ã§ãã‚Œã¯ãªã„ã®ã§ã¯â€¦ï¼Ÿ
                },text:"ç ´æ»…ã¸ã¨é€²ã‚€ä¿¡ä»°ã€‚è‡ªåˆ†ã®å ´ã«ã„ã‚‹5äººã®ç‹‚ä¿¡è€…é”ã®ç¥ˆã‚ŠãŒå±Šãã¨ãã€ç¥ãŒç”Ÿã¾ã‚Œã‚‹ã€‚",text_iro:[]};
                var sentanseisei={name:"å…ˆç«¯å†ç”Ÿ",image:sentanseisei_image,state:["é­”æ³•","å‘³æ–¹é¸æŠ","ä¸Šä½å¬å–š"],effect_req:function(ã‚¿ã‚¤ãƒŸãƒ³ã‚°){
                    if(ã‚¿ã‚¤ãƒŸãƒ³ã‚°=="æ‰‹æœ­ã‹ã‚‰"){
                        if(duel_phase!="ç›¸æ‰‹"){
                            for(let i=0;i<5;i++){
                                if(my_ba[i]!="" && my_ba[i].card.name=="ä¸€è§’å¤§è›‡ã®è…¹"){return true;}
                            }
                        }else{ for(let i=0;i<5;i++){if(teki_ba[i]!=""&& teki_ba[i].card.name=="ä¸€è§’å¤§è›‡ã®è…¹"){return true; }}
                        }
                        return false;  
                    }else{
                        return false;  
                    }  
                },effect:function(ã‚¿ã‚¤ãƒŸãƒ³ã‚°){
                    if(ã‚¿ã‚¤ãƒŸãƒ³ã‚°=="æ‰‹æœ­ã‹ã‚‰"){
                        let ç¶™æ‰¿state=[];
                        if(duel_phase!="ç›¸æ‰‹"){
                            if(my_ba[cursor2]!=""&& my_ba[cursor2].card.name=="ä¸€è§’å¤§è›‡ã®è…¹"){
                                if(my_ba[cursor2].state.indexOf("TOP_ACE")!=-1){
                                    ç¶™æ‰¿state=["TOP_ACE"];
                                }else if(my_ba[cursor2].state.indexOf("ACE")!=-1){
                                    ç¶™æ‰¿state=["ACE"];
                                }
                                ç¶™æ‰¿state.push("ä¸Šä½å¬å–š");
                                my_ba[cursor2]=death_card(my_ba[cursor2],my_haka,cursor2);
                                ä¸Šä½å¬å–š(ikkakudaija_atama,my_deck,cursor2,ç¶™æ‰¿state);//ã‚«ãƒ¼ãƒ‰ã®è¿½åŠ ã€å¬å–šã‚’è¡Œã„ã¾ã™ã€‚ã„ã„ã§ã™ã­ï¼Ÿãƒã‚¹ã‚¿ãƒ¼

                                return true;//é¸æŠç³»é­”æ³•ã¯æ­£ã—ãå‹•ã„ãŸã‚‰trueã‚’è¿”ã™ã“ã¨ï¼ 
                            }
                            return false; 
                        }else{
                            for(let i=0;i<5;i++){
                                if(teki_ba[i]!=""&& teki_ba[i].card.name=="ä¸€è§’å¤§è›‡ã®è…¹"){
                                    if(teki_ba[i].state.indexOf("TOP_ACE")!=-1){
                                        ç¶™æ‰¿state=["TOP_ACE"];
                                    }else if(teki_ba[i].state.indexOf("ACE")!=-1){
                                        ç¶™æ‰¿state=["ACE"];
                                    }
                                    ç¶™æ‰¿state.push("ä¸Šä½å¬å–š");
                                    teki_ba[i]=death_card(teki_ba[i],teki_haka,i);
                                    ä¸Šä½å¬å–š(ikkakudaija_atama,teki_deck,i,ç¶™æ‰¿state);//ã‚«ãƒ¼ãƒ‰ã®è¿½åŠ ã€å¬å–šã‚’è¡Œã„ã¾ã™ã€‚ã„ã„ã§ã™ã­ï¼Ÿãƒã‚¹ã‚¿ãƒ¼

                                    return true;
                                }
                            }
                        }
                    }
                },AI:function(ã‚¿ã‚¤ãƒŸãƒ³ã‚°){
                    return true;//ä¸Šä½å¬å–šã—ãŸã‚‰å¼±ããªã‚‹ã¨ã‹ã‚ã‚Šãã†ã ãŒæ°—ã«ã™ã‚“ãªï¼
                },text:"ä¸€è§’å¤§è›‡ã®è„…å¨çš„ãªå†ç”ŸåŠ›ã¯ã€åˆ‡ã‚Šè½ã¨ã—ãŸè…¹éƒ¨ã‹ã‚‰æ–°ãŸãªé ­éƒ¨ã‚’ç”Ÿæˆã™ã‚‹",text_iro:[]};
                var ikkakudaija_2={name:"åŒé ­ã®ä¸€è§’å¤§è›‡",image:ikkakudaija_2_image,ATK:5,HP:45,state:["ãƒ¢ãƒ³ã‚¹ã‚¿ãƒ¼","ä¸€è§’å¤§è›‡","ä¸€è§’å¤§è›‡ã®å…ˆç«¯","ä¸€è§’å¤§è›‡ã®å…ˆç«¯"],effect_req:function(ã‚¿ã‚¤ãƒŸãƒ³ã‚°){return false;},effect:function(ã‚¿ã‚¤ãƒŸãƒ³ã‚°,option){},AI:function(ã‚¿ã‚¤ãƒŸãƒ³ã‚°){return true;},text:"åˆ‡ã‚Šè£‚ã„ãŸé ­éƒ¨ã‹ã‚‰ä¸æ°—å‘³ãªå£°ãŒè½Ÿãï¼ã€Œè‹¥é€ ãŒï¼ãã®ç¨‹åº¦ã®æ”»æ’ƒã§æˆ‘ãŒæ­»ã¬ã¨æ€ã£ãŸã‹ï¼ã€ä¸€è§’å¤§è›‡ã®å…ˆç«¯äºŒã¤ã¨ã—ã¦ã‚«ã‚¦ãƒ³ãƒˆã™ã‚‹ã€‚",text_iro:[]};
                var ittouryoudan={name:"ä¸€åˆ€ä¸¡æ–­",image:ittouryoudan_image,state:["é­”æ³•","å‘³æ–¹é¸æŠ","ä¸Šä½å¬å–š"],effect_req:function(ã‚¿ã‚¤ãƒŸãƒ³ã‚°){
                    if(ã‚¿ã‚¤ãƒŸãƒ³ã‚°=="æ‰‹æœ­ã‹ã‚‰"){
                        if(duel_phase!="ç›¸æ‰‹"){
                            for(let i=0;i<5;i++){
                                if(my_ba[i]!="" && my_ba[i].card.name=="ä¸€è§’å¤§è›‡ã®é ­"){return true;}
                            }
                        }else{ for(let i=0;i<5;i++){if(teki_ba[i]!=""&& teki_ba[i].card.name=="ä¸€è§’å¤§è›‡ã®é ­"){return true; }}
                        }
                        return false;  
                    }else{
                        return false;  
                    }  
                },effect:function(ã‚¿ã‚¤ãƒŸãƒ³ã‚°){
                    if(ã‚¿ã‚¤ãƒŸãƒ³ã‚°=="æ‰‹æœ­ã‹ã‚‰"){
                        let ç¶™æ‰¿state=[];
                        if(duel_phase!="ç›¸æ‰‹"){
                            if(my_ba[cursor2]!=""&& my_ba[cursor2].card.name=="ä¸€è§’å¤§è›‡ã®é ­"){
                                if(my_ba[cursor2].state.indexOf("TOP_ACE")!=-1){
                                    ç¶™æ‰¿state=["TOP_ACE"];
                                }else if(my_ba[cursor2].state.indexOf("ACE")!=-1){
                                    ç¶™æ‰¿state=["ACE"];
                                }
                                ç¶™æ‰¿state.push("ä¸Šä½å¬å–š");
                                my_ba[cursor2]=death_card(my_ba[cursor2],my_haka,cursor2);
                                ä¸Šä½å¬å–š(ikkakudaija_2,my_deck,cursor2,ç¶™æ‰¿state);//ã‚«ãƒ¼ãƒ‰ã®è¿½åŠ ã€å¬å–šã‚’è¡Œã„ã¾ã™ã€‚ã„ã„ã§ã™ã­ï¼Ÿãƒã‚¹ã‚¿ãƒ¼

                                return true;//é¸æŠç³»é­”æ³•ã¯æ­£ã—ãå‹•ã„ãŸã‚‰trueã‚’è¿”ã™ã“ã¨ï¼ 
                            }
                            return false; 
                        }else{
                            for(let i=0;i<5;i++){
                                if(teki_ba[i]!=""&& teki_ba[i].card.name=="ä¸€è§’å¤§è›‡ã®é ­"){
                                    if(teki_ba[i].state.indexOf("TOP_ACE")!=-1){
                                        ç¶™æ‰¿state=["TOP_ACE"];
                                    }else if(teki_ba[i].state.indexOf("ACE")!=-1){
                                        ç¶™æ‰¿state=["ACE"];
                                    }
                                    ç¶™æ‰¿state.push("ä¸Šä½å¬å–š");
                                    teki_ba[i]=death_card(teki_ba[i],teki_haka,i);
                                    ä¸Šä½å¬å–š(ikkakudaija_2,teki_deck,i,ç¶™æ‰¿state);//ã‚«ãƒ¼ãƒ‰ã®è¿½åŠ ã€å¬å–šã‚’è¡Œã„ã¾ã™ã€‚ã„ã„ã§ã™ã­ï¼Ÿãƒã‚¹ã‚¿ãƒ¼

                                    return true;
                                }
                            }
                        }
                    }
                },AI:function(ã‚¿ã‚¤ãƒŸãƒ³ã‚°){
                    return true;//ä¸Šä½å¬å–šã—ãŸã‚‰å¼±ããªã‚‹ã¨ã‹ã‚ã‚Šãã†ã ãŒæ°—ã«ã™ã‚“ãªï¼
                },text:"ã¤ã„ã«å‹‡è€…ã®å‰£ãŒè‡ªåˆ†ã®å ´ã«ã„ã‚‹ä¸€è§’å¤§è›‡ã®é ­ã‚’äºŒã¤ã«åˆ‡ã‚Šè£‚ãã€‚ã‚ãŸã‚Šã«é£›ã³æ•£ã‚‹å¤§é‡ã®è¡€ã®ä¸­ã§ã€ä¸å‰ãªäºˆæ„ŸãŒæ¼‚ã„å§‹ã‚ã‚‹â”€â”€â”€",text_iro:[]};
                var ponyasyoukansi={name:"ã½ã«ã‚ƒå¬å–šå£«",image:ponyasyoukansi_image,ATK:1,HP:1,state:["ãƒ¢ãƒ³ã‚¹ã‚¿ãƒ¼","ã½ã«ã‚ƒ"],effect_req:function(ã‚¿ã‚¤ãƒŸãƒ³ã‚°){return false;},effect:function(ã‚¿ã‚¤ãƒŸãƒ³ã‚°,option){
                    if(ã‚¿ã‚¤ãƒŸãƒ³ã‚°=="å¬å–šã•ã‚ŒãŸ"){
                        if(option[0]=="my_ba"){//å‘³æ–¹
                            for(let i=0;i<5;i++){//ç©ºã„ã¦ã‚‹å ´ã‚’æ¢ã™
                                if(my_ba[i]==""){
                                    ä¸Šä½å¬å–š(ponya,my_deck,i,[]);//ã“ã‚Œä¸Šä½å¬å–šã˜ã‚ƒã­ãˆã ã‚â†ã†ã‚‹ã¸ãƒ¼ï¼ã„ã¦ã¾ã†ã©ï¼
                                }    
                            }        
                        }else{
                            for(let i=0;i<5;i++){//ç©ºã„ã¦ã‚‹å ´ã‚’æ¢ã™
                                if(teki_ba[i]==""){
                                    ä¸Šä½å¬å–š(ponya,teki_deck,i,[]);//ã“ã‚Œä¸Šä½å¬å–šã˜ã‚ƒã­ãˆã ã‚â†ã†ã‚‹ã¸ãƒ¼ï¼ã„ã¦ã¾ã†ã©ï¼
                                }    
                            }    
                        }
                    }
                },AI:function(ã‚¿ã‚¤ãƒŸãƒ³ã‚°){return true;},text:"å¬å–šæ™‚ã€è‡ªåˆ†ã®å ´ã®ç©ºã„ã¦ã‚‹ã¨ã“ã‚ã«ã½ã«ã‚ƒãŒã„ã£ã±ã„â€¦ã†ã‚ï¼ã“ã£ã¡ã¾ã§æ¥ãŸãï¼",text_iro:[]};
                var zousyoku={name:"å¢—æ®–â€¦ï¼ï¼Ÿ",image:zousyoku_image,state:["é­”æ³•","å‘³æ–¹é¸æŠ","çŠ¶æ…‹ä»˜ä¸"],effect_req:function(ã‚¿ã‚¤ãƒŸãƒ³ã‚°){
                    if(ã‚¿ã‚¤ãƒŸãƒ³ã‚°=="æ‰‹æœ­ã‹ã‚‰"){
                        if(duel_phase!="ç›¸æ‰‹"){
                            for(let i=0;i<5;i++){
                                if(my_ba[i]!="" && my_ba[i].state.indexOf("ã½ã«ã‚ƒ")!=-1){return true;}
                            }
                        }else{ for(let i=0;i<5;i++){if(teki_ba[i]!=""&& teki_ba[i].state.indexOf("ã½ã«ã‚ƒ")!=-1){return true; }}
                        }
                        return false;  
                    }else{
                        return false;  
                    }  
                },effect:function(ã‚¿ã‚¤ãƒŸãƒ³ã‚°){
                    if(ã‚¿ã‚¤ãƒŸãƒ³ã‚°=="æ‰‹æœ­ã‹ã‚‰"){
                        let ç¶™æ‰¿state=[];
                        if(duel_phase!="ç›¸æ‰‹"){
                            if(my_ba[cursor2]!=""&& my_ba[cursor2].state.indexOf("ã½ã«ã‚ƒ")!=-1){
                                my_ba[cursor2].state.push("ã½ã«ã‚ƒ");
                                my_ba[cursor2].state.push("ã½ã«ã‚ƒ");

                                return true;//é¸æŠç³»é­”æ³•ã¯æ­£ã—ãå‹•ã„ãŸã‚‰trueã‚’è¿”ã™ã“ã¨ï¼ 
                            }
                            return false; 
                        }else{
                            for(let i=0;i<5;i++){
                                if(teki_ba[i]!=""&& teki_ba[i].state.indexOf("ã½ã«ã‚ƒ")!=-1){
                                    teki_ba[i].state.push("ã½ã«ã‚ƒ");
                                    teki_ba[i].state.push("ã½ã«ã‚ƒ");

                                    return true;
                                }
                            }
                        }
                    }
                },AI:function(ã‚¿ã‚¤ãƒŸãƒ³ã‚°){
                    return true;//ä¸Šä½å¬å–šã—ãŸã‚‰å¼±ããªã‚‹ã¨ã‹ã‚ã‚Šãã†ã ãŒæ°—ã«ã™ã‚“ãªï¼
                },text:"è‡ªåˆ†ã®å ´ã®ã½ã«ã‚ƒä¸€ä½“ã‚’é¸ã³â€¦é¸ã³â€¦ãªã‚“ã‹ã‚¢ã‚¤ãƒ„2ä½“åˆ†å¢—ãˆãŸã¿ãŸã„ã«ãªã£ã¦ã¾ã›ã‚“ã‹ï¼Ÿ",text_iro:[]};
                var sukurappugoremu={name:"ã‚¹ã‚¯ãƒ©ãƒƒãƒ—ã‚´ãƒ¼ãƒ¬ãƒ ",image:sukurappugoremu_image,ATK:0,HP:2,state:["ãƒ¢ãƒ³ã‚¹ã‚¿ãƒ¼","ã‚¹ã‚¯ãƒ©ãƒƒãƒ—"],effect_req:function(ã‚¿ã‚¤ãƒŸãƒ³ã‚°){return false;},effect:function(ã‚¿ã‚¤ãƒŸãƒ³ã‚°,option){
                    if(ã‚¿ã‚¤ãƒŸãƒ³ã‚°=="å¬å–šã•ã‚ŒãŸ"){
                        let ç¶™æ‰¿æ”»æ’ƒåŠ›_index=option[1].state.indexOf("ç¶™æ‰¿æ”»æ’ƒåŠ›")+1;
                        let ç¶™æ‰¿ä½“åŠ›_index=option[1].state.indexOf("ç¶™æ‰¿ä½“åŠ›")+1;
                        if(ç¶™æ‰¿æ”»æ’ƒåŠ›_index!=0){
                            option[1].ATK+=option[1].state[ç¶™æ‰¿æ”»æ’ƒåŠ›_index];
                            option[1].HP+=option[1].state[ç¶™æ‰¿ä½“åŠ›_index];
                        }
                        
                    }
                },AI:function(ã‚¿ã‚¤ãƒŸãƒ³ã‚°){return true;},text:"å¬å–šæ™‚ã€ç´ æã¨ãªã£ãŸæ©Ÿæ¢°ã®èƒ½åŠ›å€¤ã‚’å¾—ã‚‹",text_iro:[]};
                var sukurappubirudo={name:"ã‚¹ã‚¯ãƒ©ãƒƒãƒ—&ãƒ“ãƒ«ãƒ‰",image:sukurappubirudo_image,state:["é­”æ³•","ä¸Šä½å¬å–š"],effect_req:function(ã‚¿ã‚¤ãƒŸãƒ³ã‚°){
                    if(ã‚¿ã‚¤ãƒŸãƒ³ã‚°=="æ‰‹æœ­ã‹ã‚‰"){
                        if(duel_phase!="ç›¸æ‰‹"){
                            for(let i=0;i<5;i++){
                                if(my_ba[i]!="" && my_ba[i].state.indexOf("æ©Ÿæ¢°")!=-1){return true;}
                            }
                        }else{ for(let i=0;i<5;i++){if(teki_ba[i]!=""&& teki_ba[i].state.indexOf("æ©Ÿæ¢°")!=-1){return true; }}
                        }
                        return false;  
                    }else{
                        return false;  
                    }  
                },effect:function(ã‚¿ã‚¤ãƒŸãƒ³ã‚°){
                    if(ã‚¿ã‚¤ãƒŸãƒ³ã‚°=="æ‰‹æœ­ã‹ã‚‰"){
                        let ç¶™æ‰¿state=[];
                        let ç¶™æ‰¿æ”»æ’ƒåŠ›=0;
                        let ç¶™æ‰¿ä½“åŠ›=0;
                        if(duel_phase!="ç›¸æ‰‹"){
                            for(let i=0;i<5;i++){
                                if(my_ba[i]!="" && my_ba[i].state.indexOf("æ©Ÿæ¢°")!=-1){
                                    if(ç¶™æ‰¿state!=["TOP_ACE"]){//ã¾ã‚åˆ¥ã«ãªãã¦ã‚‚ã„ã„ã‘ã©â€¦
                                        if(my_ba[i].state.indexOf("TOP_ACE")!=-1){
                                            ç¶™æ‰¿state=["TOP_ACE"];
                                        }else if(my_ba[i].state.indexOf("ACE")!=-1){
                                            ç¶™æ‰¿state=["ACE"];
                                        }
                                    }
                                    ç¶™æ‰¿æ”»æ’ƒåŠ›+=my_ba[i].ATK;
                                    ç¶™æ‰¿ä½“åŠ›+=my_ba[i].HP;
                                    my_ba[i]=death_card(my_ba[i],my_haka,i);
                                }
                            }
                            ç¶™æ‰¿state.push("ä¸Šä½å¬å–š");
                            ç¶™æ‰¿state.push("ç¶™æ‰¿æ”»æ’ƒåŠ›");
                            ç¶™æ‰¿state.push(ç¶™æ‰¿æ”»æ’ƒåŠ›);
                            ç¶™æ‰¿state.push("ç¶™æ‰¿ä½“åŠ›");
                            ç¶™æ‰¿state.push(ç¶™æ‰¿ä½“åŠ›);
                            for(let i=0;i<5;i++){
                                if(my_ba[i]==""){
                                    ä¸Šä½å¬å–š(sukurappugoremu,my_deck,i,ç¶™æ‰¿state);//ã‚«ãƒ¼ãƒ‰ã®è¿½åŠ ã€å¬å–šã‚’è¡Œã„ã¾ã™ã€‚ã„ã„ã§ã™ã­ï¼Ÿãƒã‚¹ã‚¿ãƒ¼
                                    break;
                                }
                            }
                            
                        }else{
                            for(let i=0;i<5;i++){
                                if(teki_ba[i]!="" && teki_ba[i].state.indexOf("æ©Ÿæ¢°")!=-1){
                                    if(ç¶™æ‰¿state!=["TOP_ACE"]){//ã¾ã‚åˆ¥ã«ãªãã¦ã‚‚ã„ã„ã‘ã©â€¦
                                        if(teki_ba[i].state.indexOf("TOP_ACE")!=-1){
                                            ç¶™æ‰¿state=["TOP_ACE"];
                                        }else if(teki_ba[i].state.indexOf("ACE")!=-1){
                                            ç¶™æ‰¿state=["ACE"];
                                        }
                                    }
                                    ç¶™æ‰¿æ”»æ’ƒåŠ›+=teki_ba[i].ATK;
                                    ç¶™æ‰¿ä½“åŠ›+=teki_ba[i].HP;
                                    teki_ba[i]=death_card(teki_ba[i],teki_haka,i);
                                }
                            }
                            ç¶™æ‰¿state.push("ä¸Šä½å¬å–š");
                            ç¶™æ‰¿state.push("ç¶™æ‰¿æ”»æ’ƒåŠ›");
                            ç¶™æ‰¿state.push(ç¶™æ‰¿æ”»æ’ƒåŠ›);
                            ç¶™æ‰¿state.push("ç¶™æ‰¿ä½“åŠ›");
                            ç¶™æ‰¿state.push(ç¶™æ‰¿ä½“åŠ›);
                            for(let i=0;i<5;i++){
                                if(teki_ba[i]==""){
                                    ä¸Šä½å¬å–š(sukurappugoremu,teki_deck,i,ç¶™æ‰¿state);//ã‚«ãƒ¼ãƒ‰ã®è¿½åŠ ã€å¬å–šã‚’è¡Œã„ã¾ã™ã€‚ã„ã„ã§ã™ã­ï¼Ÿãƒã‚¹ã‚¿ãƒ¼
                                    break;
                                }
                            }
                        }
                    }
                },AI:function(ã‚¿ã‚¤ãƒŸãƒ³ã‚°){
                    return true;//ä¸Šä½å¬å–šã—ãŸã‚‰å¼±ããªã‚‹ã¨ã‹ã‚ã‚Šãã†ã ãŒæ°—ã«ã™ã‚“ãªï¼
                },text:"è‡ªåˆ†ã®å ´ã«ã„ã‚‹å…¨ã¦ã®æ©Ÿæ¢°ãƒ¢ãƒ³ã‚¹ã‚¿ãƒ¼ã‚’ç²‰ç •ã—ã€ã‚¹ã‚¯ãƒ©ãƒƒãƒ—ã®å·¨äººã‚’ç”Ÿã¿å‡ºã™",text_iro:[]};


                //å…¨ã¦ã®ã‚«ãƒ¼ãƒ‰ã‚’å‚ç…§ã§ãã‚‹é…åˆ—â€¦æ‰‹å‹•ã§è¿½åŠ ã—ã¦ã„ã£ã¦ãã ã•ã„ã€‚!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!ğŸ‘‡ğŸ‘‡ğŸ‘‡ğŸ‘‡ğŸ‘‡ğŸ‘‡ğŸ‘‡ğŸ‘‡ğŸ‘‡ğŸ‘‡ğŸ‘‡ğŸ‘‡ğŸ‘‡ğŸ‘‡ğŸ‘‡ğŸ‘‡ğŸ‘‡ğŸ‘‡ğŸ‘‡ğŸ‘‡
                all_card=[test_card,test_card2,syuukun,hojorobo,kinkyuujitai5,ryuunoitigeki,powerup3,HPup5,ponya,ponya_ace,yakuso_3,kameisi,kametetu,henyamotin,ponya_sutoraiku,ponya_big,ponya_daburu,ponya_rein,sasori,sasori_seitai,ikkakudaija_atama,ikkakudaija_hara,ikkakudaija_yubi,kyuukoukasakusenki,atakkumojuru,kaihukumojuru,sukurappudoro,buiwa,raihudaiya,seiretu,kyuusainote,kenrounarusoukou,zettainotamasii,kyousinja,hametunokami,burakkusyuukun,hojoseki,musyounoai,nitouryuukengi,sinennoai,tyoubusou,yamiryuusyuu,yamika,doragonburesu,zerozonbizu,ponyaaidoru,aidorukourin,hametunosinkou,sentanseisei,ikkakudaija_2,ittouryoudan,ponyasyoukansi,zousyoku,sukurappugoremu,sukurappubirudo];

                //ãƒ‡ãƒƒã‚­çµ„ã‚‚ã†ãœï¼
                var test_list={card_list:[[HPup5,1],[powerup3,2],[test_card2,4],[syuukun,1]],ACE:[test_card2,test_card2],TOP_ACE:[syuukun]};
                var zako_list={card_list:[[test_card2,5]],ACE:[test_card2,test_card2,test_card2,test_card2],TOP_ACE:[test_card2]};
                
                var ponya_list={card_list:[[ponya,5],[ponya_ace,2],[yakuso_3,3]],ACE:[ponya_ace,ponya_ace],TOP_ACE:[ponya]};
                var kameisi_list={card_list:[[kameisi,6],[kametetu,1],[yakuso_3,3]],ACE:[kametetu],TOP_ACE:[kameisi]};
                var henyamotin_list={card_list:[[henyamotin,15]],ACE:[],TOP_ACE:[]};

                var sasori_list={card_list:[[sasori,10],[sasori_seitai,4]],ACE:[sasori_seitai,sasori_seitai],TOP_ACE:[sasori]};
                var ikkakudaija_list={card_list:[[ikkakudaija_atama,1],[ikkakudaija_hara,10],[ikkakudaija_yubi,1]],ACE:[ikkakudaija_yubi],TOP_ACE:[ikkakudaija_atama,ikkakudaija_hara,ikkakudaija_hara]};
                var buiwa_list={card_list:[[buiwa,5],[raihudaiya,3],[seiretu,10],[ryuunoitigeki,3]],ACE:[],TOP_ACE:[buiwa,buiwa,seiretu,seiretu,seiretu,seiretu,seiretu,seiretu,seiretu,seiretu,seiretu,seiretu]};
                var zettainotamasii_list={card_list:[[zettainotamasii,1],[kenrounarusoukou,2],[kyuusainote,2]],ACE:[],TOP_ACE:[zettainotamasii,kenrounarusoukou,kenrounarusoukou,kyuusainote,kyuusainote]};
                var hametu_list={card_list:[[kyousinja,15],[hametunokami,1]],ACE:[hametunokami],TOP_ACE:[kyousinja,kyousinja,kyousinja,kyousinja,kyousinja]};
                
                var burakku_list={card_list:[[burakkusyuukun,1],[hojoseki,3],[yamika,1],[zerozonbizu,1],[doragonburesu,2],[musyounoai,4],[sinennoai,2],[nitouryuukengi,3],[tyoubusou,2]],ACE:[zerozonbizu,tyoubusou,hojoseki],TOP_ACE:[burakkusyuukun,hojoseki,hojoseki,yamika,musyounoai,sinennoai,tyoubusou]};
                //ãƒ‘ãƒƒã‚¯
                var ã½ã«ã‚ƒãƒ‘ãƒƒã‚¯=[ponya,ponya,ponya,ponya,ponya,ponya,ponya,ponya,ponya_ace,ponya_ace,ponya_ace,ponya_ace,ponya_sutoraiku,ponya_sutoraiku,ponya_big,ponya_big,ponya_daburu,ponya_daburu,ponya_rein,ponya_rein,HPup5,HPup5,powerup3,ryuunoitigeki,ryuunoitigeki,ryuunoitigeki,kinkyuujitai5,kyuukoukasakusenki,kyuukoukasakusenki,kyuukoukasakusenki,kyuukoukasakusenki,atakkumojuru,atakkumojuru,kaihukumojuru,kaihukumojuru,sukurappudoro,sukurappudoro,henyamotin,henyamotin,henyamotin,henyamotin];
                var ä¸Šä½å¬å–šãƒ‘ãƒƒã‚¯=[aidorukourin,aidorukourin,aidorukourin,zousyoku,zousyoku,ponyasyoukansi,ponyasyoukansi,hametunosinkou,kyousinja,kyousinja,kyousinja,sentanseisei,sentanseisei,sentanseisei,ittouryoudan,ittouryoudan,ikkakudaija_hara,ikkakudaija_hara,ikkakudaija_hara,ikkakudaija_hara,sukurappubirudo,sukurappubirudo,sukurappubirudo,raihudaiya,raihudaiya,raihudaiya,raihudaiya];
                //ã“ã“ã‹ã‚‰ãƒ­ãƒ¼ãƒ‰ã€ãªã‚“ã§ä¸€å€‹ãšã¤ã‚„ã£ã¦ã‚‹ã®ã‹ã¨ã„ã†ã¨ã€é–‹ç™ºä¸­ã¯ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã«ã‚ˆã£ã¦ã‚»ãƒ¼ãƒ–ãƒ‡ãƒ¼ã‚¿ãŒã‚ã£ãŸã‚Šãªã‹ã£ãŸã‚Šã™ã‚‹ã‹ã‚‰ã€ãƒã‚°ã‚‹ã€‚
                //å…¨ãƒ‡ãƒ¼ã‚¿æ¶ˆå»();
                if(localStorage.getItem('æ‰€æŒã‚«ãƒ¼ãƒ‰')){//ã‚»ãƒ¼ãƒ–ãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚‹ã­
                    æ‰€æŒã‚«ãƒ¼ãƒ‰ã®ãƒ­ãƒ¼ãƒ‰();
                }else{
                    æ‰€æŒã‚«ãƒ¼ãƒ‰=[[HPup5,3],[powerup3,2],[syuukun,1],[hojorobo,2]];
                    æ‰€æŒã‚«ãƒ¼ãƒ‰ã®ã‚»ãƒ¼ãƒ–();
                }

                if(localStorage.getItem('deck_list')){//ã‚»ãƒ¼ãƒ–ãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚‹ã­
                    ãƒ‡ãƒƒã‚­ã®ãƒ­ãƒ¼ãƒ‰();
                }else{
                    //åˆæœŸæ‰€æŒã‚«ãƒ¼ãƒ‰
                    deck_list={card_list:[[HPup5,3],[powerup3,2],[syuukun,1],[hojorobo,2]],ACE:[hojorobo,powerup3],TOP_ACE:[syuukun]};
                    ãƒ‡ãƒƒã‚­ã®ã‚»ãƒ¼ãƒ–();
                }
                
                if(localStorage.getItem('ä¿å­˜ãƒ‡ãƒƒã‚­')){//ã‚»ãƒ¼ãƒ–ãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚‹ã­
                    ä¿å­˜ãƒ‡ãƒƒã‚­ã®èª­ã¿è¾¼ã¿();
                }else{
                    ä¿å­˜ãƒ‡ãƒƒã‚­ã®ä¿å­˜();//ã‚²ãƒ¼ãƒ ãƒ‡ãƒ¼ã‚¿ã‚»ãƒ¼ãƒ–
                }
                
                if(localStorage.getItem('MAX_STAGE')){//ã‚»ãƒ¼ãƒ–ãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚‹ã­
                    MAX_STAGE=localStorage.getItem('MAX_STAGE');
                    MAX_STAGE=Number(MAX_STAGE);
                    stage=MAX_STAGE;
                }else{
                    localStorage.setItem('MAX_STAGE',MAX_STAGE);//ã‚²ãƒ¼ãƒ ãƒ‡ãƒ¼ã‚¿ã‚»ãƒ¼ãƒ–
                }

                if(localStorage.getItem('MAX_ACE')){//ã‚»ãƒ¼ãƒ–ãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚‹ã­
                    MAX_ACE=localStorage.getItem('MAX_ACE');
                    MAX_ACE=Number(MAX_ACE);
                }else{
                    localStorage.setItem('MAX_ACE',MAX_ACE);//ã‚²ãƒ¼ãƒ ãƒ‡ãƒ¼ã‚¿ã‚»ãƒ¼ãƒ–
                }

                if(localStorage.getItem('MAX_TOP_ACE')){//ã‚»ãƒ¼ãƒ–ãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚‹ã­
                    MAX_TOP_ACE=localStorage.getItem('MAX_TOP_ACE');
                    MAX_TOP_ACE=Number(MAX_TOP_ACE);
                }else{
                    localStorage.setItem('MAX_TOP_ACE',MAX_TOP_ACE);//ã‚²ãƒ¼ãƒ ãƒ‡ãƒ¼ã‚¿ã‚»ãƒ¼ãƒ–
                }

                if(localStorage.getItem('ãŠé‡‘')){//ã‚»ãƒ¼ãƒ–ãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚‹ã­
                    ãŠé‡‘=localStorage.getItem('ãŠé‡‘');
                    ãŠé‡‘=Number(ãŠé‡‘);
                }else{
                    localStorage.setItem('ãŠé‡‘',ãŠé‡‘);//ã‚²ãƒ¼ãƒ ãƒ‡ãƒ¼ã‚¿ã‚»ãƒ¼ãƒ–
                }

                if(localStorage.getItem('MAX_deck')){//ã‚»ãƒ¼ãƒ–ãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚‹ã­
                    MAX_deck=localStorage.getItem('MAX_deck');
                    MAX_deck=Number(MAX_deck);
                }else{
                    localStorage.setItem("MAX_deck",MAX_deck);//ã‚²ãƒ¼ãƒ ãƒ‡ãƒ¼ã‚¿ã‚»ãƒ¼ãƒ–
                }

                if(localStorage.getItem('my_pull')){//ã‚»ãƒ¼ãƒ–ãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚‹ã­
                    my_pull=localStorage.getItem('my_pull');
                    my_pull=Number(my_pull);
                }else{
                    localStorage.setItem('my_pull',my_pull);//ã‚²ãƒ¼ãƒ ãƒ‡ãƒ¼ã‚¿ã‚»ãƒ¼ãƒ–
                }
                
                if(localStorage.getItem('my_deck_pull')){//ã‚»ãƒ¼ãƒ–ãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚‹ã­
                    my_deck_pull=localStorage.getItem('my_deck_pull');
                    my_deck_pull=Number(my_deck_pull);
                }else{
                    my_deck_pull=my_pull;
                    localStorage.setItem('my_deck_pull',my_deck_pull);//ã‚²ãƒ¼ãƒ ãƒ‡ãƒ¼ã‚¿ã‚»ãƒ¼ãƒ–
                }

                
                //ãŠé‡‘=99999;
                //deck_list={card_list:[],ACE:[],TOP_ACE:[]};
                //ponya_list={card_list:[[ponyaaidoru,10],[ponya,10],[ponya_big,10]],ACE:[],TOP_ACE:[]};
                //ponya_list=deck_list;
                //æ‰€æŒã‚«ãƒ¼ãƒ‰=[[ponya_sutoraiku,5],[ponya_daburu,5]];
                //game_phase="ãƒ‡ãƒƒã‚­ç·¨é›†";
                //sub_phase="ãƒ‡ãƒƒã‚­ãƒªã‚¹ãƒˆ";
                //cursor=1;
                //mini_stage=0;
                //game_phase="æŒ‘æˆ¦";
                //stage=4;
                //MAX_TOP_ACE=15;
                //--------------------------------------------------------------------------------------------------------/--------------------------------------------------------------------------------------------------------
                setInterval(function(){//1ç§’ã«nå›å‹•ããï¼
                    time+=1;
                    if(time==1000){
                        time=0;
                    }

                    if(game_phase=="ã‚¿ã‚¤ãƒˆãƒ«"){
                        if(key_interval<=0 && key_input!=""){//ã‚­ãƒ¼ãŒé•·æŠ¼ã—ã•ã‚Œã¦ã„ã‚‹å ´åˆã¯key_intervalãŒ0ã«ãªã£ã¦ã¦ã€ã‚­ãƒ¼æ“ä½œãŒé£›ã‚“ã§ããŸã‚‰
                            key_interval=5;//30*n/1000[s]ã®é–“ã€é•·æŠ¼ã—ã§ã®é€£ç¶šå…¥åŠ›ã‚’ç„¡åŠ¹ã€‚
                            
                            æ¼”å‡ºã‚«ã‚¦ãƒ³ãƒˆ+=1;
                            é•·æŠ¼ã—é˜»æ­¢=1;
                            ctx.fillStyle="rgb(50,50,50)";
                        }
                        ctx.drawImage(title_image,0,0);
                        cursor=2;
                        if(æ¼”å‡ºã‚«ã‚¦ãƒ³ãƒˆ>=0){
                            æ¼”å‡ºã‚«ã‚¦ãƒ³ãƒˆ+=1;
                            ctx.fillRect(0,0,æ¼”å‡ºã‚«ã‚¦ãƒ³ãƒˆ*200,1000);
                        }
                        if(æ¼”å‡ºã‚«ã‚¦ãƒ³ãƒˆ>5){
                            game_phase="ã‚¹ãƒ†ãƒ¼ã‚¸é¸æŠ";
                            æ¼”å‡ºã‚«ã‚¦ãƒ³ãƒˆ=-11;
                        }
                        //game_phase="æŒ‘æˆ¦";
                    }else if(game_phase=="ã‚¹ãƒ†ãƒ¼ã‚¸é¸æŠ"){
                        if(key_interval<=0 && key_input!=""){//ã‚­ãƒ¼ãŒé•·æŠ¼ã—ã•ã‚Œã¦ã„ã‚‹å ´åˆã¯key_intervalãŒ0ã«ãªã£ã¦ã¦ã€ã‚­ãƒ¼æ“ä½œãŒé£›ã‚“ã§ããŸã‚‰
                            key_interval=5;//30*n/1000[s]ã®é–“ã€é•·æŠ¼ã—ã§ã®é€£ç¶šå…¥åŠ›ã‚’ç„¡åŠ¹ã€‚
                            for(let i=0;i<key_input.length;i++){
                                if(key_input.charAt(i)=="â†‘"){
                                    if(cursor==2 || cursor==3){
                                        cursor=0;
                                    }else if(cursor==4){
                                        cursor=1;
                                    }
                                }else if(key_input.charAt(i)=="â†"){
                                    if(cursor==1 || cursor==3 || cursor==4){
                                        cursor-=1;
                                    }
                                }else if(key_input.charAt(i)=="â†’"){
                                    if(cursor==0 || cursor==2 || cursor==3){
                                        cursor+=1;
                                    }
                                }else if(key_input.charAt(i)=="â†“"){
                                    if(cursor==0){
                                        cursor=2;
                                    }else if(cursor==1){
                                        cursor=4;
                                    }
                                }else if(key_input.charAt(i)=="ã€‡" && é•·æŠ¼ã—é˜»æ­¢==0){
                                    é•·æŠ¼ã—é˜»æ­¢=1;
                                    if(cursor==2){
                                        next_phase="ãƒ‡ãƒƒã‚­ç·¨é›†æº–å‚™";
                                        æ¼”å‡ºã‚«ã‚¦ãƒ³ãƒˆ=-20;
                                    }else if(cursor==3 && stage<=4){//å®Ÿè£…æ¸ˆã¿ã‚¹ãƒ†ãƒ¼ã‚¸æ•°ã‚ˆã‚Šå¤§ããã—ãªã„ã“ã¨ã€‚
                                        next_phase="æŒ‘æˆ¦";
                                        æ¼”å‡ºã‚«ã‚¦ãƒ³ãƒˆ=1;
                                        mini_stage=0;
                                    }else if(cursor==4 && MAX_STAGE!=1){//ãŠåº—
                                        next_phase="ãŠåº—æº–å‚™";
                                        æ¼”å‡ºã‚«ã‚¦ãƒ³ãƒˆ=-30;
                                    }else if(cursor==0){//æˆ»ã‚‹
                                        if(stage==1){
                                            stage=MAX_STAGE;
                                        }else{
                                            stage-=1;
                                        }
                                    }else if(cursor==1){//é€²ã‚€
                                        if(stage==MAX_STAGE){
                                            
                                            stage=1;
                                        }else{
                                            stage+=1;
                                        }
                                    }
                                }else if(key_input.charAt(i)=="Ã—" && é•·æŠ¼ã—é˜»æ­¢==0){
                                    é•·æŠ¼ã—é˜»æ­¢=1;
                                }
                                
                            }
                            if(key_owarasete==1){//ã‚‚ã†ãƒœã‚¿ãƒ³æŠ¼ã—ã¦ãªã„ã€‚æŠ¼ã—ã¦ãªã„ã¨ãã¯ã‚¤ãƒ™ãƒ³ãƒˆãã‚“ã§æ¤œçŸ¥ã™ã‚‹ã‚“ã ã‘ã©ã€å®Ÿè¡Œã‚ˆã‚Šã‚‚å…ˆã«ã‚¤ãƒ™ãƒ³ãƒˆãŒå‘¼ã°ã‚Œã¦ãŸã‚‰ã—ã‹ãŸãªã„ã®ã§ã“ã„ã¤ã§æ­¢ã‚ã‚‹
                                key_input="";
                                key_interval=0;
                            }
                            
                        }else if(key_interval>0){
                            key_interval=key_interval-1;//ã‚«ã‚¦ãƒ³ãƒˆãƒ€ã‚¦ãƒ³
                        }

                        if(é•·æŠ¼ã—é˜»æ­¢==1 && (key_input.indexOf("ã€‡")==-1 && key_input.indexOf("Ã—")==-1)){//ã€‡Ã—ãƒœã‚¿ãƒ³ã®é•·æŠ¼ã—é€£æ‰“é˜»æ­¢ã€‚
                            é•·æŠ¼ã—é˜»æ­¢=0; 
                        }

                        
                        
                        
                        ctx.fillStyle="rgb(50,50,50)";
                        ctx.fillRect(0,0,1000,100);
                        ctx.font = "50px  'ï¼­ï¼³ ã‚´ã‚·ãƒƒã‚¯'";//ãƒ•ã‚©ãƒ³ãƒˆè¨­å®šã€‚å·¦ã®ãƒ•ã‚©ãƒ³ãƒˆãŒãªã„ã¨å³ã®ãƒ•ã‚©ãƒ³ãƒˆã‚’é©ç”¨ã™ã‚‹ã‚‰ã—ã„ã€‚
                        ctx.fillStyle="rgb(255,255,255)";
                        ctx.fillText("ã‚¹ãƒ†ãƒ¼ã‚¸é¸æŠ", 325, 70);
                        ctx.fillText("â–¶", 750, 70);
                        ctx.fillText("â—€", 200, 70);
                        ctx.fillStyle="rgb(255,255,255)";
                        ctx.fillRect(0,800,1000,200);
                        ctx.fillStyle="rgb(50,50,50)";
                        ctx.fillRect(0,800,1000,5);
                        ctx.fillRect(200,825,5,150);
                        ctx.fillRect(800,825,5,150);
                        ctx.font = "30px  'ï¼­ï¼³ ã‚´ã‚·ãƒƒã‚¯'";//ãƒ•ã‚©ãƒ³ãƒˆè¨­å®šã€‚å·¦ã®ãƒ•ã‚©ãƒ³ãƒˆãŒãªã„ã¨å³ã®ãƒ•ã‚©ãƒ³ãƒˆã‚’é©ç”¨ã™ã‚‹ã‚‰ã—ã„ã€‚
                        ctx.fillText("ãƒ‡ãƒƒã‚­ç·¨é›†", 20, 880);
                        ctx.drawImage(yamahuda,68,900);
                        ctx.font = "100px  'ï¼­ï¼³ ã‚´ã‚·ãƒƒã‚¯'";//ãƒ•ã‚©ãƒ³ãƒˆè¨­å®šã€‚å·¦ã®ãƒ•ã‚©ãƒ³ãƒˆãŒãªã„ã¨å³ã®ãƒ•ã‚©ãƒ³ãƒˆã‚’é©ç”¨ã™ã‚‹ã‚‰ã—ã„ã€‚
                        ctx.fillText("æŒ‘æˆ¦", 400, 930);
                        ctx.font = "30px  'ï¼­ï¼³ ã‚´ã‚·ãƒƒã‚¯'";//ãƒ•ã‚©ãƒ³ãƒˆè¨­å®šã€‚å·¦ã®ãƒ•ã‚©ãƒ³ãƒˆãŒãªã„ã¨å³ã®ãƒ•ã‚©ãƒ³ãƒˆã‚’é©ç”¨ã™ã‚‹ã‚‰ã—ã„ã€‚
                        ctx.fillText(ãŠé‡‘, 860, 988);
                        ctx.drawImage(okane,820,960);

                        if(MAX_STAGE>1){//ãŠåº—ã¯1ã‚’ã‚¯ãƒªã‚¢ã—ã¦ã‹ã‚‰è¡¨ç¤º
                            ctx.save();
                            ctx.scale(2,2);
                            ctx.drawImage(omise_image,420,410);
                            ctx.restore();
                        }
                        

                        if(stage==1){
                            ctx.drawImage(henyamoti_title,0,100);
                        }else if(stage==2){
                            ctx.drawImage(saiten_title,0,100);
                        }else if(stage==3){
                            ctx.drawImage(burakku_title,0,100);
                        }else if(stage==4){
                            ctx.drawImage(hujounomori_title,0,100);
                        }else{
                            ctx.drawImage(junbityuu_title,0,100);
                        }
                        
                        if(stage<MAX_STAGE){
                            ctx.drawImage(kuria,600,70);
                        }

                        if(cursor==0){
                            ctx.drawImage(yubi,150,80+4*Math.sin(time*Math.PI/8));
                        }else if(cursor==1){
                            ctx.drawImage(yubi,700,80+4*Math.sin(time*Math.PI/8));
                        }else if(cursor==2){
                            ctx.save();
                            ctx.rotate(180 * Math.PI / 180);
                            ctx.drawImage(yubi,-160,-850+4*Math.sin(time*Math.PI/8));
                            ctx.restore();
                        }else if(cursor==3){
                            ctx.save();
                            ctx.rotate(180 * Math.PI / 180);
                            ctx.drawImage(yubi,-560,-850+4*Math.sin(time*Math.PI/8));
                            ctx.restore();
                        }else if(cursor==4){
                            ctx.save();
                            ctx.rotate(180 * Math.PI / 180);
                            ctx.drawImage(yubi,-960,-850+4*Math.sin(time*Math.PI/8));
                            ctx.restore();
                        }

                        
                        

                        ctx.fillStyle="rgb(50,50,50)";
                        if(æ¼”å‡ºã‚«ã‚¦ãƒ³ãƒˆ<-26 && æ¼”å‡ºã‚«ã‚¦ãƒ³ãƒˆ>-31){
                            æ¼”å‡ºã‚«ã‚¦ãƒ³ãƒˆ+=1;
                            ctx.fillRect(-5000-æ¼”å‡ºã‚«ã‚¦ãƒ³ãƒˆ*200,0,6000+æ¼”å‡ºã‚«ã‚¦ãƒ³ãƒˆ*200,1000);
                        }

                        if(æ¼”å‡ºã‚«ã‚¦ãƒ³ãƒˆ<-20 && æ¼”å‡ºã‚«ã‚¦ãƒ³ãƒˆ>-25){
                            æ¼”å‡ºã‚«ã‚¦ãƒ³ãƒˆ-=1;
                            ctx.fillRect(-4000-æ¼”å‡ºã‚«ã‚¦ãƒ³ãƒˆ*200,0,5000+æ¼”å‡ºã‚«ã‚¦ãƒ³ãƒˆ*200,1000);
                        }

                        if(æ¼”å‡ºã‚«ã‚¦ãƒ³ãƒˆ<-16 && æ¼”å‡ºã‚«ã‚¦ãƒ³ãƒˆ>-21){
                            æ¼”å‡ºã‚«ã‚¦ãƒ³ãƒˆ+=1;
                            ctx.fillRect(0,0,4000+æ¼”å‡ºã‚«ã‚¦ãƒ³ãƒˆ*200,1000);
                        }

                        if(æ¼”å‡ºã‚«ã‚¦ãƒ³ãƒˆ<-10 && æ¼”å‡ºã‚«ã‚¦ãƒ³ãƒˆ>-15){
                            æ¼”å‡ºã‚«ã‚¦ãƒ³ãƒˆ-=1;
                            ctx.fillRect(0,0,3000+æ¼”å‡ºã‚«ã‚¦ãƒ³ãƒˆ*200,1000);
                        }
                        if(æ¼”å‡ºã‚«ã‚¦ãƒ³ãƒˆ<0 && æ¼”å‡ºã‚«ã‚¦ãƒ³ãƒˆ>-5){
                            æ¼”å‡ºã‚«ã‚¦ãƒ³ãƒˆ-=1;
                            ctx.fillRect(0,0,1000,1000+æ¼”å‡ºã‚«ã‚¦ãƒ³ãƒˆ*200);
                        }
                        if(æ¼”å‡ºã‚«ã‚¦ãƒ³ãƒˆ>0){
                            æ¼”å‡ºã‚«ã‚¦ãƒ³ãƒˆ+=1;
                            ctx.fillRect(0,0,1000,æ¼”å‡ºã‚«ã‚¦ãƒ³ãƒˆ*200);
                        }
                        if(æ¼”å‡ºã‚«ã‚¦ãƒ³ãƒˆ==6 || æ¼”å‡ºã‚«ã‚¦ãƒ³ãƒˆ==-16 || æ¼”å‡ºã‚«ã‚¦ãƒ³ãƒˆ==-26 ){
                            game_phase=next_phase;
                            æ¼”å‡ºã‚«ã‚¦ãƒ³ãƒˆ=-1;
                            cursor2=0;
                            ç‰¹æ®ŠçŠ¶æ…‹=[];
                        }

                    }else if(game_phase=="æŒ‘æˆ¦"){
                        
                        if(stage==1){//ã¸ã«ã‚ƒã‚‚ã¡ã‚“è‰åŸ
                            if(key_interval<=0 && key_input!=""){//ã‚­ãƒ¼ãŒé•·æŠ¼ã—ã•ã‚Œã¦ã„ã‚‹å ´åˆã¯key_intervalãŒ0ã«ãªã£ã¦ã¦ã€ã‚­ãƒ¼æ“ä½œãŒé£›ã‚“ã§ããŸã‚‰
                                key_interval=5;//30*n/1000[s]ã®é–“ã€é•·æŠ¼ã—ã§ã®é€£ç¶šå…¥åŠ›ã‚’ç„¡åŠ¹ã€‚
                                for(let i=0;i<key_input.length;i++){
                                    if(key_input.charAt(i)=="â†‘"){
                                    }else if(key_input.charAt(i)=="â†"){
                                        if(mini_stage==2 || mini_stage==3){
                                            mini_stage=(mini_stage+1)%2+2;
                                        }
                                        if(mini_stage==5){
                                            cursor2=(cursor2+1)%2;
                                        }
                                    }else if(key_input.charAt(i)=="â†’"){
                                        if(mini_stage==2 || mini_stage==3){
                                            mini_stage=(mini_stage+1)%2+2;
                                        }
                                        if(mini_stage==5){
                                            cursor2=(cursor2+1)%2;
                                        }
                                    }else if(key_input.charAt(i)=="â†“"){
                                    }else if(key_input.charAt(i)=="ã€‡" && é•·æŠ¼ã—é˜»æ­¢==0){
                                        é•·æŠ¼ã—é˜»æ­¢=1;
                                        if(mini_stage==0){
                                            next_phase="æˆ¦é—˜æº–å‚™";
                                            æ¼”å‡ºã‚«ã‚¦ãƒ³ãƒˆ=1;
                                            teki_deck_list=ponya_list;//ä½¿ç”¨ãƒ‡ãƒƒã‚­
                                            teki_pull=2;//ãƒ‰ãƒ­ãƒ¼æšæ•°
                                            next_mini_stage=1;//ã‚¯ãƒªã‚¢ã§ããŸã‚‰ã“ã‚ŒãŒä½¿ã‚ã‚Œã‚‹ã£ã¦ã“ã¨ã•ã€‚
                                            drop_gold=10;//ãŠé‡‘ãƒ¼ï¼
                                        }else if(mini_stage==1){
                                            next_phase="æˆ¦é—˜æº–å‚™";
                                            æ¼”å‡ºã‚«ã‚¦ãƒ³ãƒˆ=1;
                                            teki_deck_list=kameisi_list;//ä½¿ç”¨ãƒ‡ãƒƒã‚­
                                            teki_pull=2;//ãƒ‰ãƒ­ãƒ¼æšæ•°
                                            next_mini_stage=2;//ã‚¯ãƒªã‚¢ã§ããŸã‚‰ã“ã‚ŒãŒä½¿ã‚ã‚Œã‚‹ã£ã¦ã“ã¨ã•ã€‚
                                            drop_gold=15;//ãŠé‡‘ãƒ¼ï¼
                                        }else if(mini_stage==2){
                                            mini_stage=4;
                                            ç‰¹æ®ŠçŠ¶æ…‹.push("æ”»æ’ƒ+1");
                                        }else if(mini_stage==3){
                                            mini_stage=4;
                                            ç‰¹æ®ŠçŠ¶æ…‹.push("ä½“åŠ›+1");
                                        }else if(mini_stage==4){
                                            next_phase="æˆ¦é—˜æº–å‚™";
                                            æ¼”å‡ºã‚«ã‚¦ãƒ³ãƒˆ=1;
                                            teki_deck_list=henyamotin_list;//ä½¿ç”¨ãƒ‡ãƒƒã‚­
                                            teki_pull=1;//ãƒ‰ãƒ­ãƒ¼æšæ•°
                                            next_mini_stage=5;//ã‚¯ãƒªã‚¢ã§ããŸã‚‰ã“ã‚ŒãŒä½¿ã‚ã‚Œã‚‹ã£ã¦ã“ã¨ã•ã€‚
                                            drop_gold=20;//ãŠé‡‘ãƒ¼ï¼
                                        }else if(mini_stage==5){
                                            if(cursor2==0){
                                                åˆå›ã‚¯ãƒªã‚¢ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ•ãƒ©ã‚°=0;
                                                next_phase="ã‚¹ãƒ†ãƒ¼ã‚¸é¸æŠ";
                                                æ¼”å‡ºã‚«ã‚¦ãƒ³ãƒˆ=1;
                                                cursor=2;
                                            }else{
                                                key_input="";//ãªã‚“ã‹ã“ã‚Œãªã„ã¨ãƒœã‚¿ãƒ³æ“ä½œãŒã„ã‹ã‚Œã‚‹
                                                URL_tweet_text="https://twitter.com/intent/tweet?text=ã¸ã«ã‚ƒã‚‚ã¡ã‚“ãã†ã’ã‚“ã‚’çªç ´ã—ãŸï¼%0A%0A"+document.title+"%0A"+document.URL+"&hashtags=Syuukun_Card";//%0Aã§æ”¹è¡Œ
                                                window.open( URL_tweet_text, '_blank'); 
                                            }
                                            
                                        }
                                    }else if(key_input.charAt(i)=="Ã—" && é•·æŠ¼ã—é˜»æ­¢==0){
                                        é•·æŠ¼ã—é˜»æ­¢=1;
                                    }
                                    
                                }
                                if(key_owarasete==1){//ã‚‚ã†ãƒœã‚¿ãƒ³æŠ¼ã—ã¦ãªã„ã€‚æŠ¼ã—ã¦ãªã„ã¨ãã¯ã‚¤ãƒ™ãƒ³ãƒˆãã‚“ã§æ¤œçŸ¥ã™ã‚‹ã‚“ã ã‘ã©ã€å®Ÿè¡Œã‚ˆã‚Šã‚‚å…ˆã«ã‚¤ãƒ™ãƒ³ãƒˆãŒå‘¼ã°ã‚Œã¦ãŸã‚‰ã—ã‹ãŸãªã„ã®ã§ã“ã„ã¤ã§æ­¢ã‚ã‚‹
                                    key_input="";
                                    key_interval=0;
                                }
                                
                            }else if(key_interval>0){
                                key_interval=key_interval-1;//ã‚«ã‚¦ãƒ³ãƒˆãƒ€ã‚¦ãƒ³
                            }

                            if(é•·æŠ¼ã—é˜»æ­¢==1 && (key_input.indexOf("ã€‡")==-1 && key_input.indexOf("Ã—")==-1)){//ã€‡Ã—ãƒœã‚¿ãƒ³ã®é•·æŠ¼ã—é€£æ‰“é˜»æ­¢ã€‚
                                é•·æŠ¼ã—é˜»æ­¢=0; 
                            }
                            
                            ctx.drawImage(henyamoti,0,0);
                            if(mini_stage==0){
                                ctx.save();
                                ctx.rotate(180 * Math.PI / 180);
                                ctx.drawImage(yubi,-250,-800+4*Math.sin(time*Math.PI/8));
                                ctx.restore();
                            }else if(mini_stage==1){
                                ctx.drawImage(yubi,400,750+4*Math.sin(time*Math.PI/8));
                            }else if(mini_stage==2){
                                ctx.drawImage(yubi,250,500+4*Math.sin(time*Math.PI/8));
                            }else if(mini_stage==3){
                                ctx.drawImage(yubi,550,500+4*Math.sin(time*Math.PI/8));
                            }else if(mini_stage==4){
                                ctx.drawImage(yubi,400,220+4*Math.sin(time*Math.PI/8));
                            }else if(mini_stage==5){//ã‚¯ãƒªã‚¢ã ã€‚ãŠã‚ã§ã¨ã†ã€‚
                                ctx.fillStyle="rgb(0,0,0,0.75)";
                                ctx.fillRect(0,0,1000,1000);
                                ctx.drawImage(henyamotin_kuria,0,0);
                                ctx.fillStyle="rgb(255,255,255)";
                                ctx.fillRect(50,700,900,250);

                                ctx.font = "50px  'ï¼­ï¼³ ã‚´ã‚·ãƒƒã‚¯'";//ãƒ•ã‚©ãƒ³ãƒˆè¨­å®šã€‚å·¦ã®ãƒ•ã‚©ãƒ³ãƒˆãŒãªã„ã¨å³ã®ãƒ•ã‚©ãƒ³ãƒˆã‚’é©ç”¨ã™ã‚‹ã‚‰ã—ã„ã€‚
                                ctx.fillStyle="rgb(0,0,0)";
                                ctx.fillText("ã‚¹ãƒ†ãƒ¼ã‚¸é¸æŠã¸", 200, 930);
                                ctx.fillText("ãƒ„ã‚¤ãƒ¼ãƒˆ", 700, 930);

                                ctx.save();
                                ctx.rotate(90 * Math.PI / 180);
                                if(cursor2==0){
                                    ctx.drawImage(yubi,850,-190+4*Math.sin(time*Math.PI/8));
                                }else{
                                    ctx.drawImage(yubi,850,-690+4*Math.sin(time*Math.PI/8));
                                }
                                ctx.restore();
                             
                                if(MAX_STAGE==1){
                                    åˆå›ã‚¯ãƒªã‚¢ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ•ãƒ©ã‚°=1;
                                    MAX_STAGE=2;
                                    MAX_ACE+=1;
                                    localStorage.setItem('MAX_STAGE',MAX_STAGE);//ã‚²ãƒ¼ãƒ ãƒ‡ãƒ¼ã‚¿ã‚»ãƒ¼ãƒ–
                                    localStorage.setItem('MAX_ACE',MAX_ACE);//ã‚²ãƒ¼ãƒ ãƒ‡ãƒ¼ã‚¿ã‚»ãƒ¼ãƒ–
                                }
                                if(åˆå›ã‚¯ãƒªã‚¢ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ•ãƒ©ã‚°==1){
                                    ctx.fillText("ACEè¨­å®šå¯èƒ½æ•°ãŒ1å¢—ãˆã¾ã—ãŸï¼", 100, 780);
                                }
                            }
                            ctx.scale(2, 2);
                            tokusyu_hyouji(20,20);
                            ctx.scale(0.5, 0.5);
                        }else if(stage==2){//åŠ›ã®ç¥­å…¸
                            if(key_interval<=0 && key_input!=""){//ã‚­ãƒ¼ãŒé•·æŠ¼ã—ã•ã‚Œã¦ã„ã‚‹å ´åˆã¯key_intervalãŒ0ã«ãªã£ã¦ã¦ã€ã‚­ãƒ¼æ“ä½œãŒé£›ã‚“ã§ããŸã‚‰
                                key_interval=5;//30*n/1000[s]ã®é–“ã€é•·æŠ¼ã—ã§ã®é€£ç¶šå…¥åŠ›ã‚’ç„¡åŠ¹ã€‚
                                for(let i=0;i<key_input.length;i++){
                                    if(key_input.charAt(i)=="â†‘"){
                                    }else if(key_input.charAt(i)=="â†"){
                                        if(mini_stage==5){
                                            cursor2=(cursor2+1)%2;
                                        }
                                    }else if(key_input.charAt(i)=="â†’"){
                                        if(mini_stage==5){
                                            cursor2=(cursor2+1)%2;
                                        }
                                    }else if(key_input.charAt(i)=="â†“"){
                                    }else if(key_input.charAt(i)=="ã€‡" && é•·æŠ¼ã—é˜»æ­¢==0){
                                        é•·æŠ¼ã—é˜»æ­¢=1;
                                        if(mini_stage==0){
                                            next_phase="æˆ¦é—˜æº–å‚™";
                                            æ¼”å‡ºã‚«ã‚¦ãƒ³ãƒˆ=1;
                                            teki_deck_list=sasori_list;//ä½¿ç”¨ãƒ‡ãƒƒã‚­
                                            teki_pull=2;//ãƒ‰ãƒ­ãƒ¼æšæ•°
                                            next_mini_stage=1;//ã‚¯ãƒªã‚¢ã§ããŸã‚‰ã“ã‚ŒãŒä½¿ã‚ã‚Œã‚‹ã£ã¦ã“ã¨ã•ã€‚
                                            drop_gold=30;//ãŠé‡‘ãƒ¼ï¼

                                            
                                        }else if(mini_stage==1){
                                            next_phase="æˆ¦é—˜æº–å‚™";
                                            æ¼”å‡ºã‚«ã‚¦ãƒ³ãƒˆ=1;
                                            teki_deck_list=ikkakudaija_list;//ä½¿ç”¨ãƒ‡ãƒƒã‚­
                                            teki_pull=2;//ãƒ‰ãƒ­ãƒ¼æšæ•°
                                            next_mini_stage=2;//ã‚¯ãƒªã‚¢ã§ããŸã‚‰ã“ã‚ŒãŒä½¿ã‚ã‚Œã‚‹ã£ã¦ã“ã¨ã•ã€‚
                                            drop_gold=50;//ãŠé‡‘ãƒ¼ï¼

                                        }else if(mini_stage==2){
                                            next_phase="æˆ¦é—˜æº–å‚™";
                                            æ¼”å‡ºã‚«ã‚¦ãƒ³ãƒˆ=1;
                                            teki_deck_list=buiwa_list;//ä½¿ç”¨ãƒ‡ãƒƒã‚­
                                            teki_pull=1;//ãƒ‰ãƒ­ãƒ¼æšæ•°
                                            next_mini_stage=3;//ã‚¯ãƒªã‚¢ã§ããŸã‚‰ã“ã‚ŒãŒä½¿ã‚ã‚Œã‚‹ã£ã¦ã“ã¨ã•ã€‚
                                            drop_gold=70;//ãŠé‡‘ãƒ¼ï¼
                                        }else if(mini_stage==3){
                                            next_phase="æˆ¦é—˜æº–å‚™";
                                            æ¼”å‡ºã‚«ã‚¦ãƒ³ãƒˆ=1;
                                            teki_deck_list=zettainotamasii_list;//ä½¿ç”¨ãƒ‡ãƒƒã‚­
                                            teki_pull=1;//ãƒ‰ãƒ­ãƒ¼æšæ•°
                                            next_mini_stage=4;//ã‚¯ãƒªã‚¢ã§ããŸã‚‰ã“ã‚ŒãŒä½¿ã‚ã‚Œã‚‹ã£ã¦ã“ã¨ã•ã€‚
                                            drop_gold=100;//ãŠé‡‘ãƒ¼ï¼
                                        }else if(mini_stage==4){
                                            next_phase="æˆ¦é—˜æº–å‚™";
                                            æ¼”å‡ºã‚«ã‚¦ãƒ³ãƒˆ=1;
                                            teki_deck_list=hametu_list;//ä½¿ç”¨ãƒ‡ãƒƒã‚­
                                            teki_pull=0;//ãƒ‰ãƒ­ãƒ¼æšæ•°
                                            next_mini_stage=5;//ã‚¯ãƒªã‚¢ã§ããŸã‚‰ã“ã‚ŒãŒä½¿ã‚ã‚Œã‚‹ã£ã¦ã“ã¨ã•ã€‚
                                            drop_gold=200;//ãŠé‡‘ãƒ¼ï¼
                                        }else if(mini_stage==5){
                                            if(cursor2==0){
                                                åˆå›ã‚¯ãƒªã‚¢ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ•ãƒ©ã‚°=0;
                                                next_phase="ã‚¹ãƒ†ãƒ¼ã‚¸é¸æŠ";
                                                æ¼”å‡ºã‚«ã‚¦ãƒ³ãƒˆ=1;
                                                cursor=2;
                                            }else{
                                                key_input="";//ãªã‚“ã‹ã“ã‚Œãªã„ã¨ãƒœã‚¿ãƒ³æ“ä½œãŒã„ã‹ã‚Œã‚‹
                                                URL_tweet_text="https://twitter.com/intent/tweet?text=åŠ›ã®ç¥­å…¸ã‚’çªç ´ã—ãŸï¼%0A%0A"+document.title+"%0A"+document.URL+"&hashtags=Syuukun_Card";//%0Aã§æ”¹è¡Œ
                                                window.open( URL_tweet_text, '_blank'); 
                                            }
                                            
                                        }
                                    }else if(key_input.charAt(i)=="Ã—" && é•·æŠ¼ã—é˜»æ­¢==0){
                                        é•·æŠ¼ã—é˜»æ­¢=1;
                                    }
                                    
                                }
                                if(key_owarasete==1){//ã‚‚ã†ãƒœã‚¿ãƒ³æŠ¼ã—ã¦ãªã„ã€‚æŠ¼ã—ã¦ãªã„ã¨ãã¯ã‚¤ãƒ™ãƒ³ãƒˆãã‚“ã§æ¤œçŸ¥ã™ã‚‹ã‚“ã ã‘ã©ã€å®Ÿè¡Œã‚ˆã‚Šã‚‚å…ˆã«ã‚¤ãƒ™ãƒ³ãƒˆãŒå‘¼ã°ã‚Œã¦ãŸã‚‰ã—ã‹ãŸãªã„ã®ã§ã“ã„ã¤ã§æ­¢ã‚ã‚‹
                                    key_input="";
                                    key_interval=0;
                                }
                                
                            }else if(key_interval>0){
                                key_interval=key_interval-1;//ã‚«ã‚¦ãƒ³ãƒˆãƒ€ã‚¦ãƒ³
                            }

                            if(é•·æŠ¼ã—é˜»æ­¢==1 && (key_input.indexOf("ã€‡")==-1 && key_input.indexOf("Ã—")==-1)){//ã€‡Ã—ãƒœã‚¿ãƒ³ã®é•·æŠ¼ã—é€£æ‰“é˜»æ­¢ã€‚
                                é•·æŠ¼ã—é˜»æ­¢=0; 
                            }
                            ctx.drawImage(saiten,0,0);
                            if(mini_stage==0){
                                ctx.drawImage(yubi,800,770+4*Math.sin(time*Math.PI/8));
                            }else if(mini_stage==1){
                                ctx.drawImage(yubi,750,370+4*Math.sin(time*Math.PI/8));
                            }else if(mini_stage==2){
                                ctx.drawImage(yubi,250,850+4*Math.sin(time*Math.PI/8));
                            }else if(mini_stage==3){
                                ctx.drawImage(yubi,300,400+4*Math.sin(time*Math.PI/8));
                            }else if(mini_stage==4){
                                ctx.drawImage(yubi,20,170+4*Math.sin(time*Math.PI/8));
                            }else if(mini_stage==5){//ã‚¯ãƒªã‚¢ã ã€‚ãŠã‚ã§ã¨ã†ã€‚
                                ctx.fillStyle="rgb(0,0,0,0.75)";
                                ctx.fillRect(0,0,1000,1000);
                                ctx.drawImage(saiten_kuria,0,0);
                                ctx.fillStyle="rgb(255,255,255)";
                                ctx.fillRect(50,700,900,250);

                                ctx.font = "50px  'ï¼­ï¼³ ã‚´ã‚·ãƒƒã‚¯'";//ãƒ•ã‚©ãƒ³ãƒˆè¨­å®šã€‚å·¦ã®ãƒ•ã‚©ãƒ³ãƒˆãŒãªã„ã¨å³ã®ãƒ•ã‚©ãƒ³ãƒˆã‚’é©ç”¨ã™ã‚‹ã‚‰ã—ã„ã€‚
                                ctx.fillStyle="rgb(0,0,0)";
                                ctx.fillText("ã‚¹ãƒ†ãƒ¼ã‚¸é¸æŠã¸", 200, 930);
                                ctx.fillText("ãƒ„ã‚¤ãƒ¼ãƒˆ", 700, 930);

                                ctx.save();
                                ctx.rotate(90 * Math.PI / 180);
                                if(cursor2==0){
                                    ctx.drawImage(yubi,850,-190+4*Math.sin(time*Math.PI/8));
                                }else{
                                    ctx.drawImage(yubi,850,-690+4*Math.sin(time*Math.PI/8));
                                }
                                ctx.restore();
                             
                                if(MAX_STAGE==2){
                                    åˆå›ã‚¯ãƒªã‚¢ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ•ãƒ©ã‚°=1;
                                    MAX_STAGE=3;
                                    localStorage.setItem('MAX_STAGE',MAX_STAGE);//ã‚²ãƒ¼ãƒ ãƒ‡ãƒ¼ã‚¿ã‚»ãƒ¼ãƒ–
                                    MAX_deck=30;
                                    my_pull=3;
                                    my_deck_pull=my_pull;
                                    localStorage.setItem('MAX_deck',MAX_deck);//ã‚²ãƒ¼ãƒ ãƒ‡ãƒ¼ã‚¿ã‚»ãƒ¼ãƒ–
                                    localStorage.setItem('my_pull',my_pull);//ã‚²ãƒ¼ãƒ ãƒ‡ãƒ¼ã‚¿ã‚»ãƒ¼ãƒ–
                                    localStorage.setItem('my_deck_pull',my_deck_pull);//ã‚²ãƒ¼ãƒ ãƒ‡ãƒ¼ã‚¿ã‚»ãƒ¼ãƒ–
                                }
                                if(åˆå›ã‚¯ãƒªã‚¢ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ•ãƒ©ã‚°==1){
                                    ctx.fillText("ãƒ‡ãƒƒã‚­ã®ä¸Šé™æšæ•°+10 ãƒ‰ãƒ­ãƒ¼æšæ•°+1", 100, 780);
                                }
                            }
                        }else if(stage==3){//vsãƒ–ãƒ©ãƒƒã‚¯ã—ã‚…ã†ãã‚“
                            if(key_interval<=0 && key_input!=""){//ã‚­ãƒ¼ãŒé•·æŠ¼ã—ã•ã‚Œã¦ã„ã‚‹å ´åˆã¯key_intervalãŒ0ã«ãªã£ã¦ã¦ã€ã‚­ãƒ¼æ“ä½œãŒé£›ã‚“ã§ããŸã‚‰
                                key_interval=5;//30*n/1000[s]ã®é–“ã€é•·æŠ¼ã—ã§ã®é€£ç¶šå…¥åŠ›ã‚’ç„¡åŠ¹ã€‚
                                for(let i=0;i<key_input.length;i++){
                                    if(key_input.charAt(i)=="â†‘"){
                                    }else if(key_input.charAt(i)=="â†"){
                                        if(mini_stage==1){
                                            cursor2=(cursor2+1)%2;
                                        }
                                    }else if(key_input.charAt(i)=="â†’"){
                                        if(mini_stage==1){
                                            cursor2=(cursor2+1)%2;
                                        }
                                    }else if(key_input.charAt(i)=="â†“"){
                                    }else if(key_input.charAt(i)=="ã€‡" && é•·æŠ¼ã—é˜»æ­¢==0){
                                        é•·æŠ¼ã—é˜»æ­¢=1;
                                        if(mini_stage==0){
                                            next_phase="æˆ¦é—˜æº–å‚™";
                                            æ¼”å‡ºã‚«ã‚¦ãƒ³ãƒˆ=1;
                                            teki_deck_list=burakku_list;//ä½¿ç”¨ãƒ‡ãƒƒã‚­
                                            teki_pull=3;//ãƒ‰ãƒ­ãƒ¼æšæ•°
                                            next_mini_stage=1;//ã‚¯ãƒªã‚¢ã§ããŸã‚‰ã“ã‚ŒãŒä½¿ã‚ã‚Œã‚‹ã£ã¦ã“ã¨ã•ã€‚
                                            drop_gold=250;//ãŠé‡‘ãƒ¼ï¼
                                            
                                        }else if(mini_stage==1){
                                            if(cursor2==0){
                                                åˆå›ã‚¯ãƒªã‚¢ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ•ãƒ©ã‚°=0;
                                                next_phase="ã‚¹ãƒ†ãƒ¼ã‚¸é¸æŠ";
                                                æ¼”å‡ºã‚«ã‚¦ãƒ³ãƒˆ=1;
                                                cursor=2;
                                            }else{
                                                key_input="";//ãªã‚“ã‹ã“ã‚Œãªã„ã¨ãƒœã‚¿ãƒ³æ“ä½œãŒã„ã‹ã‚Œã‚‹
                                                URL_tweet_text="https://twitter.com/intent/tweet?text=ãƒ–ãƒ©ãƒƒã‚¯ã—ã‚…ã†ãã‚“ã‚’ãƒ–ãƒƒé£›ã°ã—ãŸï¼%0A%0A"+document.title+"%0A"+document.URL+"&hashtags=Syuukun_Card";//%0Aã§æ”¹è¡Œ
                                                window.open( URL_tweet_text, '_blank'); 
                                            }
                                            
                                        }
                                    }else if(key_input.charAt(i)=="Ã—" && é•·æŠ¼ã—é˜»æ­¢==0){
                                        é•·æŠ¼ã—é˜»æ­¢=1;
                                    }
                                    
                                }
                                if(key_owarasete==1){//ã‚‚ã†ãƒœã‚¿ãƒ³æŠ¼ã—ã¦ãªã„ã€‚æŠ¼ã—ã¦ãªã„ã¨ãã¯ã‚¤ãƒ™ãƒ³ãƒˆãã‚“ã§æ¤œçŸ¥ã™ã‚‹ã‚“ã ã‘ã©ã€å®Ÿè¡Œã‚ˆã‚Šã‚‚å…ˆã«ã‚¤ãƒ™ãƒ³ãƒˆãŒå‘¼ã°ã‚Œã¦ãŸã‚‰ã—ã‹ãŸãªã„ã®ã§ã“ã„ã¤ã§æ­¢ã‚ã‚‹
                                    key_input="";
                                    key_interval=0;
                                }
                                
                            }else if(key_interval>0){
                                key_interval=key_interval-1;//ã‚«ã‚¦ãƒ³ãƒˆãƒ€ã‚¦ãƒ³
                            }

                            if(é•·æŠ¼ã—é˜»æ­¢==1 && (key_input.indexOf("ã€‡")==-1 && key_input.indexOf("Ã—")==-1)){//ã€‡Ã—ãƒœã‚¿ãƒ³ã®é•·æŠ¼ã—é€£æ‰“é˜»æ­¢ã€‚
                                é•·æŠ¼ã—é˜»æ­¢=0; 
                            }
                            ctx.drawImage(burakku_manga,0,0);
                            if(mini_stage==0){
                                ctx.save();
                                ctx.rotate(90 * Math.PI / 180);
                                ctx.drawImage(yubi,810,-70+4*Math.sin(time*Math.PI/8));
                                
                                ctx.restore();
                            }else if(mini_stage==1){//ã‚¯ãƒªã‚¢ã ã€‚ãŠã‚ã§ã¨ã†ã€‚
                                ctx.fillStyle="rgb(0,0,0,0.75)";
                                ctx.fillRect(0,0,1000,1000);
                                ctx.drawImage(burakku_kuria,0,0);//å¤‰ãˆã‚‹ã“ã¨ã€‚ãƒ¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼
                                ctx.fillStyle="rgb(255,255,255)";
                                ctx.fillRect(50,700,900,250);

                                ctx.font = "50px  'ï¼­ï¼³ ã‚´ã‚·ãƒƒã‚¯'";//ãƒ•ã‚©ãƒ³ãƒˆè¨­å®šã€‚å·¦ã®ãƒ•ã‚©ãƒ³ãƒˆãŒãªã„ã¨å³ã®ãƒ•ã‚©ãƒ³ãƒˆã‚’é©ç”¨ã™ã‚‹ã‚‰ã—ã„ã€‚
                                ctx.fillStyle="rgb(0,0,0)";
                                ctx.fillText("ã‚¹ãƒ†ãƒ¼ã‚¸é¸æŠã¸", 200, 930);
                                ctx.fillText("ãƒ„ã‚¤ãƒ¼ãƒˆ", 700, 930);

                                ctx.save();
                                ctx.rotate(90 * Math.PI / 180);
                                if(cursor2==0){
                                    ctx.drawImage(yubi,850,-190+4*Math.sin(time*Math.PI/8));
                                }else{
                                    ctx.drawImage(yubi,850,-690+4*Math.sin(time*Math.PI/8));
                                }
                                ctx.restore();
                             
                                if(MAX_STAGE==3){
                                    åˆå›ã‚¯ãƒªã‚¢ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ•ãƒ©ã‚°=1;
                                    MAX_STAGE=4;
                                    localStorage.setItem('MAX_STAGE',MAX_STAGE);//ã‚²ãƒ¼ãƒ ãƒ‡ãƒ¼ã‚¿ã‚»ãƒ¼ãƒ–
                                    MAX_TOP_ACE=2;
                                    localStorage.setItem('MAX_TOP_ACE',MAX_TOP_ACE);//ã‚²ãƒ¼ãƒ ãƒ‡ãƒ¼ã‚¿ã‚»ãƒ¼ãƒ–
                                }
                                if(åˆå›ã‚¯ãƒªã‚¢ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ•ãƒ©ã‚°==1){
                                    ctx.fillText("TOP_ACEè¨­å®šå¯èƒ½æ•°+1", 100, 780);
                                }
                            }
                        }else if(stage==4){//ä¸æµ„ã®æ£®
                            ä¸æµ„ã®æ£®();
                        }
                        

                        if(æ¼”å‡ºã‚«ã‚¦ãƒ³ãƒˆ<0 && æ¼”å‡ºã‚«ã‚¦ãƒ³ãƒˆ>-5){
                            æ¼”å‡ºã‚«ã‚¦ãƒ³ãƒˆ-=1;
                            ctx.fillStyle="rgb(50,50,50)";
                            ctx.fillRect(0,0,1000,1000+æ¼”å‡ºã‚«ã‚¦ãƒ³ãƒˆ*200);
                        }
                        if(æ¼”å‡ºã‚«ã‚¦ãƒ³ãƒˆ>0){
                            æ¼”å‡ºã‚«ã‚¦ãƒ³ãƒˆ+=1;
                            ctx.fillStyle="rgb(50,50,50)";
                            ctx.fillRect(0,0,1000,æ¼”å‡ºã‚«ã‚¦ãƒ³ãƒˆ*200);
                        }
                        if(æ¼”å‡ºã‚«ã‚¦ãƒ³ãƒˆ>5){
                            game_phase=next_phase;
                            mini_stage=next_mini_stage;
                            æ¼”å‡ºã‚«ã‚¦ãƒ³ãƒˆ=-1;
                        }
                    }else if(game_phase=="ãŠåº—æº–å‚™"){
                        game_phase="ãŠåº—";
                        sub_phase="åŸºæœ¬";
                        cursor=0;
                        if(MAX_STAGE==2){
                            ãƒ‘ãƒƒã‚¯å£²ã‚‹ã‚ˆ=0;
                        }else if(MAX_STAGE==4){
                            ãƒ‘ãƒƒã‚¯å£²ã‚‹ã‚ˆ=1;
                        }else{
                            ãƒ‘ãƒƒã‚¯å£²ã‚‹ã‚ˆ=0;
                        }
                    }else if(game_phase=="ãŠåº—"){
                        if(key_interval<=0 && key_input!=""){//ã‚­ãƒ¼ãŒé•·æŠ¼ã—ã•ã‚Œã¦ã„ã‚‹å ´åˆã¯key_intervalãŒ0ã«ãªã£ã¦ã¦ã€ã‚­ãƒ¼æ“ä½œãŒé£›ã‚“ã§ããŸã‚‰
                            key_interval=5;//30*n/1000[s]ã®é–“ã€é•·æŠ¼ã—ã§ã®é€£ç¶šå…¥åŠ›ã‚’ç„¡åŠ¹ã€‚
                            for(let i=0;i<key_input.length;i++){
                                if(key_input.charAt(i)=="â†‘"){
                                    if(sub_phase=="åŸºæœ¬"){
                                        if(cursor!=0&& cursor!=1 && cursor!=2 &&cursor!=-1){
                                            cursor-=3;
                                        }else if(cursor!=-1){
                                            cursor=-1;
                                        }else{
                                            cursor=Math.floor(ãƒ‘ãƒƒã‚¯å£²ã‚‹ã‚ˆ/3)*3;
                                        }
                                    }else if(sub_phase=="ãƒ‘ãƒƒã‚¯è©³ç´°"){
                                        if(cursor2<=2){
                                            è³¼å…¥æ•°[cursor2]+=1;
                                            if(è³¼å…¥æ•°[cursor2]==10){
                                                è³¼å…¥æ•°[cursor2]=0;
                                            }
                                        }
                                    }
                                    
                                }else if(key_input.charAt(i)=="â†"){
                                    if(sub_phase=="åŸºæœ¬"){
                                        if(cursor==-1){
                                            cursor=ãƒ‘ãƒƒã‚¯å£²ã‚‹ã‚ˆ;
                                        }else if(cursor!=0 && cursor!=3 && cursor!=6){
                                            cursor-=1;
                                        }else{
                                            if(cursor==ãƒ‘ãƒƒã‚¯å£²ã‚‹ã‚ˆ){
                                                cursor=-1;
                                            }else{
                                                cursor+=2;
                                                if(cursor>ãƒ‘ãƒƒã‚¯å£²ã‚‹ã‚ˆ){
                                                    cursor=ãƒ‘ãƒƒã‚¯å£²ã‚‹ã‚ˆ;
                                                }
                                            }
                                        }
                                    }else if(sub_phase=="ãƒ‘ãƒƒã‚¯è©³ç´°"){
                                        if(cursor2!=0){
                                            cursor2-=1;
                                        }else{
                                            cursor2=4;
                                        }
                                    }else if(sub_phase=="ã‚¬ãƒãƒ£çµæœ"){
                                        if(cursor2!=0){
                                            cursor2-=1;
                                        }else{
                                            cursor2=2;
                                        }
                                    }
                                    
                                }else if(key_input.charAt(i)=="â†’"){
                                    if(sub_phase=="åŸºæœ¬"){
                                        if(cursor==-1){
                                            cursor=Math.floor(ãƒ‘ãƒƒã‚¯å£²ã‚‹ã‚ˆ/3)*3;
                                        }else if(cursor!=2 && cursor!=5 && cursor!=8){
                                            if(cursor==ãƒ‘ãƒƒã‚¯å£²ã‚‹ã‚ˆ && ãƒ‘ãƒƒã‚¯å£²ã‚‹ã‚ˆ==Math.floor(ãƒ‘ãƒƒã‚¯å£²ã‚‹ã‚ˆ/3)*3){
                                                cursor=-1;
                                            }else{
                                                cursor+=1;
                                                if(cursor>ãƒ‘ãƒƒã‚¯å£²ã‚‹ã‚ˆ){
                                                    cursor=Math.floor(ãƒ‘ãƒƒã‚¯å£²ã‚‹ã‚ˆ/3)*3;
                                                }
                                            }
                                            
                                        }else{
                                            cursor-=2;
                                        }
                                    }else if(sub_phase=="ãƒ‘ãƒƒã‚¯è©³ç´°"){
                                        if(cursor2!=4){
                                            cursor2+=1;
                                        }else{
                                            cursor2=0;
                                        }
                                    }else if(sub_phase=="ã‚¬ãƒãƒ£çµæœ"){
                                        if(cursor2!=2){
                                            cursor2+=1;
                                        }else{
                                            cursor2=0;
                                        }
                                    }
                                }else if(key_input.charAt(i)=="â†“"){
                                    if(sub_phase=="åŸºæœ¬"){
                                        if(cursor==-1){
                                            cursor=0;
                                        }else if(cursor>=Math.floor(ãƒ‘ãƒƒã‚¯å£²ã‚‹ã‚ˆ/3)*3 && cursor<=Math.floor(ãƒ‘ãƒƒã‚¯å£²ã‚‹ã‚ˆ/3)*3+2){
                                            cursor=-1;
                                        }else{
                                            cursor+=3;
                                            if(cursor>ãƒ‘ãƒƒã‚¯å£²ã‚‹ã‚ˆ){
                                                cursor=ãƒ‘ãƒƒã‚¯å£²ã‚‹ã‚ˆ;
                                            }
                                        }

                                    }else if(sub_phase=="ãƒ‘ãƒƒã‚¯è©³ç´°"){
                                        if(cursor2<=2){
                                            è³¼å…¥æ•°[cursor2]-=1;
                                            if(è³¼å…¥æ•°[cursor2]==-1){
                                                è³¼å…¥æ•°[cursor2]=9;
                                            }
                                        }
                                    }       
                                }else if(key_input.charAt(i)=="ã€‡" && é•·æŠ¼ã—é˜»æ­¢==0){
                                    if(sub_phase=="åŸºæœ¬"){
                                        if(cursor>=0 && cursor<=9){
                                            sub_phase="ãƒ‘ãƒƒã‚¯è©³ç´°";
                                            è³¼å…¥æ•°=[0,0,0];
                                            cursor2=2;
                                        }else if(cursor==-1){
                                            æ¼”å‡ºã‚«ã‚¦ãƒ³ãƒˆ=1;
                                        }
                                        
                                    }else if(sub_phase=="ãƒ‘ãƒƒã‚¯è©³ç´°"){
                                        if(cursor2==3 && ãŠé‡‘>=é‡‘é¡[cursor]*(è³¼å…¥æ•°[0]*100+è³¼å…¥æ•°[1]*10+è³¼å…¥æ•°[2]) && è³¼å…¥æ•°[0]+è³¼å…¥æ•°[1]+è³¼å…¥æ•°[2]!=0){
                                            //è³¼å…¥ï¼
                                            
                                            å‡ºã¦ããŸã‚«ãƒ¼ãƒ‰=[];
                                            if(cursor==0){
                                                for(i=0;i<3*(è³¼å…¥æ•°[0]*100+è³¼å…¥æ•°[1]*10+è³¼å…¥æ•°[2]);i++){
                                                    å‡ºã¦ããŸã‚«ãƒ¼ãƒ‰[i]=ã½ã«ã‚ƒãƒ‘ãƒƒã‚¯[Math.floor(Math.random()*ã½ã«ã‚ƒãƒ‘ãƒƒã‚¯.length)];
                                                }
                                            }else if(cursor==1){
                                                for(i=0;i<3*(è³¼å…¥æ•°[0]*100+è³¼å…¥æ•°[1]*10+è³¼å…¥æ•°[2]);i++){
                                                    å‡ºã¦ããŸã‚«ãƒ¼ãƒ‰[i]=ä¸Šä½å¬å–šãƒ‘ãƒƒã‚¯[Math.floor(Math.random()*ä¸Šä½å¬å–šãƒ‘ãƒƒã‚¯.length)];
                                                }
                                            }

                                            ãŠé‡‘-=é‡‘é¡[cursor]*(è³¼å…¥æ•°[0]*100+è³¼å…¥æ•°[1]*10+è³¼å…¥æ•°[2]);

                                            å‡ºã¦ããŸã‚«ãƒ¼ãƒ‰_ã‚½ãƒ¼ãƒˆ=[...å‡ºã¦ããŸã‚«ãƒ¼ãƒ‰];
                                            for(let i=0;i<å‡ºã¦ããŸã‚«ãƒ¼ãƒ‰_ã‚½ãƒ¼ãƒˆ.length;i++){
                                                for(let j=i+1;j<å‡ºã¦ããŸã‚«ãƒ¼ãƒ‰_ã‚½ãƒ¼ãƒˆ.length;j++){
                                                    if(å‡ºã¦ããŸã‚«ãƒ¼ãƒ‰_ã‚½ãƒ¼ãƒˆ[i]==å‡ºã¦ããŸã‚«ãƒ¼ãƒ‰_ã‚½ãƒ¼ãƒˆ[j]){
                                                        pre_ã‚«ãƒ¼ãƒ‰=å‡ºã¦ããŸã‚«ãƒ¼ãƒ‰_ã‚½ãƒ¼ãƒˆ[i+1];
                                                        å‡ºã¦ããŸã‚«ãƒ¼ãƒ‰_ã‚½ãƒ¼ãƒˆ[i+1]=å‡ºã¦ããŸã‚«ãƒ¼ãƒ‰_ã‚½ãƒ¼ãƒˆ[j];
                                                        å‡ºã¦ããŸã‚«ãƒ¼ãƒ‰_ã‚½ãƒ¼ãƒˆ[j]=pre_ã‚«ãƒ¼ãƒ‰;
                                                        break;
                                                    }
                                                }
                                            }


                                            for(let i=0;i<å‡ºã¦ããŸã‚«ãƒ¼ãƒ‰_ã‚½ãƒ¼ãƒˆ.length;i++){
                                                get_card={...å‡ºã¦ããŸã‚«ãƒ¼ãƒ‰_ã‚½ãƒ¼ãƒˆ[i]};
                                                new_card=0;
                                                ã‚«ãƒ¼ãƒ‰ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹=0;
                                                //å–å¾—ã‚«ãƒ¼ãƒ‰æ±ºå®š
                                                for(let j=0;j<æ‰€æŒã‚«ãƒ¼ãƒ‰.length;j++){
                                                    if(æ‰€æŒã‚«ãƒ¼ãƒ‰[j][0].name==get_card.name){//æŒã£ã¦ã‚‹ï¼Ÿã“ã®ã‚«ãƒ¼ãƒ‰
                                                        æ‰€æŒã‚«ãƒ¼ãƒ‰[j][1]+=1;
                                                        new_card=1;//ã“ã®ã‚«ãƒ¼ãƒ‰æŒã£ã¦ãŸã‚
                                                        ã‚«ãƒ¼ãƒ‰ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹=j;
                                                        break;
                                                    }
                                                }
                                                if(new_card==0){//æ–°è¦ã‚«ãƒ¼ãƒ‰ã ï¼
                                                    ã‚«ãƒ¼ãƒ‰ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹=æ‰€æŒã‚«ãƒ¼ãƒ‰.length;
                                                    æ‰€æŒã‚«ãƒ¼ãƒ‰[æ‰€æŒã‚«ãƒ¼ãƒ‰.length]=[get_card,1];
                                                }
                                                if(i+1!=å‡ºã¦ããŸã‚«ãƒ¼ãƒ‰_ã‚½ãƒ¼ãƒˆ.length){
                                                    for(let k=i+1;k<å‡ºã¦ããŸã‚«ãƒ¼ãƒ‰_ã‚½ãƒ¼ãƒˆ.length;k++){
                                                        if(å‡ºã¦ããŸã‚«ãƒ¼ãƒ‰_ã‚½ãƒ¼ãƒˆ[i]==å‡ºã¦ããŸã‚«ãƒ¼ãƒ‰_ã‚½ãƒ¼ãƒˆ[k]){
                                                            æ‰€æŒã‚«ãƒ¼ãƒ‰[ã‚«ãƒ¼ãƒ‰ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹][1]+=1;
                                                            i+=1;
                                                        }else{
                                                            break;
                                                        }
                                                    }
                                                }
                                            }
                                            
                                        
                                            æ‰€æŒã‚«ãƒ¼ãƒ‰ã®ã‚»ãƒ¼ãƒ–();
                                            localStorage.setItem('ãŠé‡‘',ãŠé‡‘);
                                            sub_phase="ã‚¬ãƒãƒ£çµæœ";
                                            cursor2=0;
                                            pre_cursor=0;

                                        }else if(cursor2==4){
                                            sub_phase="åŸºæœ¬";
                                        }
                                    }else if(sub_phase=="ã‚¬ãƒãƒ£çµæœ"){
                                        if(cursor2<=1){
                                            pre_cursor=cursor2;
                                        }else{
                                            sub_phase="åŸºæœ¬";
                                        }
                                    }  
                                    é•·æŠ¼ã—é˜»æ­¢=1;
                                }else if(key_input.charAt(i)=="Ã—" && é•·æŠ¼ã—é˜»æ­¢==0){
                                    if(sub_phase=="ãƒ‘ãƒƒã‚¯è©³ç´°"){
                                        sub_phase="åŸºæœ¬";
                                    }else if(sub_phase=="ã‚¬ãƒãƒ£çµæœ"){
                                        sub_phase="åŸºæœ¬";
                                    }   
                                    é•·æŠ¼ã—é˜»æ­¢=1;
                                }
                                
                            }
                            if(key_owarasete==1){//ã‚‚ã†ãƒœã‚¿ãƒ³æŠ¼ã—ã¦ãªã„ã€‚æŠ¼ã—ã¦ãªã„ã¨ãã¯ã‚¤ãƒ™ãƒ³ãƒˆãã‚“ã§æ¤œçŸ¥ã™ã‚‹ã‚“ã ã‘ã©ã€å®Ÿè¡Œã‚ˆã‚Šã‚‚å…ˆã«ã‚¤ãƒ™ãƒ³ãƒˆãŒå‘¼ã°ã‚Œã¦ãŸã‚‰ã—ã‹ãŸãªã„ã®ã§ã“ã„ã¤ã§æ­¢ã‚ã‚‹
                                key_input="";
                                key_interval=0;
                            }
                            
                        }else if(key_interval>0){
                            key_interval=key_interval-1;//ã‚«ã‚¦ãƒ³ãƒˆãƒ€ã‚¦ãƒ³
                        }

                        if(é•·æŠ¼ã—é˜»æ­¢==1 && (key_input.indexOf("ã€‡")==-1 && key_input.indexOf("Ã—")==-1)){//ã€‡Ã—ãƒœã‚¿ãƒ³ã®é•·æŠ¼ã—é€£æ‰“é˜»æ­¢ã€‚
                            é•·æŠ¼ã—é˜»æ­¢=0; 
                        }

                        ctx.fillStyle="rgb(20,20,50)";
                        ctx.fillRect(0,0,1000,1000);
                        
                        
                        if(sub_phase=="åŸºæœ¬"){
                            ctx.fillStyle="rgb(240,230,250)";
                            ctx.fillRect(20,20,700,910);
                            if(ãƒ‘ãƒƒã‚¯å£²ã‚‹ã‚ˆ>=0){
                                ãƒ‘ãƒƒã‚¯é™³åˆ— (50,50,ponya_pack,cursor==0);
                                ctx.fillStyle="rgb(0,0,0)";
                                ctx.font = "30px  'ï¼­ï¼³ ã‚´ã‚·ãƒƒã‚¯'";//ãƒ•ã‚©ãƒ³ãƒˆè¨­å®šã€‚å·¦ã®ãƒ•ã‚©ãƒ³ãƒˆãŒãªã„ã¨å³ã®ãƒ•ã‚©ãƒ³ãƒˆã‚’é©ç”¨ã™ã‚‹ã‚‰ã—ã„ã€‚
                                ctx.fillText(é‡‘é¡[0], 130, 320);
                                ctx.drawImage(okane,90,290);
                            }
                            
                            if(ãƒ‘ãƒƒã‚¯å£²ã‚‹ã‚ˆ>=1){
                                ãƒ‘ãƒƒã‚¯é™³åˆ— (300,50,jouisyoukanpakku,cursor==1);
                                ctx.fillStyle="rgb(0,0,0)";
                                ctx.font = "30px  'ï¼­ï¼³ ã‚´ã‚·ãƒƒã‚¯'";//ãƒ•ã‚©ãƒ³ãƒˆè¨­å®šã€‚å·¦ã®ãƒ•ã‚©ãƒ³ãƒˆãŒãªã„ã¨å³ã®ãƒ•ã‚©ãƒ³ãƒˆã‚’é©ç”¨ã™ã‚‹ã‚‰ã—ã„ã€‚
                                ctx.fillText(é‡‘é¡[1], 380, 320);
                                ctx.drawImage(okane,340,290);
                            }
                            
                            if(ãƒ‘ãƒƒã‚¯å£²ã‚‹ã‚ˆ>=2){
                                ãƒ‘ãƒƒã‚¯é™³åˆ— (550,50,ponya_pack,cursor==2);
                                ctx.fillStyle="rgb(0,0,0)";
                                ctx.font = "30px  'ï¼­ï¼³ ã‚´ã‚·ãƒƒã‚¯'";//ãƒ•ã‚©ãƒ³ãƒˆè¨­å®šã€‚å·¦ã®ãƒ•ã‚©ãƒ³ãƒˆãŒãªã„ã¨å³ã®ãƒ•ã‚©ãƒ³ãƒˆã‚’é©ç”¨ã™ã‚‹ã‚‰ã—ã„ã€‚
                                ctx.fillText(é‡‘é¡[2], 630, 320);
                                ctx.drawImage(okane,590,290);
                            }
                            
                            if(ãƒ‘ãƒƒã‚¯å£²ã‚‹ã‚ˆ>=3){
                                ãƒ‘ãƒƒã‚¯é™³åˆ— (50,350,ponya_pack,cursor==3);
                                ctx.fillStyle="rgb(0,0,0)";
                                ctx.font = "30px  'ï¼­ï¼³ ã‚´ã‚·ãƒƒã‚¯'";//ãƒ•ã‚©ãƒ³ãƒˆè¨­å®šã€‚å·¦ã®ãƒ•ã‚©ãƒ³ãƒˆãŒãªã„ã¨å³ã®ãƒ•ã‚©ãƒ³ãƒˆã‚’é©ç”¨ã™ã‚‹ã‚‰ã—ã„ã€‚
                                ctx.fillText(é‡‘é¡[3], 130, 620);
                                ctx.drawImage(okane,90,590);
                            }
                            
                            if(ãƒ‘ãƒƒã‚¯å£²ã‚‹ã‚ˆ>=4){
                                ãƒ‘ãƒƒã‚¯é™³åˆ— (300,350,ponya_pack,cursor==4);
                                ctx.fillStyle="rgb(0,0,0)";
                                ctx.font = "30px  'ï¼­ï¼³ ã‚´ã‚·ãƒƒã‚¯'";//ãƒ•ã‚©ãƒ³ãƒˆè¨­å®šã€‚å·¦ã®ãƒ•ã‚©ãƒ³ãƒˆãŒãªã„ã¨å³ã®ãƒ•ã‚©ãƒ³ãƒˆã‚’é©ç”¨ã™ã‚‹ã‚‰ã—ã„ã€‚
                                ctx.fillText(é‡‘é¡[4], 380, 620);
                                ctx.drawImage(okane,340,590);
                            }
                            
                            if(ãƒ‘ãƒƒã‚¯å£²ã‚‹ã‚ˆ>=5){
                                ãƒ‘ãƒƒã‚¯é™³åˆ— (550,350,ponya_pack,cursor==5);
                                ctx.fillStyle="rgb(0,0,0)";
                                ctx.font = "30px  'ï¼­ï¼³ ã‚´ã‚·ãƒƒã‚¯'";//ãƒ•ã‚©ãƒ³ãƒˆè¨­å®šã€‚å·¦ã®ãƒ•ã‚©ãƒ³ãƒˆãŒãªã„ã¨å³ã®ãƒ•ã‚©ãƒ³ãƒˆã‚’é©ç”¨ã™ã‚‹ã‚‰ã—ã„ã€‚
                                ctx.fillText(é‡‘é¡[5], 630, 620);
                                ctx.drawImage(okane,590,590);
                            }
                            
                            if(ãƒ‘ãƒƒã‚¯å£²ã‚‹ã‚ˆ>=6){
                                ãƒ‘ãƒƒã‚¯é™³åˆ— (50,650,ponya_pack,cursor==6);
                                ctx.fillStyle="rgb(0,0,0)";
                                ctx.font = "30px  'ï¼­ï¼³ ã‚´ã‚·ãƒƒã‚¯'";//ãƒ•ã‚©ãƒ³ãƒˆè¨­å®šã€‚å·¦ã®ãƒ•ã‚©ãƒ³ãƒˆãŒãªã„ã¨å³ã®ãƒ•ã‚©ãƒ³ãƒˆã‚’é©ç”¨ã™ã‚‹ã‚‰ã—ã„ã€‚
                                ctx.fillText(é‡‘é¡[6], 130, 920);
                                ctx.drawImage(okane,90,890);
                            }
                            
                            if(ãƒ‘ãƒƒã‚¯å£²ã‚‹ã‚ˆ>=7){
                                ãƒ‘ãƒƒã‚¯é™³åˆ— (300,650,ponya_pack,cursor==7);
                                ctx.fillStyle="rgb(0,0,0)";
                                ctx.font = "30px  'ï¼­ï¼³ ã‚´ã‚·ãƒƒã‚¯'";//ãƒ•ã‚©ãƒ³ãƒˆè¨­å®šã€‚å·¦ã®ãƒ•ã‚©ãƒ³ãƒˆãŒãªã„ã¨å³ã®ãƒ•ã‚©ãƒ³ãƒˆã‚’é©ç”¨ã™ã‚‹ã‚‰ã—ã„ã€‚
                                ctx.fillText(é‡‘é¡[7], 380, 920);
                                ctx.drawImage(okane,340,890);
                            }
                            
                            if(ãƒ‘ãƒƒã‚¯å£²ã‚‹ã‚ˆ>=8){
                                ãƒ‘ãƒƒã‚¯é™³åˆ— (550,650,ponya_pack,cursor==8);
                                ctx.fillStyle="rgb(0,0,0)";
                                ctx.font = "30px  'ï¼­ï¼³ ã‚´ã‚·ãƒƒã‚¯'";//ãƒ•ã‚©ãƒ³ãƒˆè¨­å®šã€‚å·¦ã®ãƒ•ã‚©ãƒ³ãƒˆãŒãªã„ã¨å³ã®ãƒ•ã‚©ãƒ³ãƒˆã‚’é©ç”¨ã™ã‚‹ã‚‰ã—ã„ã€‚
                                ctx.fillText(é‡‘é¡[8], 630, 920);
                                ctx.drawImage(okane,590,890);
                            }
                            
                            ctx.fillStyle="rgb(240,230,250)";
                            ctx.fillRect(20,920,120,70);
                            ctx.fillStyle="rgb(0,0,0)";
                            ctx.font = "40px  'ï¼­ï¼³ ã‚´ã‚·ãƒƒã‚¯'";//ãƒ•ã‚©ãƒ³ãƒˆè¨­å®šã€‚å·¦ã®ãƒ•ã‚©ãƒ³ãƒˆãŒãªã„ã¨å³ã®ãƒ•ã‚©ãƒ³ãƒˆã‚’é©ç”¨ã™ã‚‹ã‚‰ã—ã„ã€‚
                            ctx.fillText("æˆ»ã‚‹", 30, 970);
                        
                        
                            if(cursor==0){
                                ctx.drawImage(yubi,100,280+4*Math.sin(time*Math.PI/8));
                            }else if(cursor==1){
                                ctx.drawImage(yubi,350,280+4*Math.sin(time*Math.PI/8));
                            }else if(cursor==2){
                                ctx.drawImage(yubi,600,280+4*Math.sin(time*Math.PI/8));
                            }else if(cursor==3){
                                ctx.drawImage(yubi,100,580+4*Math.sin(time*Math.PI/8));
                            }else if(cursor==4){
                                ctx.drawImage(yubi,350,580+4*Math.sin(time*Math.PI/8));
                            }else if(cursor==5){
                                ctx.drawImage(yubi,600,580+4*Math.sin(time*Math.PI/8));
                            }else if(cursor==6){
                                ctx.drawImage(yubi,100,880+4*Math.sin(time*Math.PI/8));
                            }else if(cursor==7){
                                ctx.drawImage(yubi,350,880+4*Math.sin(time*Math.PI/8));
                            }else if(cursor==8){
                                ctx.drawImage(yubi,600,880+4*Math.sin(time*Math.PI/8));
                            }else if(cursor==-1){
                                ctx.save();
                                ctx.rotate(270 * Math.PI / 180);
                                ctx.drawImage(yubi,-1020,120+4*Math.sin(time*Math.PI/8));
                                ctx.restore();
                            }
                        }else if(sub_phase=="ãƒ‘ãƒƒã‚¯è©³ç´°"){
                            ctx.fillStyle="rgb(240,230,250)";   
                            ctx.fillRect(20,20,900,260);    
                            ctx.fillRect(40,290,720,620);  
                            if(cursor==0){
                                ctx.fillStyle="rgb(0,0,0)";
                                ctx.font = "50px  'ï¼­ï¼³ ã‚´ã‚·ãƒƒã‚¯'";//ãƒ•ã‚©ãƒ³ãƒˆè¨­å®šã€‚å·¦ã®ãƒ•ã‚©ãƒ³ãƒˆãŒãªã„ã¨å³ã®ãƒ•ã‚©ãƒ³ãƒˆã‚’é©ç”¨ã™ã‚‹ã‚‰ã—ã„ã€‚
                                ctx.fillText("ã½ã«ã‚ƒ+é­”æ³•+æ©Ÿæ¢°ãƒ‘ãƒƒã‚¯", 200, 100);
                                ã‚«ãƒ¼ãƒ‰ãƒ‘ãƒƒã‚¯(50,50,ponya_pack);
                                ãƒ‘ãƒƒã‚¯ã®ä¸­èº«(ã½ã«ã‚ƒãƒ‘ãƒƒã‚¯,50,300,700,600);
                            }else if(cursor==1){
                                ctx.fillStyle="rgb(0,0,0)";
                                ctx.font = "50px  'ï¼­ï¼³ ã‚´ã‚·ãƒƒã‚¯'";//ãƒ•ã‚©ãƒ³ãƒˆè¨­å®šã€‚å·¦ã®ãƒ•ã‚©ãƒ³ãƒˆãŒãªã„ã¨å³ã®ãƒ•ã‚©ãƒ³ãƒˆã‚’é©ç”¨ã™ã‚‹ã‚‰ã—ã„ã€‚
                                ctx.fillText("ä¸Šä½å¬å–šãƒ‘ãƒƒã‚¯", 200, 100);
                                ã‚«ãƒ¼ãƒ‰ãƒ‘ãƒƒã‚¯(50,50,jouisyoukanpakku);
                                ãƒ‘ãƒƒã‚¯ã®ä¸­èº«(ä¸Šä½å¬å–šãƒ‘ãƒƒã‚¯,50,300,700,600);
                            
                            }else{

                            }

                            ctx.fillStyle="rgb(0,0,0)";
                            ctx.fillText(é‡‘é¡[cursor], 790, 100);//å€¤æ®µ
                            ctx.drawImage(okane,750,70);
                            
                            
                            ctx.fillStyle="rgb(255,255,255)";
                            ctx.font = "30px  'ï¼­ï¼³ ã‚´ã‚·ãƒƒã‚¯'";//ãƒ•ã‚©ãƒ³ãƒˆè¨­å®šã€‚å·¦ã®ãƒ•ã‚©ãƒ³ãƒˆãŒãªã„ã¨å³ã®ãƒ•ã‚©ãƒ³ãƒˆã‚’é©ç”¨ã™ã‚‹ã‚‰ã—ã„ã€‚
                            ctx.fillText("ãŠä¼šè¨ˆ", 800, 347);
                            ctx.fillText(é‡‘é¡[cursor]*(è³¼å…¥æ•°[0]*100+è³¼å…¥æ•°[1]*10+è³¼å…¥æ•°[2]), 840, 400);//å€¤æ®µ
                            ctx.drawImage(okane,800,370);

                            ctx.fillStyle="rgb(20,20,20)";   
                            ctx.fillRect(290,150,80,90);  
                            ctx.fillRect(390,150,80,90);  
                            ctx.fillRect(490,150,80,90);  
                            
                            ctx.fillText("3æšå…¥ã‚Š", 190, 270);

                            ctx.fillStyle="rgb(255,255,255)";   
                            ctx.fillRect(400,160,60,70);  
                            ctx.fillRect(300,160,60,70);  
                            ctx.fillRect(500,160,60,70);  
                            ctx.font = "50px  'ï¼­ï¼³ ã‚´ã‚·ãƒƒã‚¯'";//ãƒ•ã‚©ãƒ³ãƒˆè¨­å®šã€‚å·¦ã®ãƒ•ã‚©ãƒ³ãƒˆãŒãªã„ã¨å³ã®ãƒ•ã‚©ãƒ³ãƒˆã‚’é©ç”¨ã™ã‚‹ã‚‰ã—ã„ã€‚
                            ctx.fillStyle="rgb(0,0,0)";                                
                            ctx.fillText("è²·ã†", 630, 250);
                            ctx.fillText("ã‚„ã‚ã‚‹", 750, 250);

                            ctx.font = "70px  'ï¼­ï¼³ ã‚´ã‚·ãƒƒã‚¯'";//ãƒ•ã‚©ãƒ³ãƒˆè¨­å®šã€‚å·¦ã®ãƒ•ã‚©ãƒ³ãƒˆãŒãªã„ã¨å³ã®ãƒ•ã‚©ãƒ³ãƒˆã‚’é©ç”¨ã™ã‚‹ã‚‰ã—ã„ã€‚
                            ctx.fillText(è³¼å…¥æ•°[0], 315, 220);
                            ctx.fillText(è³¼å…¥æ•°[1], 415, 220);
                            ctx.fillText(è³¼å…¥æ•°[2], 515, 220);
                            ctx.font = "40px  'ï¼­ï¼³ ã‚´ã‚·ãƒƒã‚¯'";//ãƒ•ã‚©ãƒ³ãƒˆè¨­å®šã€‚å·¦ã®ãƒ•ã‚©ãƒ³ãƒˆãŒãªã„ã¨å³ã®ãƒ•ã‚©ãƒ³ãƒˆã‚’é©ç”¨ã™ã‚‹ã‚‰ã—ã„ã€‚
                            ctx.fillText("â–²", 310, 145);
                            ctx.fillText("â–²", 410, 145);
                            ctx.fillText("â–²", 510, 145);
                            ctx.fillText("â–¼", 310, 275);
                            ctx.fillText("â–¼", 410, 275);
                            ctx.fillText("â–¼", 510, 275);

                            if(ãŠé‡‘<é‡‘é¡[cursor]*(è³¼å…¥æ•°[0]*100+è³¼å…¥æ•°[1]*10+è³¼å…¥æ•°[2]) || è³¼å…¥æ•°[0]+è³¼å…¥æ•°[1]+è³¼å…¥æ•°[2]==0){
                                ctx.fillStyle="rgb(255,0,0)";   
                                ctx.fillRect(620,230,120,10);  
                            }
                            
                            if(cursor2==0){
                                ctx.drawImage(yubi,270,250+4*Math.sin(time*Math.PI/8));
                            }else if(cursor2==1){
                                ctx.drawImage(yubi,370,250+4*Math.sin(time*Math.PI/8));
                            }else if(cursor2==2){
                                ctx.drawImage(yubi,470,250+4*Math.sin(time*Math.PI/8));
                            }else if(cursor2==3){
                                ctx.drawImage(yubi,620,250+4*Math.sin(time*Math.PI/8));
                            }else if(cursor2==4){
                                ctx.drawImage(yubi,770,250+4*Math.sin(time*Math.PI/8));
                            }
                        }else if(sub_phase=="ã‚¬ãƒãƒ£çµæœ"){
                            ctx.fillStyle="rgb(240,230,250)";   
                            ctx.fillRect(40,5,600,80);
                            ctx.fillRect(700,5,200,80);
                            ctx.fillRect(40,90,720,820); 

                            if(pre_cursor==0){
                                å‡ºã¦ããŸã‚«ãƒ¼ãƒ‰ã®ä¸­èº«(å‡ºã¦ããŸã‚«ãƒ¼ãƒ‰,50,100,700,800);
                            }else{
                                å‡ºã¦ããŸã‚«ãƒ¼ãƒ‰ã®ä¸­èº«(å‡ºã¦ããŸã‚«ãƒ¼ãƒ‰_ã‚½ãƒ¼ãƒˆ,50,100,700,800);
                            }
                            

                            ctx.font = "50px  'ï¼­ï¼³ ã‚´ã‚·ãƒƒã‚¯'";//ãƒ•ã‚©ãƒ³ãƒˆè¨­å®šã€‚å·¦ã®ãƒ•ã‚©ãƒ³ãƒˆãŒãªã„ã¨å³ã®ãƒ•ã‚©ãƒ³ãƒˆã‚’é©ç”¨ã™ã‚‹ã‚‰ã—ã„ã€‚
                            ctx.fillStyle="rgb(0,0,0)";                                
                            ctx.fillText("è¡¨ç¤º:", 50, 80);
                            ctx.fillText("å‡ºãŸé †", 200, 80);
                            ctx.fillText("ã‚½ãƒ¼ãƒˆ", 400, 80);
                            ctx.fillText("æˆ»ã‚‹", 750, 70);

                            if(cursor2==0){
                                ctx.drawImage(yubi,210,90+4*Math.sin(time*Math.PI/8));
                            }else if(cursor2==1){
                                ctx.drawImage(yubi,410,90+4*Math.sin(time*Math.PI/8));
                            }else if(cursor2==2){
                                ctx.drawImage(yubi,740,80+4*Math.sin(time*Math.PI/8));
                            }
                        }
                        ctx.fillStyle="rgb(255,255,255)";
                        ctx.font = "30px  'ï¼­ï¼³ ã‚´ã‚·ãƒƒã‚¯'";//ãƒ•ã‚©ãƒ³ãƒˆè¨­å®šã€‚å·¦ã®ãƒ•ã‚©ãƒ³ãƒˆãŒãªã„ã¨å³ã®ãƒ•ã‚©ãƒ³ãƒˆã‚’é©ç”¨ã™ã‚‹ã‚‰ã—ã„ã€‚
                        ctx.fillText("æ‰€æŒé‡‘", 800, 467);
                        ctx.fillText(ãŠé‡‘, 840, 520);
                        ctx.drawImage(okane,800,490);
                        ctx.drawImage(sakyura_omise,0,0);


                        ctx.fillStyle="rgb(50,50,50)";
                        if(æ¼”å‡ºã‚«ã‚¦ãƒ³ãƒˆ<0 && æ¼”å‡ºã‚«ã‚¦ãƒ³ãƒˆ>-6){
                            æ¼”å‡ºã‚«ã‚¦ãƒ³ãƒˆ-=1;
                            ctx.fillRect(-æ¼”å‡ºã‚«ã‚¦ãƒ³ãƒˆ*200,0,1000+æ¼”å‡ºã‚«ã‚¦ãƒ³ãƒˆ*200,1000);
                        }

                        if(æ¼”å‡ºã‚«ã‚¦ãƒ³ãƒˆ>0){
                            æ¼”å‡ºã‚«ã‚¦ãƒ³ãƒˆ+=1;
                            ctx.fillRect(1000-æ¼”å‡ºã‚«ã‚¦ãƒ³ãƒˆ*200,0,æ¼”å‡ºã‚«ã‚¦ãƒ³ãƒˆ*200,1000);
                        }

                        if(æ¼”å‡ºã‚«ã‚¦ãƒ³ãƒˆ==6){
                            game_phase="ã‚¹ãƒ†ãƒ¼ã‚¸é¸æŠ";
                            æ¼”å‡ºã‚«ã‚¦ãƒ³ãƒˆ=-21;
                            cursor=4;
                        }

                    }else if(game_phase=="ãƒ‡ãƒƒã‚­ç·¨é›†æº–å‚™"){
                        ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­={card_list:[],ACE:[],TOP_ACE:[]};

                        ã‚«ãƒ¼ãƒ‰ã‚«ã‚¦ãƒ³ãƒˆ=0;
                        for(let i=0;i<deck_list.card_list.length;i++){
                            for(let j=0;j<deck_list.card_list[i][1];j++){
                                ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.card_list[ã‚«ãƒ¼ãƒ‰ã‚«ã‚¦ãƒ³ãƒˆ]=deck_list.card_list[i][0];
                                ã‚«ãƒ¼ãƒ‰ã‚«ã‚¦ãƒ³ãƒˆ+=1;
                                
                            }
                        }
                                
                        
                        for(let i=0;i<deck_list.TOP_ACE.length;i++){//TOP_ACEã®ç™»éŒ²
                            ã‚«ãƒ¼ãƒ‰ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹=ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.card_list.indexOf(deck_list.TOP_ACE[i]);
                            ã‚«ãƒ¼ãƒ‰ã‚«ã‚¦ãƒ³ãƒˆ=0;
                            for(let j=ã‚«ãƒ¼ãƒ‰ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹+1;j<ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.card_list.length;j++){
                                if(ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.card_list[j]==ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.card_list[ã‚«ãƒ¼ãƒ‰ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹]){
                                    ã‚«ãƒ¼ãƒ‰ã‚«ã‚¦ãƒ³ãƒˆ+=1;
                                }else{
                                    break;
                                }
                                
                            }
                            ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.TOP_ACE[i]=ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.TOP_ACE.filter(function(TOP_index){
                                    return TOP_index>=ã‚«ãƒ¼ãƒ‰ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ && TOP_index<=ã‚«ãƒ¼ãƒ‰ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹+ã‚«ãƒ¼ãƒ‰ã‚«ã‚¦ãƒ³ãƒˆ;     //è¦ç´ ã‚’ä¸€å€‹ãšã¤è¦‹ã¦ã€æ¡ä»¶ã¨ä¸€è‡´ã™ã‚‹ã‚‚ã®ã‚’è¦ç´ ã«ã‚‚ã¤é…åˆ—ã‚’ç”Ÿæˆã™ã‚‹
                                }).length+ã‚«ãƒ¼ãƒ‰ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹;            
                            
                        }

                        ã‚«ãƒ¼ãƒ‰ã‚«ã‚¦ãƒ³ãƒˆ=0;//ACEã®ç™»éŒ²
                        pre_ã‚«ãƒ¼ãƒ‰="";
                        for(let i=0;i<deck_list.ACE.length;i++){
                            if(deck_list.ACE[i]==pre_ã‚«ãƒ¼ãƒ‰){
                                ã‚«ãƒ¼ãƒ‰ã‚«ã‚¦ãƒ³ãƒˆ+=1;
                                ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.ACE[i]=ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.card_list.indexOf(deck_list.ACE[i])+ã‚«ãƒ¼ãƒ‰ã‚«ã‚¦ãƒ³ãƒˆ;
                            }else{
                                ã‚«ãƒ¼ãƒ‰ã‚«ã‚¦ãƒ³ãƒˆ=0;
                                ã‚«ãƒ¼ãƒ‰ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹=deck_list.TOP_ACE.indexOf(deck_list.ACE[i]);
                                if(ã‚«ãƒ¼ãƒ‰ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹!=-1){//TOPã«ACEã¨åŒã˜ã‚«ãƒ¼ãƒ‰ã‚ã‚‹ã˜ã‚ƒã‚“
                                    for(let j=ã‚«ãƒ¼ãƒ‰ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹;j<deck_list.TOP_ACE.length;j++){
                                        if(deck_list.TOP_ACE[j]==deck_list.TOP_ACE[ã‚«ãƒ¼ãƒ‰ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹]){
                                            ã‚«ãƒ¼ãƒ‰ã‚«ã‚¦ãƒ³ãƒˆ+=1;
                                        }else{
                                            //break;æ€–ã„ã‹ã‚‰ã‚„ã‚ã¨ã“
                                        }
                                    }
                                }
                                ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.ACE[i]=ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.card_list.indexOf(deck_list.ACE[i])+ã‚«ãƒ¼ãƒ‰ã‚«ã‚¦ãƒ³ãƒˆ;
                            }
                            pre_ã‚«ãƒ¼ãƒ‰=deck_list.ACE[i];
                        }
                        
                        ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.ACE.sort(compare);
                        //ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.TOP_ACE.sort(compare);
                        game_phase="ãƒ‡ãƒƒã‚­ç·¨é›†";
                        sub_phase="åŸºæœ¬";
                        scroll_x=0;
                        scroll_x2=0;
                        my_deck_pull_ç·¨é›†ä¸­=my_deck_pull;
                    }else if(game_phase=="ãƒ‡ãƒƒã‚­ç·¨é›†"){

                        if(key_interval<=0 && key_input!=""){//ã‚­ãƒ¼ãŒé•·æŠ¼ã—ã•ã‚Œã¦ã„ã‚‹å ´åˆã¯key_intervalãŒ0ã«ãªã£ã¦ã¦ã€ã‚­ãƒ¼æ“ä½œãŒé£›ã‚“ã§ããŸã‚‰
                            key_interval=5;//30*n/1000[s]ã®é–“ã€é•·æŠ¼ã—ã§ã®é€£ç¶šå…¥åŠ›ã‚’ç„¡åŠ¹ã€‚
                            for(let i=0;i<key_input.length;i++){
                                if(sub_phase=="åŸºæœ¬"){
                                    if(key_input.charAt(i)=="â†‘"){
                                        if(cursor_y>0){
                                            cursor_y-=1;
                                        }
                                    }else if(key_input.charAt(i)=="â†"){
                                        if(cursor_x>0){
                                            cursor_x-=1;
                                        }else if(cursor_y==0 && scroll_x!=0){
                                            scroll_x-=1;
                                        }else if((cursor_y==1 || cursor_y==2) && scroll_x2!=0){
                                            scroll_x2-=1;
                                        }
                                        
                                    }else if(key_input.charAt(i)=="â†’"){
                                        if(cursor_x<6){
                                            cursor_x+=1;
                                        }else if(cursor_y==0 && scroll_x<ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.card_list.length-7){
                                            scroll_x+=1;
                                        }else if((cursor_y==1 || cursor_y==2) && scroll_x2<æ‰€æŒã‚«ãƒ¼ãƒ‰.length/2-7){
                                            scroll_x2+=1;
                                        }
                                        
                                    }else if(key_input.charAt(i)=="â†“"){
                                        if(cursor_y<2){
                                            cursor_y+=1;
                                        }
                                    }else if(key_input.charAt(i)=="ã€‡" && é•·æŠ¼ã—é˜»æ­¢==0){
                                        é•·æŠ¼ã—é˜»æ­¢=1;
                                        if(syousai_card!=""){
                                            sub_phase="ã‚«ãƒ¼ãƒ‰ç§»å‹•";
                                            if(ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.card_list.indexOf(syousai_card)!=-1){
                                                scroll_x=ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.card_list.indexOf(syousai_card);
                                            }else{
                                                scroll_x=ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.card_list.length;
                                            }
                                            cursor2=0;
                                            ã“ã‚Œã®ãƒ‡ãƒƒã‚­æšæ•°=0;
                                            ã“ã‚Œã®æ‰€æŒæšæ•°=0;
                                        }
                                        
                                        
                                    }else if(key_input.charAt(i)=="Ã—" && é•·æŠ¼ã—é˜»æ­¢==0){
                                        é•·æŠ¼ã—é˜»æ­¢=1;
                                        sub_phase="ãƒ¡ãƒ‹ãƒ¥ãƒ¼";
                                        cursor2=0;
                                    }
                                }else if(sub_phase=="ã‚«ãƒ¼ãƒ‰ç§»å‹•"){//-----------------------------------------------
                                    if(key_input.charAt(i)=="â†‘"){
                                        cursor2=(cursor2+1)%2;
                                    }else if(key_input.charAt(i)=="â†"){
                                    }else if(key_input.charAt(i)=="â†’"){
                                    }else if(key_input.charAt(i)=="â†“"){
                                        cursor2=(cursor2+1)%2;
                                    }else if(key_input.charAt(i)=="ã€‡" && é•·æŠ¼ã—é˜»æ­¢==0){
                                        é•·æŠ¼ã—é˜»æ­¢=1;
                                        if(cursor2==0){
                                            if(ã“ã‚Œã®ãƒ‡ãƒƒã‚­æšæ•°!=ã“ã‚Œã®æ‰€æŒæšæ•°){
                                                if(ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.card_list.indexOf(syousai_card)!=-1){
                                                    ã‚«ãƒ¼ãƒ‰ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹=ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.card_list.indexOf(syousai_card)+ã“ã‚Œã®ãƒ‡ãƒƒã‚­æšæ•°;
                                                }else{
                                                    ã‚«ãƒ¼ãƒ‰ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹=ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.card_list.length;
                                                }
                                                
                                                ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.card_list.splice(ã‚«ãƒ¼ãƒ‰ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹,0,syousai_card);//è¿½åŠ 
                                                
                                                for(let i=0;i<ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.ACE.length;i++){
                                                    if(ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.ACE[i]>=ã‚«ãƒ¼ãƒ‰ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹){
                                                        ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.ACE[i]+=1;
                                                    }
                                                }
                                                for(let i=0;i<ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.TOP_ACE.length;i++){
                                                    if(ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.TOP_ACE[i]>=ã‚«ãƒ¼ãƒ‰ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹){
                                                        ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.TOP_ACE[i]+=1;
                                                    }
                                                }
                                            }
                                        }else{
                                            if(ã“ã‚Œã®ãƒ‡ãƒƒã‚­æšæ•°!=0){
                                                ã‚«ãƒ¼ãƒ‰ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹=ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.card_list.indexOf(syousai_card)+ã“ã‚Œã®ãƒ‡ãƒƒã‚­æšæ•°-1;
                                                ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.card_list.splice(ã‚«ãƒ¼ãƒ‰ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹,1);//å‰Šé™¤
                                                for(let i=0;i<ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.ACE.length;i++){
                                                    if(ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.ACE[i]>ã‚«ãƒ¼ãƒ‰ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹){
                                                        ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.ACE[i]-=1;
                                                    }else if(ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.ACE[i]==ã‚«ãƒ¼ãƒ‰ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹){
                                                        ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.ACE.splice(i,1);//æ¶ˆã—ã¾ã—ã‚‡ã†ã­
                                                        i-=1;
                                                    }
                                                }
                                                for(let i=0;i<ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.TOP_ACE.length;i++){
                                                    if(ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.TOP_ACE[i]>ã‚«ãƒ¼ãƒ‰ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹){
                                                        ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.TOP_ACE[i]-=1;
                                                    }else if(ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.TOP_ACE[i]==ã‚«ãƒ¼ãƒ‰ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹){
                                                        ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.TOP_ACE.splice(i,1);//æ¶ˆã—ã¾ã—ã‚‡ã†ã­
                                                        i-=1;
                                                    }
                                                }
                                            }
                                        }
                                    }else if(key_input.charAt(i)=="Ã—" && é•·æŠ¼ã—é˜»æ­¢==0){
                                        é•·æŠ¼ã—é˜»æ­¢=1;
                                        sub_phase="åŸºæœ¬";
                                    }
                                }else if(sub_phase=="ãƒ¡ãƒ‹ãƒ¥ãƒ¼"){
                                    if(key_input.charAt(i)=="â†‘"){
                                        cursor2-=1;
                                        if(cursor2==-1){
                                            cursor2=5;
                                        }
                                    }else if(key_input.charAt(i)=="â†"){
                                        if(cursor2==3){
                                            if(my_deck_pull_ç·¨é›†ä¸­==0){
                                                my_deck_pull_ç·¨é›†ä¸­=my_pull;
                                            }else{
                                                my_deck_pull_ç·¨é›†ä¸­-=1;
                                            }
                                        }
                                    }else if(key_input.charAt(i)=="â†’"){
                                        if(cursor2==3){
                                            if(my_deck_pull_ç·¨é›†ä¸­==my_pull){
                                                my_deck_pull_ç·¨é›†ä¸­=0;
                                            }else{
                                                my_deck_pull_ç·¨é›†ä¸­+=1;
                                            }
                                        }
                                    }else if(key_input.charAt(i)=="â†“"){
                                        cursor2+=1;
                                        if(cursor2==6){
                                            cursor2=0;
                                        }
                                    }else if(key_input.charAt(i)=="ã€‡" && é•·æŠ¼ã—é˜»æ­¢==0){
                                        é•·æŠ¼ã—é˜»æ­¢=1;
                                        if(cursor2==0){
                                            sub_phase="åŸºæœ¬";
                                        }else if(cursor2==1){
                                            sub_phase="ACEç·¨é›†";
                                            scroll_x2=0;
                                        }else if(cursor2==2){
                                            sub_phase="ãƒ‡ãƒƒã‚­ãƒªã‚¹ãƒˆ";
                                            cursor=1;
                                            cursor2=0;

                                        }else if(cursor2==3){
                                            
                                            //ãªã„ã§ã™ã€‚
                                            
                                        }else if(cursor2==4){
                                            if(MAX_deck>=ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.card_list.length){
                                                sub_phase="ä¿å­˜ç¢ºèª";
                                            }else{
                                                sub_phase="æšæ•°ã‚¨ãƒ©ãƒ¼";
                                            }
                                            cursor2=0;

                                        }else if(cursor2==5){
                                            sub_phase="ä¿å­˜ã—ãªã„";
                                            cursor2=0;
                                        }
                                    }else if(key_input.charAt(i)=="Ã—" && é•·æŠ¼ã—é˜»æ­¢==0){
                                        é•·æŠ¼ã—é˜»æ­¢=1;
                                        sub_phase="åŸºæœ¬";
                                    }
                                }else if(sub_phase=="ä¿å­˜ç¢ºèª" || sub_phase=="ä¿å­˜ã—ãªã„" || sub_phase=="æšæ•°ã‚¨ãƒ©ãƒ¼" || sub_phase=="ACEä¿å­˜ç¢ºèª" || sub_phase=="ACEä¿å­˜ã—ãªã„" || sub_phase=="ACEæšæ•°ã‚¨ãƒ©ãƒ¼"){
                                    if(key_input.charAt(i)=="â†‘"){
                                        cursor2=(cursor2+1)%2;
                                    }else if(key_input.charAt(i)=="â†"){
                                    }else if(key_input.charAt(i)=="â†’"){
                                    }else if(key_input.charAt(i)=="â†“"){
                                        cursor2=(cursor2+1)%2;
                                    }else if(key_input.charAt(i)=="ã€‡" && é•·æŠ¼ã—é˜»æ­¢==0){
                                        é•·æŠ¼ã—é˜»æ­¢=1;
                                        if(sub_phase=="ä¿å­˜ç¢ºèª" || sub_phase=="ACEä¿å­˜ç¢ºèª"){//TOP_ACEã®å¬å–šé †ç•ªã‚’ã‚½ãƒ¼ãƒˆã—ã¡ã‚ƒã†ã®ã‚ˆããªã„æ°—ãŒã™ã‚‹ã‚“ã ã‘ã©ã€ã§ã‚†ã£ã¡ã‚ã‚“ã©ãã¡ã‚ƒã„ã‚ˆ
                                            if(cursor2==0){
                                                ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.ACE.sort(compare);
                                                //ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.TOP_ACE.sort(compare);
                                                //åŒç¨®ã‚«ãƒ¼ãƒ‰å†…ã§ã®ã‚½ãƒ¼ãƒˆã—ã¦ã»ã—ã„
                                                ç·¨é›†ä¸­ACE=[];
                                                ç·¨é›†ä¸­TOP_ACE=[];

                                                for(let i=0;i<ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.ACE.length;i++){
                                                    ç·¨é›†ä¸­ACE[i]=ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.card_list[ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.ACE[i]];
                                                }
                                                for(let i=0;i<ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.TOP_ACE.length;i++){
                                                    ç·¨é›†ä¸­TOP_ACE[i]=ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.card_list[ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.TOP_ACE[i]];
                                                
                                                }
                                                deck_list.ACE=ç·¨é›†ä¸­ACE;
                                                deck_list.TOP_ACE=ç·¨é›†ä¸­TOP_ACE;
                                                
                                                ã‚«ãƒ¼ãƒ‰ã‚«ã‚¦ãƒ³ãƒˆ=1;
                                                pre_ã‚«ãƒ¼ãƒ‰=ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.card_list[0];
                                                deck_list.card_list=[];
                                                if(ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.card_list.length!=0){
                                                    for(let i=1;i<ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.card_list.length;i++){//ä¸€æšç›®ã¨ã°ãã†
                                                        if(pre_ã‚«ãƒ¼ãƒ‰==ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.card_list[i]){
                                                            ã‚«ãƒ¼ãƒ‰ã‚«ã‚¦ãƒ³ãƒˆ+=1;
                                                        }else{
                                                            deck_list.card_list[deck_list.card_list.length]=[pre_ã‚«ãƒ¼ãƒ‰,ã‚«ãƒ¼ãƒ‰ã‚«ã‚¦ãƒ³ãƒˆ];
                                                            pre_ã‚«ãƒ¼ãƒ‰=ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.card_list[i];
                                                            ã‚«ãƒ¼ãƒ‰ã‚«ã‚¦ãƒ³ãƒˆ=1;
                                                        }
                                                    }
                                                    deck_list.card_list[deck_list.card_list.length]=[pre_ã‚«ãƒ¼ãƒ‰,ã‚«ãƒ¼ãƒ‰ã‚«ã‚¦ãƒ³ãƒˆ];//æœ€å¾ŒæŠœã‘ã¦ãŸï½—
                                                }
                                                my_deck_pull=my_deck_pull_ç·¨é›†ä¸­;
                                                localStorage.setItem('my_deck_pull',my_deck_pull);//ã‚²ãƒ¼ãƒ ãƒ‡ãƒ¼ã‚¿ã‚»ãƒ¼ãƒ–
                                                ãƒ‡ãƒƒã‚­ã®ã‚»ãƒ¼ãƒ–();
                                                next_phase="ã‚¹ãƒ†ãƒ¼ã‚¸é¸æŠ";
                                                æ¼”å‡ºã‚«ã‚¦ãƒ³ãƒˆ=1;
                                            }else{
                                                if(sub_phase=="ä¿å­˜ç¢ºèª"){
                                                    sub_phase="åŸºæœ¬";
                                                }else{
                                                    sub_phase="ACEç·¨é›†";
                                                }
                                            }
                                        }else if(sub_phase=="ä¿å­˜ã—ãªã„" || sub_phase=="ACEä¿å­˜ã—ãªã„"){
                                            if(cursor2==0){
                                                next_phase="ã‚¹ãƒ†ãƒ¼ã‚¸é¸æŠ";
                                                æ¼”å‡ºã‚«ã‚¦ãƒ³ãƒˆ=1;
                                            }else{
                                                if(sub_phase=="ä¿å­˜ã—ãªã„"){
                                                    sub_phase="åŸºæœ¬";
                                                }else{
                                                    sub_phase="ACEç·¨é›†";
                                                }
                                            }
                                        }else if(sub_phase=="æšæ•°ã‚¨ãƒ©ãƒ¼"){
                                            sub_phase="åŸºæœ¬";
                                        }else if(sub_phase=="ACEæšæ•°ã‚¨ãƒ©ãƒ¼"){
                                            sub_phase="ACEç·¨é›†";
                                        }
                                    }else if(key_input.charAt(i)=="Ã—" && é•·æŠ¼ã—é˜»æ­¢==0){
                                        é•·æŠ¼ã—é˜»æ­¢=1;
                                    }
                                }else if(sub_phase=="ACEç·¨é›†" || sub_phase=="decké¸æŠ" || sub_phase=="ACEé¸æŠ" || sub_phase=="TOP_ACEé¸æŠ"){
                                    if(key_input.charAt(i)=="â†‘"){
                                        if(cursor_y>0){
                                            cursor_y-=1;
                                        }
                                    }else if(key_input.charAt(i)=="â†"){
                                        if(cursor_x>0){
                                            cursor_x-=1;
                                        }else if(cursor_y==0 && scroll_x!=0){
                                            scroll_x-=1;
                                        }else if((cursor_y==1 || cursor_y==2) && scroll_x2!=0){
                                            scroll_x2-=1;
                                        }
                                        
                                    }else if(key_input.charAt(i)=="â†’"){
                                        if(cursor_x<6){
                                            cursor_x+=1;
                                        }else if(cursor_y==0 && scroll_x<ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.card_list.length-7){
                                            scroll_x+=1;
                                        }else if((cursor_y==1 || cursor_y==2) && scroll_x2<Math.max(MAX_ACE,MAX_TOP_ACE)-7){
                                            scroll_x2+=1;
                                        }
                                        
                                    }else if(key_input.charAt(i)=="â†“"){
                                        if(cursor_y<2){
                                            cursor_y+=1;
                                        }
                                    }else if(key_input.charAt(i)=="ã€‡" && é•·æŠ¼ã—é˜»æ­¢==0){
                                        é•·æŠ¼ã—é˜»æ­¢=1;
                                        if(sub_phase=="ACEç·¨é›†" && ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.card_list.length!=0){
                                            if(cursor_y==0 && syousai_card!=""){
                                                ã‚«ãƒ¼ãƒ‰ã‚¹ãƒ¯ãƒƒãƒ—=cursor_x+scroll_x;
                                                sub_phase="decké¸æŠ";
                                            }else if(cursor_y==1 &&  MAX_ACE>cursor_x+scroll_x2){
                                                ã‚«ãƒ¼ãƒ‰ã‚¹ãƒ¯ãƒƒãƒ—=cursor_x+scroll_x2;
                                                sub_phase="ACEé¸æŠ";
                                            }else if(cursor_y==2 &&  MAX_TOP_ACE>cursor_x+scroll_x2){
                                                ã‚«ãƒ¼ãƒ‰ã‚¹ãƒ¯ãƒƒãƒ—=cursor_x+scroll_x2;
                                                sub_phase="TOP_ACEé¸æŠ";
                                            }
                                        }else if(sub_phase=="decké¸æŠ"){
                                            if(cursor_y==0){
                                                if(ã‚«ãƒ¼ãƒ‰ã‚¹ãƒ¯ãƒƒãƒ—==(cursor_x+scroll_x)){//åŒã˜ã‚«ãƒ¼ãƒ‰ã‚’é¸æŠâ€¦è§£é™¤ï¼Ÿã‚­ãƒ£ãƒ³ã‚»ãƒ«ã‹ï¼Ÿ
                                                    if(ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.ACE.indexOf(ã‚«ãƒ¼ãƒ‰ã‚¹ãƒ¯ãƒƒãƒ—)!=-1){
                                                        ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.ACE.splice(ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.ACE.indexOf(ã‚«ãƒ¼ãƒ‰ã‚¹ãƒ¯ãƒƒãƒ—),1);//æ¶ˆã—ã¾ã—ã‚‡ã†ã­
                                                        //æ¶ˆã—ãŸã‚‰ã‚½ãƒ¼ãƒˆã—ãŸããªã„ï¼Ÿâ†’å…¨ä½“ç·¨é›†å¾Œã§ã„ã„ã‚ˆ
                                                    }else if(ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.TOP_ACE.indexOf(ã‚«ãƒ¼ãƒ‰ã‚¹ãƒ¯ãƒƒãƒ—)!=-1){
                                                        ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.TOP_ACE.splice(ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.TOP_ACE.indexOf(ã‚«ãƒ¼ãƒ‰ã‚¹ãƒ¯ãƒƒãƒ—),1);//æ¶ˆã—ã¾ã—ã‚‡ã†ã­
                                                    }
                                                    ã‚«ãƒ¼ãƒ‰ã‚¹ãƒ¯ãƒƒãƒ—=0;
                                                    sub_phase="ACEç·¨é›†";
                                                }
                                            }else if(cursor_y==1){
                                                if(MAX_ACE>cursor_x+scroll_x2){
                                                    if(ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.ACE.length>cursor_x+scroll_x2){
                                                        pre_ã‚«ãƒ¼ãƒ‰=ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.ACE[cursor_x+scroll_x2];
                                                        if(ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.ACE.indexOf(ã‚«ãƒ¼ãƒ‰ã‚¹ãƒ¯ãƒƒãƒ—)!=-1){//ACE - ACE
                                                            ã‚«ãƒ¼ãƒ‰ã‚¹ãƒ¯ãƒƒãƒ—=0;
                                                            sub_phase="ACEç·¨é›†";
                                                        }else if(ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.TOP_ACE.indexOf(ã‚«ãƒ¼ãƒ‰ã‚¹ãƒ¯ãƒƒãƒ—)!=-1){//TOP - ACE
                                                            ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.ACE[cursor_x+scroll_x2]=ã‚«ãƒ¼ãƒ‰ã‚¹ãƒ¯ãƒƒãƒ—;
                                                            ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.TOP_ACE[ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.TOP_ACE.indexOf(ã‚«ãƒ¼ãƒ‰ã‚¹ãƒ¯ãƒƒãƒ—)]=pre_ã‚«ãƒ¼ãƒ‰;
                                                            
                                                            ã‚«ãƒ¼ãƒ‰ã‚¹ãƒ¯ãƒƒãƒ—=0;
                                                            sub_phase="ACEç·¨é›†";
                                                        }else{//NULL -ACE
                                                            ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.ACE[cursor_x+scroll_x2]=ã‚«ãƒ¼ãƒ‰ã‚¹ãƒ¯ãƒƒãƒ—;
                                                            
                                                            ã‚«ãƒ¼ãƒ‰ã‚¹ãƒ¯ãƒƒãƒ—=0;
                                                            sub_phase="ACEç·¨é›†";

                                                        }
                                                    }else{//ACEã®ã‚ã„ã¦ã‚‹ã¨ã“ã‚ã ã­
                                                        if(ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.ACE.indexOf(ã‚«ãƒ¼ãƒ‰ã‚¹ãƒ¯ãƒƒãƒ—)!=-1){//ACE - ACE
                                                            ã‚«ãƒ¼ãƒ‰ã‚¹ãƒ¯ãƒƒãƒ—=0;
                                                            sub_phase="ACEç·¨é›†";
                                                        }else if(ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.TOP_ACE.indexOf(ã‚«ãƒ¼ãƒ‰ã‚¹ãƒ¯ãƒƒãƒ—)!=-1){//TOP - ACE
                                                            ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.ACE.push(ã‚«ãƒ¼ãƒ‰ã‚¹ãƒ¯ãƒƒãƒ—);
                                                            ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.TOP_ACE.splice(ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.TOP_ACE.indexOf(ã‚«ãƒ¼ãƒ‰ã‚¹ãƒ¯ãƒƒãƒ—),1);//æ¶ˆã—ã¾ã—ã‚‡ã†ã­
                                                            
                                                            ã‚«ãƒ¼ãƒ‰ã‚¹ãƒ¯ãƒƒãƒ—=0;
                                                            sub_phase="ACEç·¨é›†";
                                                        }else{//NULL -ACE
                                                            ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.ACE.push(ã‚«ãƒ¼ãƒ‰ã‚¹ãƒ¯ãƒƒãƒ—);
                                                            
                                                            ã‚«ãƒ¼ãƒ‰ã‚¹ãƒ¯ãƒƒãƒ—=0;
                                                            sub_phase="ACEç·¨é›†";

                                                        }
                                                    }
                                                }
                                            }else if(cursor_y==2){
                                                if(MAX_TOP_ACE>cursor_x+scroll_x2){
                                                    if(ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.TOP_ACE.length>cursor_x+scroll_x2){
                                                        pre_ã‚«ãƒ¼ãƒ‰=ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.TOP_ACE[cursor_x+scroll_x2];
                                                        if(ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.ACE.indexOf(ã‚«ãƒ¼ãƒ‰ã‚¹ãƒ¯ãƒƒãƒ—)!=-1){//ACE - TOP
                                                            ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.TOP_ACE[cursor_x+scroll_x2]=ã‚«ãƒ¼ãƒ‰ã‚¹ãƒ¯ãƒƒãƒ—;
                                                            ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.ACE[ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.ACE.indexOf(ã‚«ãƒ¼ãƒ‰ã‚¹ãƒ¯ãƒƒãƒ—)]=pre_ã‚«ãƒ¼ãƒ‰;

                                                            ã‚«ãƒ¼ãƒ‰ã‚¹ãƒ¯ãƒƒãƒ—=0;
                                                            sub_phase="ACEç·¨é›†";
                                                        }else if(ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.TOP_ACE.indexOf(ã‚«ãƒ¼ãƒ‰ã‚¹ãƒ¯ãƒƒãƒ—)!=-1){//TOP - TOP
                                                            ã‚«ãƒ¼ãƒ‰ã‚¹ãƒ¯ãƒƒãƒ—=0;
                                                            sub_phase="ACEç·¨é›†";
                                                        }else{//NULL - TOP
                                                            ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.TOP_ACE[cursor_x+scroll_x2]=ã‚«ãƒ¼ãƒ‰ã‚¹ãƒ¯ãƒƒãƒ—;
                                                            
                                                            ã‚«ãƒ¼ãƒ‰ã‚¹ãƒ¯ãƒƒãƒ—=0;
                                                            sub_phase="ACEç·¨é›†";

                                                        }
                                                    }else{//TOP_ACEã®ã‚ã„ã¦ã‚‹ã¨ã“ã‚ã ã­
                                                        if(ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.ACE.indexOf(ã‚«ãƒ¼ãƒ‰ã‚¹ãƒ¯ãƒƒãƒ—)!=-1){//ACE - TOP
                                                            
                                                            ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.TOP_ACE.push(ã‚«ãƒ¼ãƒ‰ã‚¹ãƒ¯ãƒƒãƒ—);
                                                            ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.ACE.splice(ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.ACE.indexOf(ã‚«ãƒ¼ãƒ‰ã‚¹ãƒ¯ãƒƒãƒ—),1);//æ¶ˆã—ã¾ã—ã‚‡ã†ã­
                                                            ã‚«ãƒ¼ãƒ‰ã‚¹ãƒ¯ãƒƒãƒ—=0;
                                                            sub_phase="ACEç·¨é›†";
                                                        }else if(ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.TOP_ACE.indexOf(ã‚«ãƒ¼ãƒ‰ã‚¹ãƒ¯ãƒƒãƒ—)!=-1){//TOP - TOP
                                                            
                                                            ã‚«ãƒ¼ãƒ‰ã‚¹ãƒ¯ãƒƒãƒ—=0;
                                                            sub_phase="ACEç·¨é›†";
                                                        }else{//NULL - TOP
                                                            ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.TOP_ACE.push(ã‚«ãƒ¼ãƒ‰ã‚¹ãƒ¯ãƒƒãƒ—);
                                                            
                                                            ã‚«ãƒ¼ãƒ‰ã‚¹ãƒ¯ãƒƒãƒ—=0;
                                                            sub_phase="ACEç·¨é›†";

                                                        }
                                                    }
                                                }
                                            }
                                        }else if(sub_phase=="ACEé¸æŠ"){
                                            if(ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.ACE.length>ã‚«ãƒ¼ãƒ‰ã‚¹ãƒ¯ãƒƒãƒ—){
                                                if(cursor_y==0  && syousai_card!=""){
                                                    if(ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.ACE.indexOf(cursor_x+scroll_x)!=-1){//ACE - ACE
                                                        ã‚«ãƒ¼ãƒ‰ã‚¹ãƒ¯ãƒƒãƒ—=0;
                                                        sub_phase="ACEç·¨é›†";
                                                    }else if(ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.TOP_ACE.indexOf(cursor_x+scroll_x)!=-1){//TOP - ACE
                                                        
                                                        pre_ã‚«ãƒ¼ãƒ‰=cursor_x+scroll_x;
                                                        ã‚«ãƒ¼ãƒ‰ã‚¹ãƒ¯ãƒƒãƒ—=ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.ACE[ã‚«ãƒ¼ãƒ‰ã‚¹ãƒ¯ãƒƒãƒ—];
                                                        
                                                        ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.TOP_ACE[ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.TOP_ACE.indexOf(pre_ã‚«ãƒ¼ãƒ‰)]=ã‚«ãƒ¼ãƒ‰ã‚¹ãƒ¯ãƒƒãƒ—;
                                                        ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.ACE[ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.ACE.indexOf(ã‚«ãƒ¼ãƒ‰ã‚¹ãƒ¯ãƒƒãƒ—)]=pre_ã‚«ãƒ¼ãƒ‰;


                                                        ã‚«ãƒ¼ãƒ‰ã‚¹ãƒ¯ãƒƒãƒ—=0;
                                                        sub_phase="ACEç·¨é›†";
                                                    }else{//NULL -ACE
                                                        pre_ã‚«ãƒ¼ãƒ‰=cursor_x+scroll_x;
                                                        
                                                        ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.ACE[ã‚«ãƒ¼ãƒ‰ã‚¹ãƒ¯ãƒƒãƒ—]=pre_ã‚«ãƒ¼ãƒ‰;
                                                        

                                                        ã‚«ãƒ¼ãƒ‰ã‚¹ãƒ¯ãƒƒãƒ—=0;
                                                        sub_phase="ACEç·¨é›†";

                                                    }
                                                }else if(cursor_y==1){
                                                    if(ã‚«ãƒ¼ãƒ‰ã‚¹ãƒ¯ãƒƒãƒ—==(cursor_x+scroll_x2)){//åŒã˜ã‚«ãƒ¼ãƒ‰ã‚’é¸æŠâ€¦è§£é™¤ï¼
                                                        ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.ACE.splice(cursor_x+scroll_x2,1);//æ¶ˆã—ã¾ã—ã‚‡ã†ã­
                                                        ã‚«ãƒ¼ãƒ‰ã‚¹ãƒ¯ãƒƒãƒ—=0;
                                                        sub_phase="ACEç·¨é›†";
                                                    }
                                                }else if(cursor_y==2){
                                                    if(MAX_TOP_ACE>cursor_x+scroll_x2){
                                                        if(ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.TOP_ACE.length>cursor_x+scroll_x2){//ACE - TOP 
                                                            pre_ã‚«ãƒ¼ãƒ‰=ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.TOP_ACE[cursor_x+scroll_x2];
                                                            ã‚«ãƒ¼ãƒ‰ã‚¹ãƒ¯ãƒƒãƒ—=ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.ACE[ã‚«ãƒ¼ãƒ‰ã‚¹ãƒ¯ãƒƒãƒ—];
                                                            
                                                            ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.TOP_ACE[cursor_x+scroll_x2]=ã‚«ãƒ¼ãƒ‰ã‚¹ãƒ¯ãƒƒãƒ—;
                                                            ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.ACE[ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.ACE.indexOf(ã‚«ãƒ¼ãƒ‰ã‚¹ãƒ¯ãƒƒãƒ—)]=pre_ã‚«ãƒ¼ãƒ‰;

                                                            ã‚«ãƒ¼ãƒ‰ã‚¹ãƒ¯ãƒƒãƒ—=0;
                                                            sub_phase="ACEç·¨é›†";
                                                            
                                                        }else{//TOP_ACEã®ã‚ã„ã¦ã‚‹ã¨ã“ã‚ã ã­//ACE - TOP
                                                            ã‚«ãƒ¼ãƒ‰ã‚¹ãƒ¯ãƒƒãƒ—=ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.ACE[ã‚«ãƒ¼ãƒ‰ã‚¹ãƒ¯ãƒƒãƒ—];
                                                            ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.TOP_ACE.push(ã‚«ãƒ¼ãƒ‰ã‚¹ãƒ¯ãƒƒãƒ—);
                                                            ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.ACE.splice(ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.ACE.indexOf(ã‚«ãƒ¼ãƒ‰ã‚¹ãƒ¯ãƒƒãƒ—),1);//æ¶ˆã—ã¾ã—ã‚‡ã†ã­
                                                            ã‚«ãƒ¼ãƒ‰ã‚¹ãƒ¯ãƒƒãƒ—=0;
                                                            sub_phase="ACEç·¨é›†";
                                                            
                                                        }
                                                    }
                                                }
                                            }else{//ã“ã‚ŒACEã®é¸æŠå ´æ‰€ãŒNULLã ï¼
                                                if(cursor_y==0  && syousai_card!=""){
                                                    if(ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.ACE.indexOf(cursor_x+scroll_x)!=-1){//ACE - ACE
                                                        ã‚«ãƒ¼ãƒ‰ã‚¹ãƒ¯ãƒƒãƒ—=0;
                                                        sub_phase="ACEç·¨é›†";
                                                    }else if(ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.TOP_ACE.indexOf(cursor_x+scroll_x)!=-1){//TOP - ACE
                                                        
                                                        pre_ã‚«ãƒ¼ãƒ‰=cursor_x+scroll_x;
                                                        
                                                        ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.TOP_ACE.splice(ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.TOP_ACE.indexOf(pre_ã‚«ãƒ¼ãƒ‰),1);//æ¶ˆã—ã¾ã—ã‚‡ã†ã­
                                                        ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.ACE.push(pre_ã‚«ãƒ¼ãƒ‰);


                                                        ã‚«ãƒ¼ãƒ‰ã‚¹ãƒ¯ãƒƒãƒ—=0;
                                                        sub_phase="ACEç·¨é›†";
                                                    }else{//NULL -ACE
                                                        pre_ã‚«ãƒ¼ãƒ‰=cursor_x+scroll_x;
                                                        
                                                        ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.ACE.push(pre_ã‚«ãƒ¼ãƒ‰);
                                                        

                                                        ã‚«ãƒ¼ãƒ‰ã‚¹ãƒ¯ãƒƒãƒ—=0;
                                                        sub_phase="ACEç·¨é›†";

                                                    }
                                                }else if(cursor_y==1 && MAX_ACE>cursor_x+scroll_x2){//ã‚­ãƒ£ãƒ³ã‚»ãƒ«ï¼Ÿ
                                                        ã‚«ãƒ¼ãƒ‰ã‚¹ãƒ¯ãƒƒãƒ—=0;
                                                        sub_phase="ACEç·¨é›†";
                                                }else if(cursor_y==2 && MAX_TOP_ACE>cursor_x+scroll_x2){
                                                    if(ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.TOP_ACE.length>cursor_x+scroll_x2){//ACE - TOP 
                                                        pre_ã‚«ãƒ¼ãƒ‰=ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.TOP_ACE[cursor_x+scroll_x2];
                                                        
                                                        ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.ACE.push(pre_ã‚«ãƒ¼ãƒ‰);

                                                        ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.TOP_ACE.splice(cursor_x+scroll_x2,1);//æ¶ˆã—ã¾ã—ã‚‡ã†ã­
                                                        ã‚«ãƒ¼ãƒ‰ã‚¹ãƒ¯ãƒƒãƒ—=0;
                                                        sub_phase="ACEç·¨é›†";
                                                        
                                                    }else{//ã‚­ãƒ£ãƒ³ã‚»ãƒ«ï¼Ÿ
                                                        ã‚«ãƒ¼ãƒ‰ã‚¹ãƒ¯ãƒƒãƒ—=0;
                                                        sub_phase="ACEç·¨é›†";
                                                    }
                                                }
                                            }
                                            
                                        }else if(sub_phase=="TOP_ACEé¸æŠ"){
                                            if(ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.TOP_ACE.length>ã‚«ãƒ¼ãƒ‰ã‚¹ãƒ¯ãƒƒãƒ—){
                                                if(cursor_y==0 && syousai_card!=""){
                                                    if(ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.ACE.indexOf(cursor_x+scroll_x)!=-1){//ACE - TOP
                                                        pre_ã‚«ãƒ¼ãƒ‰=cursor_x+scroll_x;
                                                        ã‚«ãƒ¼ãƒ‰ã‚¹ãƒ¯ãƒƒãƒ—=ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.TOP_ACE[ã‚«ãƒ¼ãƒ‰ã‚¹ãƒ¯ãƒƒãƒ—];
                                                        
                                                        ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.ACE[ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.ACE.indexOf(pre_ã‚«ãƒ¼ãƒ‰)]=ã‚«ãƒ¼ãƒ‰ã‚¹ãƒ¯ãƒƒãƒ—;
                                                        ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.TOP_ACE[ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.TOP_ACE.indexOf(ã‚«ãƒ¼ãƒ‰ã‚¹ãƒ¯ãƒƒãƒ—)]=pre_ã‚«ãƒ¼ãƒ‰;

                                                        ã‚«ãƒ¼ãƒ‰ã‚¹ãƒ¯ãƒƒãƒ—=0;
                                                        sub_phase="ACEç·¨é›†";
                                                    }else if(ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.TOP_ACE.indexOf(cursor_x+scroll_x)!=-1){//TOP - TOP
                                                        
                                                        ã‚«ãƒ¼ãƒ‰ã‚¹ãƒ¯ãƒƒãƒ—=0;
                                                        sub_phase="ACEç·¨é›†";
                                                    }else{//NULL - TOP
                                                        pre_ã‚«ãƒ¼ãƒ‰=cursor_x+scroll_x;
                                                        
                                                        ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.TOP_ACE[ã‚«ãƒ¼ãƒ‰ã‚¹ãƒ¯ãƒƒãƒ—]=pre_ã‚«ãƒ¼ãƒ‰;
                                                        

                                                        ã‚«ãƒ¼ãƒ‰ã‚¹ãƒ¯ãƒƒãƒ—=0;
                                                        sub_phase="ACEç·¨é›†";

                                                    }
                                                }else if(cursor_y==1  && MAX_ACE>cursor_x+scroll_x2){
                                                    if(ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.ACE.length>cursor_x+scroll_x2){//ACE - TOP 
                                                        pre_ã‚«ãƒ¼ãƒ‰=ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.ACE[cursor_x+scroll_x2];
                                                        ã‚«ãƒ¼ãƒ‰ã‚¹ãƒ¯ãƒƒãƒ—=ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.TOP_ACE[ã‚«ãƒ¼ãƒ‰ã‚¹ãƒ¯ãƒƒãƒ—];
                                                        
                                                        ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.ACE[cursor_x+scroll_x2]=ã‚«ãƒ¼ãƒ‰ã‚¹ãƒ¯ãƒƒãƒ—;
                                                        ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.TOP_ACE[ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.TOP_ACE.indexOf(ã‚«ãƒ¼ãƒ‰ã‚¹ãƒ¯ãƒƒãƒ—)]=pre_ã‚«ãƒ¼ãƒ‰;

                                                        ã‚«ãƒ¼ãƒ‰ã‚¹ãƒ¯ãƒƒãƒ—=0;
                                                        sub_phase="ACEç·¨é›†";
                                                        
                                                    }else{//ACEã®ã‚ã„ã¦ã‚‹ã¨ã“ã‚ã ã­//ACE - TOP
                                                        ã‚«ãƒ¼ãƒ‰ã‚¹ãƒ¯ãƒƒãƒ—=ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.TOP_ACE[ã‚«ãƒ¼ãƒ‰ã‚¹ãƒ¯ãƒƒãƒ—];
                                                        ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.ACE.push(ã‚«ãƒ¼ãƒ‰ã‚¹ãƒ¯ãƒƒãƒ—);
                                                        ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.TOP_ACE.splice(ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.TOP_ACE.indexOf(ã‚«ãƒ¼ãƒ‰ã‚¹ãƒ¯ãƒƒãƒ—),1);//æ¶ˆã—ã¾ã—ã‚‡ã†ã­
                                                        ã‚«ãƒ¼ãƒ‰ã‚¹ãƒ¯ãƒƒãƒ—=0;
                                                        sub_phase="ACEç·¨é›†";
                                                        
                                                    }
                                                }else if(cursor_y==2 && MAX_TOP_ACE>cursor_x+scroll_x2){
                                                    if(ã‚«ãƒ¼ãƒ‰ã‚¹ãƒ¯ãƒƒãƒ—==(cursor_x+scroll_x2)){//åŒã˜ã‚«ãƒ¼ãƒ‰ã‚’é¸æŠâ€¦è§£é™¤ï¼
                                                        ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.TOP_ACE.splice(cursor_x+scroll_x2,1);//æ¶ˆã—ã¾ã—ã‚‡ã†ã­
                                                        ã‚«ãƒ¼ãƒ‰ã‚¹ãƒ¯ãƒƒãƒ—=0;
                                                        sub_phase="ACEç·¨é›†";
                                                    }else{//ã‚¹ãƒ¯ãƒƒãƒ—ã—ã¡ã‚ƒã†ã®ã§ã™ï¼
                                                        if(ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.TOP_ACE.length>cursor_x+scroll_x2){//ACE - TOP 
                                                            pre_ã‚«ãƒ¼ãƒ‰=ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.TOP_ACE[cursor_x+scroll_x2];
                                                        
                                                            ã‚«ãƒ¼ãƒ‰ã‚¹ãƒ¯ãƒƒãƒ—_ã‚«ãƒ¼ãƒ‰=ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.TOP_ACE[ã‚«ãƒ¼ãƒ‰ã‚¹ãƒ¯ãƒƒãƒ—];
                                                            
                                                            ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.TOP_ACE[cursor_x+scroll_x2]=ã‚«ãƒ¼ãƒ‰ã‚¹ãƒ¯ãƒƒãƒ—_ã‚«ãƒ¼ãƒ‰;
                                                            ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.TOP_ACE[ã‚«ãƒ¼ãƒ‰ã‚¹ãƒ¯ãƒƒãƒ—]=pre_ã‚«ãƒ¼ãƒ‰;

                                                            ã‚«ãƒ¼ãƒ‰ã‚¹ãƒ¯ãƒƒãƒ—=0;
                                                            sub_phase="ACEç·¨é›†";
                                                            
                                                        }else{//ã‚ã„ã¦ã‚‹ã¨ã“ã‚ã ã­
                                                            
                                                        }
                                                        
                                                    }
                                                    
                                                }
                                            }else{//ã“ã‚ŒTOP_ACEã®é¸æŠå ´æ‰€ãŒNULLã ï¼
                                                if(cursor_y==0 && syousai_card!=""){
                                                    if(ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.ACE.indexOf(cursor_x+scroll_x)!=-1){//ACE - TOP
                                                        pre_ã‚«ãƒ¼ãƒ‰=cursor_x+scroll_x;
                                                        
                                                        ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.ACE.splice(ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.ACE.indexOf(pre_ã‚«ãƒ¼ãƒ‰),1);//æ¶ˆã—ã¾ã—ã‚‡ã†ã­
                                                        ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.TOP_ACE.push(pre_ã‚«ãƒ¼ãƒ‰);

                                                        ã‚«ãƒ¼ãƒ‰ã‚¹ãƒ¯ãƒƒãƒ—=0;
                                                        sub_phase="ACEç·¨é›†";
                                                    }else if(ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.TOP_ACE.indexOf(cursor_x+scroll_x)!=-1){//TOP - TOP
                                                        ã‚«ãƒ¼ãƒ‰ã‚¹ãƒ¯ãƒƒãƒ—=0;
                                                        sub_phase="ACEç·¨é›†";
                                                    }else{//NULL - TOP
                                                        pre_ã‚«ãƒ¼ãƒ‰=cursor_x+scroll_x;
                                                        
                                                        ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.TOP_ACE.push(pre_ã‚«ãƒ¼ãƒ‰);
                                                        

                                                        ã‚«ãƒ¼ãƒ‰ã‚¹ãƒ¯ãƒƒãƒ—=0;
                                                        sub_phase="ACEç·¨é›†";

                                                    }
                                                }else if(cursor_y==1 && MAX_ACE>cursor_x+scroll_x2){
                                                    if(ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.ACE.length>cursor_x+scroll_x2){//ACE - TOP 
                                                        pre_ã‚«ãƒ¼ãƒ‰=ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.ACE[cursor_x+scroll_x2];
                                                        
                                                        ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.TOP_ACE.push(pre_ã‚«ãƒ¼ãƒ‰);

                                                        ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.ACE.splice(cursor_x+scroll_x2,1);//æ¶ˆã—ã¾ã—ã‚‡ã†ã­
                                                        ã‚«ãƒ¼ãƒ‰ã‚¹ãƒ¯ãƒƒãƒ—=0;
                                                        sub_phase="ACEç·¨é›†";
                                                        
                                                    }else{//ã‚­ãƒ£ãƒ³ã‚»ãƒ«ï¼Ÿ
                                                        ã‚«ãƒ¼ãƒ‰ã‚¹ãƒ¯ãƒƒãƒ—=0;
                                                        sub_phase="ACEç·¨é›†";
                                                    }
                                                }else if(cursor_y==2 && MAX_TOP_ACE>cursor_x+scroll_x2){//ã‚­ãƒ£ãƒ³ã‚»ãƒ«ï¼Ÿ
                                                        ã‚«ãƒ¼ãƒ‰ã‚¹ãƒ¯ãƒƒãƒ—=0;
                                                        sub_phase="ACEç·¨é›†";
                                                    
                                                }
                                            }
                                            
                                        }

                                    }else if(key_input.charAt(i)=="Ã—" && é•·æŠ¼ã—é˜»æ­¢==0){
                                        é•·æŠ¼ã—é˜»æ­¢=1;
                                        if( sub_phase=="decké¸æŠ" || sub_phase=="ACEé¸æŠ" || sub_phase=="TOP_ACEé¸æŠ"){
                                            ã‚«ãƒ¼ãƒ‰ã‚¹ãƒ¯ãƒƒãƒ—=0;
                                            sub_phase="ACEç·¨é›†";
                                        }else if(sub_phase=="ACEç·¨é›†"){
                                            cursor2=1;
                                            sub_phase="ACEãƒ¡ãƒ‹ãƒ¥ãƒ¼";
                                        }
                                    }
                                }else if(sub_phase=="ACEãƒ¡ãƒ‹ãƒ¥ãƒ¼"){
                                    if(key_input.charAt(i)=="â†‘"){
                                        cursor2-=1;
                                        if(cursor2==-1){
                                            cursor2=5;
                                        }
                                    }else if(key_input.charAt(i)=="â†"){
                                    }else if(key_input.charAt(i)=="â†’"){
                                    }else if(key_input.charAt(i)=="â†“"){
                                        cursor2+=1;
                                        if(cursor2==6){
                                            cursor2=0;
                                        }
                                    }else if(key_input.charAt(i)=="ã€‡" && é•·æŠ¼ã—é˜»æ­¢==0){
                                        é•·æŠ¼ã—é˜»æ­¢=1;
                                        if(cursor2==0){
                                            ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.ACE.sort(compare);
                                            //ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.TOP_ACE.sort(compare);
                                            //åŒç¨®ã‚«ãƒ¼ãƒ‰å†…ã§ã®ã‚½ãƒ¼ãƒˆã—ã¦ã»ã—ã„
                                            ç·¨é›†ä¸­ACE=[];
                                            ç·¨é›†ä¸­TOP_ACE=[];

                                            for(let i=0;i<ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.ACE.length;i++){
                                                ç·¨é›†ä¸­ACE[i]=ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.card_list[ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.ACE[i]];
                                            }
                                            for(let i=0;i<ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.TOP_ACE.length;i++){
                                                ç·¨é›†ä¸­TOP_ACE[i]=ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.card_list[ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.TOP_ACE[i]];
                                            
                                            }

                                            ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.ACE=[];
                                            ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.TOP_ACE=[];

                                            for(let i=0;i<ç·¨é›†ä¸­TOP_ACE.length;i++){//TOP_ACEã®ç™»éŒ²
                                                ã‚«ãƒ¼ãƒ‰ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹=ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.card_list.indexOf(ç·¨é›†ä¸­TOP_ACE[i]);
                                                ã‚«ãƒ¼ãƒ‰ã‚«ã‚¦ãƒ³ãƒˆ=0;
                                                for(let j=ã‚«ãƒ¼ãƒ‰ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹+1;j<ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.card_list.length;j++){
                                                    if(ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.card_list[j]==ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.card_list[ã‚«ãƒ¼ãƒ‰ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹]){
                                                        ã‚«ãƒ¼ãƒ‰ã‚«ã‚¦ãƒ³ãƒˆ+=1;
                                                    }else{
                                                        break;
                                                    }
                                                    
                                                }
                                                ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.TOP_ACE[i]=ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.TOP_ACE.filter(function(TOP_index){
                                                        return TOP_index>=ã‚«ãƒ¼ãƒ‰ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ && TOP_index<=ã‚«ãƒ¼ãƒ‰ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹+ã‚«ãƒ¼ãƒ‰ã‚«ã‚¦ãƒ³ãƒˆ;     //è¦ç´ ã‚’ä¸€å€‹ãšã¤è¦‹ã¦ã€æ¡ä»¶ã¨ä¸€è‡´ã™ã‚‹ã‚‚ã®ã‚’è¦ç´ ã«ã‚‚ã¤é…åˆ—ã‚’ç”Ÿæˆã™ã‚‹
                                                    }).length+ã‚«ãƒ¼ãƒ‰ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹;            
                                                
                                            }

                                            ã‚«ãƒ¼ãƒ‰ã‚«ã‚¦ãƒ³ãƒˆ=0;//ACEã®ç™»éŒ²
                                            pre_ã‚«ãƒ¼ãƒ‰="";
                                            for(let i=0;i<ç·¨é›†ä¸­ACE.length;i++){
                                                if(ç·¨é›†ä¸­ACE[i]==pre_ã‚«ãƒ¼ãƒ‰){
                                                    ã‚«ãƒ¼ãƒ‰ã‚«ã‚¦ãƒ³ãƒˆ+=1;
                                                    ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.ACE[i]=ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.card_list.indexOf(ç·¨é›†ä¸­ACE[i])+ã‚«ãƒ¼ãƒ‰ã‚«ã‚¦ãƒ³ãƒˆ;
                                                }else{
                                                    ã‚«ãƒ¼ãƒ‰ã‚«ã‚¦ãƒ³ãƒˆ=0;
                                                    ã‚«ãƒ¼ãƒ‰ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹=ç·¨é›†ä¸­TOP_ACE.indexOf(ç·¨é›†ä¸­ACE[i]);
                                                    if(ã‚«ãƒ¼ãƒ‰ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹!=-1){//TOPã«ACEã¨åŒã˜ã‚«ãƒ¼ãƒ‰ã‚ã‚‹ã˜ã‚ƒã‚“
                                                        for(let j=ã‚«ãƒ¼ãƒ‰ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹;j<ç·¨é›†ä¸­TOP_ACE.length;j++){
                                                            if(ç·¨é›†ä¸­TOP_ACE[j]==ç·¨é›†ä¸­TOP_ACE[ã‚«ãƒ¼ãƒ‰ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹]){
                                                                ã‚«ãƒ¼ãƒ‰ã‚«ã‚¦ãƒ³ãƒˆ+=1;
                                                            }else{
                                                                //break;æ€–ã„ã‹ã‚‰ã‚„ã‚ã¨ã“
                                                            }
                                                        }
                                                    }
                                                    ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.ACE[i]=ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.card_list.indexOf(ç·¨é›†ä¸­ACE[i])+ã‚«ãƒ¼ãƒ‰ã‚«ã‚¦ãƒ³ãƒˆ;
                                                }
                                                pre_ã‚«ãƒ¼ãƒ‰=ç·¨é›†ä¸­ACE[i];
                                            }
                                            sub_phase="åŸºæœ¬";
                                            scroll_x2=0;
                                        }else if(cursor2==1){
                                            
                                            sub_phase="ACEç·¨é›†";
                                            scroll_x2=0;
                                        }else if(cursor2==2){
                                            ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.ACE.sort(compare);
                                            ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.TOP_ACE.sort(compare);
                                            //åŒç¨®ã‚«ãƒ¼ãƒ‰å†…ã§ã®ã‚½ãƒ¼ãƒˆã—ã¦ã»ã—ã„
                                            ç·¨é›†ä¸­ACE=[];
                                            ç·¨é›†ä¸­TOP_ACE=[];

                                            for(let i=0;i<ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.ACE.length;i++){
                                                ç·¨é›†ä¸­ACE[i]=ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.card_list[ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.ACE[i]];
                                            }
                                            for(let i=0;i<ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.TOP_ACE.length;i++){
                                                ç·¨é›†ä¸­TOP_ACE[i]=ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.card_list[ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.TOP_ACE[i]];
                                            
                                            }

                                            ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.ACE=[];
                                            ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.TOP_ACE=[];

                                            ã‚«ãƒ¼ãƒ‰ã‚«ã‚¦ãƒ³ãƒˆ=0;//TOP_ACEã®ç™»éŒ²
                                            pre_ã‚«ãƒ¼ãƒ‰="";
                                            for(let i=0;i<ç·¨é›†ä¸­TOP_ACE.length;i++){
                                                if(ç·¨é›†ä¸­TOP_ACE[i]==pre_ã‚«ãƒ¼ãƒ‰){
                                                    ã‚«ãƒ¼ãƒ‰ã‚«ã‚¦ãƒ³ãƒˆ+=1;
                                                    ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.TOP_ACE[i]=ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.card_list.indexOf(ç·¨é›†ä¸­TOP_ACE[i])+ã‚«ãƒ¼ãƒ‰ã‚«ã‚¦ãƒ³ãƒˆ;
                                                }else{
                                                    ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.TOP_ACE[i]=ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.card_list.indexOf(ç·¨é›†ä¸­TOP_ACE[i]);
                                                    ã‚«ãƒ¼ãƒ‰ã‚«ã‚¦ãƒ³ãƒˆ=0;
                                                }
                                                pre_ã‚«ãƒ¼ãƒ‰=ç·¨é›†ä¸­TOP_ACE[i];
                                            }

                                            ã‚«ãƒ¼ãƒ‰ã‚«ã‚¦ãƒ³ãƒˆ=0;//ACEã®ç™»éŒ²
                                            pre_ã‚«ãƒ¼ãƒ‰="";
                                            for(let i=0;i<ç·¨é›†ä¸­ACE.length;i++){
                                                if(ç·¨é›†ä¸­ACE[i]==pre_ã‚«ãƒ¼ãƒ‰){
                                                    ã‚«ãƒ¼ãƒ‰ã‚«ã‚¦ãƒ³ãƒˆ+=1;
                                                    ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.ACE[i]=ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.card_list.indexOf(ç·¨é›†ä¸­ACE[i])+ã‚«ãƒ¼ãƒ‰ã‚«ã‚¦ãƒ³ãƒˆ;
                                                }else{
                                                    ã‚«ãƒ¼ãƒ‰ã‚«ã‚¦ãƒ³ãƒˆ=0;
                                                    ã‚«ãƒ¼ãƒ‰ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹=ç·¨é›†ä¸­TOP_ACE.indexOf(ç·¨é›†ä¸­ACE[i]);
                                                    if(ã‚«ãƒ¼ãƒ‰ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹!=-1){//TOPã«ACEã¨åŒã˜ã‚«ãƒ¼ãƒ‰ã‚ã‚‹ã˜ã‚ƒã‚“
                                                        for(let j=ã‚«ãƒ¼ãƒ‰ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹;j<ç·¨é›†ä¸­TOP_ACE.length;j++){
                                                            if(ç·¨é›†ä¸­TOP_ACE[j]==ç·¨é›†ä¸­TOP_ACE[ã‚«ãƒ¼ãƒ‰ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹]){
                                                                ã‚«ãƒ¼ãƒ‰ã‚«ã‚¦ãƒ³ãƒˆ+=1;
                                                            }else{
                                                                //break;æ€–ã„ã‹ã‚‰ã‚„ã‚ã¨ã“
                                                            }
                                                        }
                                                    }
                                                    ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.ACE[i]=ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.card_list.indexOf(ç·¨é›†ä¸­ACE[i])+ã‚«ãƒ¼ãƒ‰ã‚«ã‚¦ãƒ³ãƒˆ;
                                                }
                                                pre_ã‚«ãƒ¼ãƒ‰=ç·¨é›†ä¸­ACE[i];
                                            }


                                            sub_phase="ACEç·¨é›†";
                                            scroll_x2=0;
                                        }else if(cursor2==3){
                                            sub_phase="ãƒ‡ãƒƒã‚­ãƒªã‚¹ãƒˆ";
                                            cursor=1;
                                            cursor2=0;

                                        }else if(cursor2==4){
                                            
                                            if(MAX_deck>=ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.card_list.length){
                                                sub_phase="ACEä¿å­˜ç¢ºèª";
                                            }else{
                                                sub_phase="ACEæšæ•°ã‚¨ãƒ©ãƒ¼";
                                            }
                                            cursor2=0;
                                        }else if(cursor2==5){
                                            sub_phase="ACEä¿å­˜ã—ãªã„";
                                            cursor2=0;
                                        }
                                    }else if(key_input.charAt(i)=="Ã—" && é•·æŠ¼ã—é˜»æ­¢==0){
                                        é•·æŠ¼ã—é˜»æ­¢=1;
                                        sub_phase="ACEç·¨é›†";
                                    }
                                }else if(sub_phase=="ãƒ‡ãƒƒã‚­ãƒªã‚¹ãƒˆ"){
                                    if(key_input.charAt(i)=="â†‘"){
                                        if(cursor!=0){
                                            cursor-=1;
                                        }
                                    }else if(key_input.charAt(i)=="â†"){
                                        if(cursor==1){
                                            cursor2-=1;
                                            if(cursor2==-1){
                                                cursor2=4;
                                            }
                                        }
                                    }else if(key_input.charAt(i)=="â†’"){
                                        if(cursor==1){
                                            cursor2+=1;
                                            if(cursor2==5){
                                                cursor2=0;
                                            }
                                        }
                                    }else if(key_input.charAt(i)=="â†“"){
                                        if(cursor!=2){
                                            cursor+=1;
                                        }
                                    }else if(key_input.charAt(i)=="ã€‡" && é•·æŠ¼ã—é˜»æ­¢==0){
                                        if(cursor==0){
                                            ä¿å­˜ãƒ‡ãƒƒã‚­[cursor2].card_list=[...ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.card_list];//å€¤æ¸¡ã—â€¦ã‚‚ã£ã¨ã„ã„æ–¹æ³•ã­ãˆã®ã‹ï¼Ÿ
                                            ä¿å­˜ãƒ‡ãƒƒã‚­[cursor2].ACE=[...ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.ACE];
                                            ä¿å­˜ãƒ‡ãƒƒã‚­[cursor2].TOP_ACE=[...ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.TOP_ACE];
                                            ä¿å­˜ãƒ‡ãƒƒã‚­ã®ä¿å­˜();
                                        }else if(cursor==2){
                                            ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.card_list=[...ä¿å­˜ãƒ‡ãƒƒã‚­[cursor2].card_list];//å€¤æ¸¡ã—â€¦ã‚‚ã£ã¨ã„ã„æ–¹æ³•ã­ãˆã®ã‹ï¼Ÿ
                                            ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.ACE=[...ä¿å­˜ãƒ‡ãƒƒã‚­[cursor2].ACE];
                                            ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.TOP_ACE=[...ä¿å­˜ãƒ‡ãƒƒã‚­[cursor2].TOP_ACE];
                                            sub_phase="åŸºæœ¬";
                                            scroll_x=0;
                                        }
                                        é•·æŠ¼ã—é˜»æ­¢=1;
                                    }else if(key_input.charAt(i)=="Ã—" && é•·æŠ¼ã—é˜»æ­¢==0){
                                        sub_phase="åŸºæœ¬";
                                        é•·æŠ¼ã—é˜»æ­¢=1;
                                    }
                                }else{
                                    if(key_input.charAt(i)=="â†‘"){
                                    }else if(key_input.charAt(i)=="â†"){
                                    }else if(key_input.charAt(i)=="â†’"){
                                    }else if(key_input.charAt(i)=="â†“"){
                                    }else if(key_input.charAt(i)=="ã€‡" && é•·æŠ¼ã—é˜»æ­¢==0){
                                        é•·æŠ¼ã—é˜»æ­¢=1;
                                    }else if(key_input.charAt(i)=="Ã—" && é•·æŠ¼ã—é˜»æ­¢==0){
                                        é•·æŠ¼ã—é˜»æ­¢=1;
                                    }
                                }
                                
                            }
                            if(key_owarasete==1){//ã‚‚ã†ãƒœã‚¿ãƒ³æŠ¼ã—ã¦ãªã„ã€‚æŠ¼ã—ã¦ãªã„ã¨ãã¯ã‚¤ãƒ™ãƒ³ãƒˆãã‚“ã§æ¤œçŸ¥ã™ã‚‹ã‚“ã ã‘ã©ã€å®Ÿè¡Œã‚ˆã‚Šã‚‚å…ˆã«ã‚¤ãƒ™ãƒ³ãƒˆãŒå‘¼ã°ã‚Œã¦ãŸã‚‰ã—ã‹ãŸãªã„ã®ã§ã“ã„ã¤ã§æ­¢ã‚ã‚‹
                                key_input="";
                                key_interval=0;
                            }
                            
                        }else if(key_interval>0){
                            key_interval=key_interval-1;//ã‚«ã‚¦ãƒ³ãƒˆãƒ€ã‚¦ãƒ³
                        }

                        if(é•·æŠ¼ã—é˜»æ­¢==1 && ( key_input.indexOf("Ã—")==-1)){//Ã—ãƒœã‚¿ãƒ³ã®é•·æŠ¼ã—é€£æ‰“é˜»æ­¢ã€‚
                            é•·æŠ¼ã—é˜»æ­¢=0; 
                        }


                        ctx.fillStyle="rgb(50,50,80)";
                        ctx.fillRect(0,0,1000,1000);

                        if(sub_phase=="åŸºæœ¬" || sub_phase=="ã‚«ãƒ¼ãƒ‰ç§»å‹•" || sub_phase=="ãƒ¡ãƒ‹ãƒ¥ãƒ¼" || sub_phase=="ä¿å­˜ç¢ºèª" || sub_phase=="ä¿å­˜ã—ãªã„" || sub_phase=="æšæ•°ã‚¨ãƒ©ãƒ¼"){
                            //ã‚«ãƒ¼ãƒ‰è¡¨ç¤º
                            for(let i=0;i<9;i++){
                                ctx.fillStyle="rgb(200,200,200)";
                                if((i+scroll_x-1)>=0 && (i+scroll_x-1)<ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.card_list.length){
                                    ctx.fillRect(-130+140*i,10,140,220);
                                    ctx.drawImage(ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.card_list[i+scroll_x-1].image,-125+140*i,20);
                                    if(ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.TOP_ACE.indexOf(i+scroll_x-1)!=-1){
                                        ctx.fillStyle="rgb(255,0,0)";
                                        ctx.fillRect(-125+140*i-2,20,5,200);
                                        ctx.fillRect(-125+140*i+128,20,5,200);
                                        ctx.fillRect(-125+140*i,20,133,5);
                                        ctx.fillRect(-125+140*i,20+195,133,5);
                                    }
                                    if(ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.ACE.indexOf(i+scroll_x-1)!=-1){
                                        ctx.fillStyle="rgb(255,255,0)";
                                        ctx.fillRect(-125+140*i-2,20,5,200);
                                        ctx.fillRect(-125+140*i+128,20,5,200);
                                        ctx.fillRect(-125+140*i,20,133,5);
                                        ctx.fillRect(-125+140*i,20+195,133,5);
                                    }
                                } 
                            }

                            ctx.font = "40px  'ï¼­ï¼³ ã‚´ã‚·ãƒƒã‚¯'";//ãƒ•ã‚©ãƒ³ãƒˆè¨­å®šã€‚å·¦ã®ãƒ•ã‚©ãƒ³ãƒˆãŒãªã„ã¨å³ã®ãƒ•ã‚©ãƒ³ãƒˆã‚’é©ç”¨ã™ã‚‹ã‚‰ã—ã„ã€‚
                            for(let i=0;i<14;i++){
                                if(i<æ‰€æŒã‚«ãƒ¼ãƒ‰.length-scroll_x2*2){
                                    if(i%2==0){
                                        ctx.drawImage(æ‰€æŒã‚«ãƒ¼ãƒ‰[i+scroll_x2*2][0].image,10+140*(i/2),320);
                                        if(æ‰€æŒã‚«ãƒ¼ãƒ‰[i+scroll_x2*2][0].state.indexOf("é­”æ³•")!=-1){//é­”æ³•ã˜ã‚ƒã‚“ï¼‰
                                            ctx.fillStyle="rgb(0,200,0)";   
                                            ctx.fillRect(10+140*(i/2),320+145,133,45);
                                            ctx.fillStyle="rgb(255,255,255)";
                                            ctx.fillText("é­”æ³•",10+140*(i/2) , 500);
                                        }else{
                                            ctx.fillStyle="rgb(150,50,0)";  
                                            ctx.fillRect(10+140*(i/2),320+145,133,45);
                                        }
                                        
                                        
                                        ã‚«ãƒ¼ãƒ‰ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹=ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.card_list.indexOf(æ‰€æŒã‚«ãƒ¼ãƒ‰[i+scroll_x2*2][0]);
                                        if(ã‚«ãƒ¼ãƒ‰ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹!=-1){
                                            ã‚«ãƒ¼ãƒ‰ã‚«ã‚¦ãƒ³ãƒˆ=0;
                                            for(let j=ã‚«ãƒ¼ãƒ‰ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹;j<ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.card_list.length;j++){
                                                if(ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.card_list[j]==ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.card_list[ã‚«ãƒ¼ãƒ‰ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹]){
                                                    ã‚«ãƒ¼ãƒ‰ã‚«ã‚¦ãƒ³ãƒˆ+=1;
                                                }else{
                                                    break;
                                                }
                                            }
                                            
                                            ctx.fillStyle="rgb(0,0,0)";
                                            ctx.fillRect(90+140*(i/2),420,50,50);
                                            ctx.fillStyle="rgb(255,255,255)";
                                            ctx.fillRect(95+140*(i/2),425,40,40);
                                            ctx.fillStyle="rgb(100,0,0)";
                                            if(ã‚«ãƒ¼ãƒ‰ã‚«ã‚¦ãƒ³ãƒˆ<10){
                                                ctx.fillText(ã‚«ãƒ¼ãƒ‰ã‚«ã‚¦ãƒ³ãƒˆ, 105+140*(i/2), 460,40);
                                            }else{
                                                ctx.fillText(ã‚«ãƒ¼ãƒ‰ã‚«ã‚¦ãƒ³ãƒˆ, 95+140*(i/2), 460,40);
                                            }
                                            
                                        }
                                        ctx.fillStyle="rgb(0,0,0)";
                                        ctx.fillRect(90+140*(i/2),470,50,50);
                                        ctx.fillStyle="rgb(155,155,205)";
                                        ctx.fillRect(95+140*(i/2),475,40,40);
                                        ctx.fillStyle="rgb(255,255,255)";
                                        if(æ‰€æŒã‚«ãƒ¼ãƒ‰[i+scroll_x2*2][1]<10){
                                            ctx.fillText(æ‰€æŒã‚«ãƒ¼ãƒ‰[i+scroll_x2*2][1], 105+140*(i/2), 510,40);
                                        }else{
                                            ctx.fillText(æ‰€æŒã‚«ãƒ¼ãƒ‰[i+scroll_x2*2][1], 95+140*(i/2), 510,40);
                                        }
                                    }else{
                                        ctx.drawImage(æ‰€æŒã‚«ãƒ¼ãƒ‰[i+scroll_x2*2][0].image,10+140*((i-1)/2),530);
                                        if(æ‰€æŒã‚«ãƒ¼ãƒ‰[i+scroll_x2*2][0].state.indexOf("é­”æ³•")!=-1){//é­”æ³•ã˜ã‚ƒã‚“ï¼‰
                                            ctx.fillStyle="rgb(0,200,0)";   
                                            ctx.fillRect(10+140*((i-1)/2),530+145,133,45);
                                            ctx.fillStyle="rgb(255,255,255)";
                                            ctx.fillText("é­”æ³•",10+140*((i-1)/2) , 710);
                                        }else{
                                            ctx.fillStyle="rgb(150,50,0)";  
                                            ctx.fillRect(10+140*((i-1)/2),530+145,133,45);
                                        }
                                        
                                        ã‚«ãƒ¼ãƒ‰ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹=ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.card_list.indexOf(æ‰€æŒã‚«ãƒ¼ãƒ‰[i+scroll_x2*2][0]);
                                        if(ã‚«ãƒ¼ãƒ‰ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹!=-1){
                                            ã‚«ãƒ¼ãƒ‰ã‚«ã‚¦ãƒ³ãƒˆ=0;
                                            for(let j=ã‚«ãƒ¼ãƒ‰ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹;j<ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.card_list.length;j++){
                                                if(ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.card_list[j]==ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.card_list[ã‚«ãƒ¼ãƒ‰ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹]){
                                                    ã‚«ãƒ¼ãƒ‰ã‚«ã‚¦ãƒ³ãƒˆ+=1;
                                                }else{
                                                    break;
                                                }
                                            }
                                            
                                            ctx.fillStyle="rgb(0,0,0)";
                                            ctx.fillRect(90+140*((i-1)/2),630,50,50);
                                            ctx.fillStyle="rgb(255,255,255)";
                                            ctx.fillRect(95+140*((i-1)/2),635,40,40);
                                            ctx.fillStyle="rgb(100,0,0)";
                                            if(ã‚«ãƒ¼ãƒ‰ã‚«ã‚¦ãƒ³ãƒˆ<10){
                                                ctx.fillText(ã‚«ãƒ¼ãƒ‰ã‚«ã‚¦ãƒ³ãƒˆ, 105+140*((i-1)/2), 670,40);
                                            }else{
                                                ctx.fillText(ã‚«ãƒ¼ãƒ‰ã‚«ã‚¦ãƒ³ãƒˆ, 95+140*((i-1)/2), 670,40);
                                            }
                                        }
                                        ctx.fillStyle="rgb(0,0,0)";
                                        ctx.fillRect(90+140*((i-1)/2),680,50,50);
                                        ctx.fillStyle="rgb(155,155,205)";
                                        ctx.fillRect(95+140*((i-1)/2),685,40,40);
                                        ctx.fillStyle="rgb(255,255,255)";
                                        if(æ‰€æŒã‚«ãƒ¼ãƒ‰[i+scroll_x2*2][1]<10){
                                            ctx.fillText(æ‰€æŒã‚«ãƒ¼ãƒ‰[i+scroll_x2*2][1], 105+140*((i-1)/2), 720,40);
                                        }else{
                                            ctx.fillText(æ‰€æŒã‚«ãƒ¼ãƒ‰[i+scroll_x2*2][1], 95+140*((i-1)/2), 720,40);
                                        }
                                    }
                                }
                            }

                            ctx.drawImage(yamahuda,5,250);
                            ctx.fillStyle="rgb(200,200,200)";
                            ctx.fillRect(80,250,400,60);
                            ctx.fillRect(520,245,450,70);
                            ctx.font = "50px  'ï¼­ï¼³ ã‚´ã‚·ãƒƒã‚¯'";//ãƒ•ã‚©ãƒ³ãƒˆè¨­å®šã€‚å·¦ã®ãƒ•ã‚©ãƒ³ãƒˆãŒãªã„ã¨å³ã®ãƒ•ã‚©ãƒ³ãƒˆã‚’é©ç”¨ã™ã‚‹ã‚‰ã—ã„ã€‚
                            ctx.fillStyle="rgb(0,0,0)";
                            ctx.fillText(ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.card_list.length+"æš(æœ€å¤§"+MAX_deck+"æš)", 100, 300);
                            ctx.font = "30px  'ï¼­ï¼³ ã‚´ã‚·ãƒƒã‚¯'";//ãƒ•ã‚©ãƒ³ãƒˆè¨­å®šã€‚å·¦ã®ãƒ•ã‚©ãƒ³ãƒˆãŒãªã„ã¨å³ã®ãƒ•ã‚©ãƒ³ãƒˆã‚’é©ç”¨ã™ã‚‹ã‚‰ã—ã„ã€‚
                            ctx.fillText("â—‹ï¼šã‚«ãƒ¼ãƒ‰ç§»å‹•ã€€Ã—ï¼šãƒ¡ãƒ‹ãƒ¥ãƒ¼", 530, 275);
                            
                            ctx.fillText("ACE:"+ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.ACE.length+"/"+MAX_ACE+"æšã€€TOP_ACE:"+ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.TOP_ACE.length+"/"+MAX_TOP_ACE+"æš", 530, 310);

                            //  ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ï¼Ÿ
                            ctx.fillStyle="rgb(100,100,100)";
                            ctx.fillRect(50,225,900,20);
                            ctx.fillRect(50,725,900,20);

                            ctx.fillStyle="rgb(255,255,255)";
                            
                            if(ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.card_list.length>7){
                                ctx.fillRect(60+680*(scroll_x/(ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.card_list.length-7)),227,200,16);
                            }else{
                                ctx.fillRect(60,227,880,16);
                            }
                            if(æ‰€æŒã‚«ãƒ¼ãƒ‰.length>14){
                                ctx.fillRect(60+680*(scroll_x2/( Math.ceil(æ‰€æŒã‚«ãƒ¼ãƒ‰.length/2)-7)),727,200,16);
                            }else{
                                ctx.fillRect(60,727,880,16);
                            }
                            

                            //  ã‚«ãƒ¼ã‚½ãƒ«
                            if(cursor_y==0){
                                ctx.drawImage(yubi,20+cursor_x*140,150+4*Math.sin(time*Math.PI/8));
                            }else if(cursor_y==1){
                                ctx.drawImage(yubi,20+cursor_x*140,480+4*Math.sin(time*Math.PI/8));
                            }else if(cursor_y==2){
                                ctx.drawImage(yubi,20+cursor_x*140,690+4*Math.sin(time*Math.PI/8));
                            }
                            


                            
                            ctx.fillStyle="rgb(100,100,130)";
                            ctx.fillRect(0,740,1000,260);
                            ctx.fillStyle="rgb(55,55,55)";//è©³ç´°è¡¨ç¤ºâ”€
                            ctx.fillRect(5,745,990,250);
                            ctx.fillStyle="rgb(255,255,255)";
                            ctx.fillRect(10,750,980,240);
                            ctx.fillStyle="rgb(55,55,55)";
                            ctx.fillRect(550,755,5,230);
                            if(sub_phase=="åŸºæœ¬"){
                                if(cursor_y==0){
                                    if(cursor_x+scroll_x<ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.card_list.length){
                                        syousai_card=ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.card_list[cursor_x+scroll_x];
                                    }else{
                                        syousai_card="";
                                    }
                                    
                                }else if(cursor_y==1 || cursor_y==2){
                                    if(cursor_x*2+cursor_y+scroll_x2*2-1<æ‰€æŒã‚«ãƒ¼ãƒ‰.length){
                                        syousai_card=æ‰€æŒã‚«ãƒ¼ãƒ‰[cursor_x*2+cursor_y+scroll_x2*2-1][0];
                                    }else{
                                        syousai_card="";
                                    }
                                }
                            }
                            
                            if(syousai_card!=""){
                                ctx.fillStyle="rgb(200,200,200)";
                                ctx.fillRect(15,755,490,50);
                                ctx.font = "50px  'ï¼­ï¼³ ã‚´ã‚·ãƒƒã‚¯'";//ãƒ•ã‚©ãƒ³ãƒˆè¨­å®šã€‚å·¦ã®ãƒ•ã‚©ãƒ³ãƒˆãŒãªã„ã¨å³ã®ãƒ•ã‚©ãƒ³ãƒˆã‚’é©ç”¨ã™ã‚‹ã‚‰ã—ã„ã€‚
                                ctx.fillStyle="rgb(0,0,0)";
                                ctx.fillText(syousai_card.name, 20, 798);
                                

                                if(syousai_card.state.indexOf("ãƒ¢ãƒ³ã‚¹ã‚¿ãƒ¼")!=-1){
                                    ctx.drawImage(atk_plate,560,760);
                                    ctx.drawImage(def_plate,610,765);
                                    ctx.font = "40px  'ï¼­ï¼³ ã‚´ã‚·ãƒƒã‚¯'";//ãƒ•ã‚©ãƒ³ãƒˆè¨­å®šã€‚å·¦ã®ãƒ•ã‚©ãƒ³ãƒˆãŒãªã„ã¨å³ã®ãƒ•ã‚©ãƒ³ãƒˆã‚’é©ç”¨ã™ã‚‹ã‚‰ã—ã„ã€‚
                                    ctx.fillStyle="rgb(255,255,255)";
                                    if(syousai_card.ATK<10){
                                        ctx.fillText(syousai_card.ATK, 574, 802,42);
                                    }else{
                                        ctx.fillText(syousai_card.ATK, 564, 802,42);
                                    }
                                    if(syousai_card.HP<10){
                                        ctx.fillText(syousai_card.HP, 624, 802,42);
                                    }else{
                                        ctx.fillText(syousai_card.HP, 614, 802,42);
                                    }
                                }
                                ctx.fillStyle="rgb(0,0,0)";
                                text_kaigyou_hyouji(syousai_card.text, 20, 810,520,180,40,syousai_card.text_iro);//x,yã¯å·¦ä¸ŠæŒ‡å®šã ã‹ã‚‰æ³¨æ„ã ï¼
                            
                                syousai_state_color=[];
                                syousai_state="åˆ†é¡:";
                                for(let i=0;i<syousai_card.state.length;i++){
                                    if(syousai_card.state[i]=="TOP_ACE"){
                                        syousai_state_color[syousai_state_color.length]=[syousai_state.length+1,7,"rgb(255,0,0)"];
                                    }else if(syousai_card.state[i]=="ACE"){
                                        syousai_state_color[syousai_state_color.length]=[syousai_state.length+1,7,"rgb(200,200,0)"];
                                    }
                                    syousai_state+=" "+syousai_card.state[i];
                                }
                                text_kaigyou_hyouji(syousai_state, 560, 810,420,180,40,syousai_state_color);//x,yã¯å·¦ä¸ŠæŒ‡å®šã ã‹ã‚‰æ³¨æ„ã ï¼
                                
                                ã‚«ãƒ¼ãƒ‰ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹=ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.card_list.indexOf(syousai_card);
                                ã‚«ãƒ¼ãƒ‰ã‚«ã‚¦ãƒ³ãƒˆ=0;
                                if(ã‚«ãƒ¼ãƒ‰ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹!=-1){
                                    ã‚«ãƒ¼ãƒ‰ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹
                                    for(let i=ã‚«ãƒ¼ãƒ‰ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹;i<ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.card_list.length;i++){
                                        if(ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.card_list[i]==ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.card_list[ã‚«ãƒ¼ãƒ‰ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹]){
                                            ã‚«ãƒ¼ãƒ‰ã‚«ã‚¦ãƒ³ãƒˆ+=1;
                                        }else{
                                            break;
                                        }
                                    }
                                }
                                for(let i=0;i<æ‰€æŒã‚«ãƒ¼ãƒ‰.length;i++){
                                    if(æ‰€æŒã‚«ãƒ¼ãƒ‰[i][0]==syousai_card){
                                        ctx.font = "30px  'ï¼­ï¼³ ã‚´ã‚·ãƒƒã‚¯'";//ãƒ•ã‚©ãƒ³ãƒˆè¨­å®šã€‚å·¦ã®ãƒ•ã‚©ãƒ³ãƒˆãŒãªã„ã¨å³ã®ãƒ•ã‚©ãƒ³ãƒˆã‚’é©ç”¨ã™ã‚‹ã‚‰ã—ã„ã€‚
                                        ctx.fillStyle="rgb(0,0,0)";
                                        ctx.fillText("ãƒ‡ãƒƒã‚­ï¼š"+ã‚«ãƒ¼ãƒ‰ã‚«ã‚¦ãƒ³ãƒˆ+"æš", 695, 780);
                                        ctx.fillText("æ‰€æŒï¼š"+æ‰€æŒã‚«ãƒ¼ãƒ‰[i][1]+"æš", 700, 810);
                                        break;
                                    }
                                }
                            }
                            if(sub_phase=="ã‚«ãƒ¼ãƒ‰ç§»å‹•"){//---------------------------------
                                ctx.fillStyle="rgb(0,0,0,0.8)";
                                ctx.fillRect(0,250,1000,490);

                                ctx.fillStyle="rgb(255,255,255)";
                                ctx.fillRect(90,490,150,220);
                                ctx.fillStyle="rgb(0,0,0)";
                                ctx.fillRect(98,498,134,204);
                                ctx.drawImage(syousai_card.image,100,500);

                                

                                ctx.fillStyle="rgb(255,255,255)";
                                ctx.fillRect(300,300,600,400);
                                ctx.font = "50px  'ï¼­ï¼³ ã‚´ã‚·ãƒƒã‚¯'";//ãƒ•ã‚©ãƒ³ãƒˆè¨­å®šã€‚å·¦ã®ãƒ•ã‚©ãƒ³ãƒˆãŒãªã„ã¨å³ã®ãƒ•ã‚©ãƒ³ãƒˆã‚’é©ç”¨ã™ã‚‹ã‚‰ã—ã„ã€‚
                                ctx.fillStyle="rgb(0,0,0)";
                                ctx.fillText("ãƒ‡ãƒƒã‚­ã«å…¥ã‚Œã‚‹", 400, 370);
                                ctx.fillText("ãƒ‡ãƒƒã‚­ã‹ã‚‰ã¯ãšã™", 400, 600);
                                ctx.font = "40px  'ï¼­ï¼³ ã‚´ã‚·ãƒƒã‚¯'";//ãƒ•ã‚©ãƒ³ãƒˆè¨­å®šã€‚å·¦ã®ãƒ•ã‚©ãƒ³ãƒˆãŒãªã„ã¨å³ã®ãƒ•ã‚©ãƒ³ãƒˆã‚’é©ç”¨ã™ã‚‹ã‚‰ã—ã„ã€‚
                                ã‚«ãƒ¼ãƒ‰ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹=ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.card_list.indexOf(syousai_card);
                                ã‚«ãƒ¼ãƒ‰ã‚«ã‚¦ãƒ³ãƒˆ=0;
                                if(ã‚«ãƒ¼ãƒ‰ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹!=-1){
                                    ã‚«ãƒ¼ãƒ‰ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹
                                    for(let i=ã‚«ãƒ¼ãƒ‰ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹;i<ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.card_list.length;i++){
                                        if(ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.card_list[i]==ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.card_list[ã‚«ãƒ¼ãƒ‰ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹]){
                                            ã‚«ãƒ¼ãƒ‰ã‚«ã‚¦ãƒ³ãƒˆ+=1;
                                        }else{
                                            break;
                                        }
                                    }
                                }
                                for(let i=0;i<æ‰€æŒã‚«ãƒ¼ãƒ‰.length;i++){
                                    if(æ‰€æŒã‚«ãƒ¼ãƒ‰[i][0]==syousai_card){
                                        ctx.fillText("ãƒ‡ãƒƒã‚­ï¼š"+ã‚«ãƒ¼ãƒ‰ã‚«ã‚¦ãƒ³ãƒˆ+"æš", 550, 450);
                                        ctx.fillText("æ‰€æŒï¼š"+æ‰€æŒã‚«ãƒ¼ãƒ‰[i][1]+"æš", 550, 500);
                                        ã“ã‚Œã®ãƒ‡ãƒƒã‚­æšæ•°=ã‚«ãƒ¼ãƒ‰ã‚«ã‚¦ãƒ³ãƒˆ;
                                        ã“ã‚Œã®æ‰€æŒæšæ•°=æ‰€æŒã‚«ãƒ¼ãƒ‰[i][1];
                                        break;
                                    }
                                }
                                ctx.font = "30px  'ï¼­ï¼³ ã‚´ã‚·ãƒƒã‚¯'";//ãƒ•ã‚©ãƒ³ãƒˆè¨­å®šã€‚å·¦ã®ãƒ•ã‚©ãƒ³ãƒˆãŒãªã„ã¨å³ã®ãƒ•ã‚©ãƒ³ãƒˆã‚’é©ç”¨ã™ã‚‹ã‚‰ã—ã„ã€‚
                                ctx.fillText("Ã—ï¼šæˆ»ã‚‹", 750, 690);
                                ctx.save();
                                ctx.rotate(90 * Math.PI / 180);
                                if(cursor2==0){
                                    ctx.drawImage(yubi,290,-390+4*Math.sin(time*Math.PI/8));
                                }else{
                                    ctx.drawImage(yubi,520,-390+4*Math.sin(time*Math.PI/8));
                                }
                                ctx.restore();
                            }else if(sub_phase=="ãƒ¡ãƒ‹ãƒ¥ãƒ¼"){//---------------------------------
                                ctx.fillStyle="rgb(0,0,0,0.8)";
                                ctx.fillRect(0,0,1000,1000);
                                ctx.font = "50px  'ï¼­ï¼³ ã‚´ã‚·ãƒƒã‚¯'";//ãƒ•ã‚©ãƒ³ãƒˆè¨­å®šã€‚å·¦ã®ãƒ•ã‚©ãƒ³ãƒˆãŒãªã„ã¨å³ã®ãƒ•ã‚©ãƒ³ãƒˆã‚’é©ç”¨ã™ã‚‹ã‚‰ã—ã„ã€‚
                                ctx.fillStyle="rgb(255,255,255)";
                                ctx.fillText("ãƒ‡ãƒƒã‚­ç·¨é›†ã«æˆ»ã‚‹", 400, 200);
                                ctx.fillText("ACEç·¨é›†", 400, 300);
                                ctx.fillText("ãƒ‡ãƒƒã‚­ãƒªã‚¹ãƒˆ", 400, 500);
                                ctx.fillText("ãƒ‰ãƒ­ãƒ¼æšæ•°:", 400, 600);
                                ctx.fillText("â—€ "+my_deck_pull_ç·¨é›†ä¸­+" â–¶", 700, 600);
                                ctx.fillText("ä¿å­˜ã—ã¦çµ‚äº†", 400, 800);
                                ctx.fillText("ä¿å­˜ã›ãšçµ‚äº†", 400, 900);
                                ctx.font = "30px  'ï¼­ï¼³ ã‚´ã‚·ãƒƒã‚¯'";//ãƒ•ã‚©ãƒ³ãƒˆè¨­å®šã€‚å·¦ã®ãƒ•ã‚©ãƒ³ãƒˆãŒãªã„ã¨å³ã®ãƒ•ã‚©ãƒ³ãƒˆã‚’é©ç”¨ã™ã‚‹ã‚‰ã—ã„ã€‚
                                ctx.fillText("Ã—ï¼šæˆ»ã‚‹", 750, 950);

                                ctx.save();
                                ctx.rotate(90 * Math.PI / 180);
                                if(cursor2==0){
                                    ctx.drawImage(yubi,120,-390+4*Math.sin(time*Math.PI/8));
                                }else if(cursor2==1){
                                    ctx.drawImage(yubi,220,-390+4*Math.sin(time*Math.PI/8));
                                }else if(cursor2==2){
                                    ctx.drawImage(yubi,420,-390+4*Math.sin(time*Math.PI/8));
                                }else if(cursor2==3){
                                    ctx.drawImage(yubi,520,-390+4*Math.sin(time*Math.PI/8));
                                }else if(cursor2==4){
                                    ctx.drawImage(yubi,720,-390+4*Math.sin(time*Math.PI/8));
                                }else if(cursor2==5){
                                    ctx.drawImage(yubi,820,-390+4*Math.sin(time*Math.PI/8));
                                }
                                ctx.restore();
                            }else if(sub_phase=="ä¿å­˜ç¢ºèª"){
                                ctx.fillStyle="rgb(0,0,0,0.8)";
                                ctx.fillRect(0,0,1000,1000);
                                ctx.font = "50px  'ï¼­ï¼³ ã‚´ã‚·ãƒƒã‚¯'";//ãƒ•ã‚©ãƒ³ãƒˆè¨­å®šã€‚å·¦ã®ãƒ•ã‚©ãƒ³ãƒˆãŒãªã„ã¨å³ã®ãƒ•ã‚©ãƒ³ãƒˆã‚’é©ç”¨ã™ã‚‹ã‚‰ã—ã„ã€‚
                                ctx.fillStyle="rgb(255,255,255)";
                                ctx.fillText("ä¿å­˜ã—ã¦çµ‚äº†", 400, 200);
                                ctx.fillText("ãƒ‡ãƒƒã‚­ç·¨é›†ã«æˆ»ã‚‹", 400, 300);
                                
                                ctx.save();
                                ctx.rotate(90 * Math.PI / 180);
                                if(cursor2==0){
                                    ctx.drawImage(yubi,120,-390+4*Math.sin(time*Math.PI/8));
                                }else if(cursor2==1){
                                    ctx.drawImage(yubi,220,-390+4*Math.sin(time*Math.PI/8));
                                }
                                ctx.restore();
                            }else if(sub_phase=="ä¿å­˜ã—ãªã„"){
                                ctx.fillStyle="rgb(0,0,0,0.8)";
                                ctx.fillRect(0,0,1000,1000);
                                ctx.font = "50px  'ï¼­ï¼³ ã‚´ã‚·ãƒƒã‚¯'";//ãƒ•ã‚©ãƒ³ãƒˆè¨­å®šã€‚å·¦ã®ãƒ•ã‚©ãƒ³ãƒˆãŒãªã„ã¨å³ã®ãƒ•ã‚©ãƒ³ãƒˆã‚’é©ç”¨ã™ã‚‹ã‚‰ã—ã„ã€‚
                                ctx.fillStyle="rgb(255,255,255)";
                                ctx.fillText("ä¿å­˜ã—ãªã„ã®ï¼Ÿ", 300, 200);
                                ctx.fillText("ã—ãªã„ã‚ˆ", 400, 300);
                                ctx.fillText("ãƒ‡ãƒƒã‚­ç·¨é›†ã«æˆ»ã‚‹", 400, 400);
                                
                                ctx.save();
                                ctx.rotate(90 * Math.PI / 180);
                                if(cursor2==0){
                                    ctx.drawImage(yubi,220,-390+4*Math.sin(time*Math.PI/8));
                                }else if(cursor2==1){
                                    ctx.drawImage(yubi,320,-390+4*Math.sin(time*Math.PI/8));
                                }
                                ctx.restore();
                                
                            }else if(sub_phase=="æšæ•°ã‚¨ãƒ©ãƒ¼"){
                                ctx.fillStyle="rgb(0,0,0,0.8)";
                                ctx.fillRect(0,0,1000,1000);
                                ctx.font = "50px  'ï¼­ï¼³ ã‚´ã‚·ãƒƒã‚¯'";//ãƒ•ã‚©ãƒ³ãƒˆè¨­å®šã€‚å·¦ã®ãƒ•ã‚©ãƒ³ãƒˆãŒãªã„ã¨å³ã®ãƒ•ã‚©ãƒ³ãƒˆã‚’é©ç”¨ã™ã‚‹ã‚‰ã—ã„ã€‚
                                ctx.fillStyle="rgb(255,255,255)";
                                ctx.fillText("ãƒ‡ãƒƒã‚­æšæ•°å¤šã™ãï¼", 300, 200);
                                ctx.fillText("ã¯ã„", 400, 300);
                                ctx.fillText("ã¯ã„", 400, 400);
                                
                                ctx.save();
                                ctx.rotate(90 * Math.PI / 180);
                                if(cursor2==0){
                                    ctx.drawImage(yubi,220,-390+4*Math.sin(time*Math.PI/8));
                                }else if(cursor2==1){
                                    ctx.drawImage(yubi,320,-390+4*Math.sin(time*Math.PI/8));
                                }
                                ctx.restore();
                                
                            }


                        }else if(sub_phase=="ACEç·¨é›†" || sub_phase=="decké¸æŠ" || sub_phase=="ACEé¸æŠ" || sub_phase=="TOP_ACEé¸æŠ" || sub_phase=="ACEãƒ¡ãƒ‹ãƒ¥ãƒ¼" || sub_phase=="ACEä¿å­˜ç¢ºèª" || sub_phase=="ACEä¿å­˜ã—ãªã„" || sub_phase=="ACEæšæ•°ã‚¨ãƒ©ãƒ¼"){
                            //ã‚«ãƒ¼ãƒ‰è¡¨ç¤º
                            for(let i=0;i<9;i++){
                                ctx.fillStyle="rgb(200,200,200)";
                                if((i+scroll_x-1)>=0 && (i+scroll_x-1)<ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.card_list.length){
                                    ctx.fillRect(-130+140*i,10,140,220);
                                    ctx.drawImage(ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.card_list[i+scroll_x-1].image,-125+140*i,20);
                                    if(ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.TOP_ACE.indexOf(i+scroll_x-1)!=-1){
                                        ctx.fillStyle="rgb(255,0,0)";
                                        ctx.fillRect(-125+140*i-2,20,5,200);
                                        ctx.fillRect(-125+140*i+128,20,5,200);
                                        ctx.fillRect(-125+140*i,20,133,5);
                                        ctx.fillRect(-125+140*i,20+195,133,5);
                                    }
                                    if(ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.ACE.indexOf(i+scroll_x-1)!=-1){
                                        ctx.fillStyle="rgb(255,255,0)";
                                        ctx.fillRect(-125+140*i-2,20,5,200);
                                        ctx.fillRect(-125+140*i+128,20,5,200);
                                        ctx.fillRect(-125+140*i,20,133,5);
                                        ctx.fillRect(-125+140*i,20+195,133,5);
                                    }
                                } 
                            }

                            ctx.font = "40px  'ï¼­ï¼³ ã‚´ã‚·ãƒƒã‚¯'";//ãƒ•ã‚©ãƒ³ãƒˆè¨­å®šã€‚å·¦ã®ãƒ•ã‚©ãƒ³ãƒˆãŒãªã„ã¨å³ã®ãƒ•ã‚©ãƒ³ãƒˆã‚’é©ç”¨ã™ã‚‹ã‚‰ã—ã„ã€‚
                            for(let i=-1;i<8;i++){
                                if((i+scroll_x2)>=0 && (i+scroll_x2)<MAX_ACE){
                                    ctx.fillStyle="rgb(255,255,0)";
                                    ctx.fillRect(6+140*i,316,138,208);
                                    if(ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.ACE.length>(i+scroll_x2)){
                                        ctx.drawImage(ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.card_list[ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.ACE[i+scroll_x2]].image,10+140*(i),320);
                                    }else{
                                        ctx.fillStyle="rgb(50,50,80)";
                                        ctx.fillRect(10+140*i,320,130,200);
                                    }
                                }
                                
                            }
                            for(let i=-1;i<8;i++){
                                if((i+scroll_x2)>=0 && (i+scroll_x2)<MAX_TOP_ACE){
                                    ctx.fillStyle="rgb(255,0,0)";
                                    ctx.fillRect(6+140*i,526,138,208);
                                    if(ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.TOP_ACE.length>(i+scroll_x2)){
                                        ctx.drawImage(ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.card_list[ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.TOP_ACE[i+scroll_x2]].image,10+140*(i),530);
                                    }else{
                                        ctx.fillStyle="rgb(50,50,80)";
                                        ctx.fillRect(10+140*i,530,130,200);
                                    }
                                }
                            }


                            ctx.drawImage(yamahuda,5,250);
                            ctx.fillStyle="rgb(200,200,200)";
                            ctx.fillRect(80,250,400,60);
                            ctx.fillRect(520,245,450,70);
                            ctx.font = "50px  'ï¼­ï¼³ ã‚´ã‚·ãƒƒã‚¯'";//ãƒ•ã‚©ãƒ³ãƒˆè¨­å®šã€‚å·¦ã®ãƒ•ã‚©ãƒ³ãƒˆãŒãªã„ã¨å³ã®ãƒ•ã‚©ãƒ³ãƒˆã‚’é©ç”¨ã™ã‚‹ã‚‰ã—ã„ã€‚
                            ctx.fillStyle="rgb(0,0,0)";
                            ctx.fillText(ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.card_list.length+"æš(æœ€å¤§"+MAX_deck+"æš)", 100, 300);
                            ctx.font = "30px  'ï¼­ï¼³ ã‚´ã‚·ãƒƒã‚¯'";//ãƒ•ã‚©ãƒ³ãƒˆè¨­å®šã€‚å·¦ã®ãƒ•ã‚©ãƒ³ãƒˆãŒãªã„ã¨å³ã®ãƒ•ã‚©ãƒ³ãƒˆã‚’é©ç”¨ã™ã‚‹ã‚‰ã—ã„ã€‚
                            ctx.fillText("â—‹ï¼šã‚«ãƒ¼ãƒ‰ç§»å‹•ã€€Ã—ï¼šãƒ¡ãƒ‹ãƒ¥ãƒ¼", 530, 275);
                            
                            ctx.fillText("ACE:"+ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.ACE.length+"/"+MAX_ACE+"æšã€€TOP_ACE:"+ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.TOP_ACE.length+"/"+MAX_TOP_ACE+"æš", 530, 310);

                            //  ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ï¼Ÿ
                            ctx.fillStyle="rgb(100,100,100)";
                            ctx.fillRect(50,225,900,20);
                            ctx.fillRect(50,725,900,20);

                            ctx.fillStyle="rgb(255,255,255)";
                            
                            if(ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.card_list.length>7){
                                ctx.fillRect(60+680*(scroll_x/(ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.card_list.length-7)),227,200,16);
                            }else{
                                ctx.fillRect(60,227,880,16);
                            }
                            if(MAX_ACE>7 || MAX_TOP_ACE>7){
                                ctx.fillRect(60+680*(scroll_x2/( Math.ceil(Math.max(MAX_ACE,MAX_TOP_ACE))-7)),727,200,16);
                            }else{
                                ctx.fillRect(60,727,880,16);
                            }
                            

                            //  ã‚«ãƒ¼ã‚½ãƒ«
                            if(cursor_y==0){
                                ctx.drawImage(yubi,20+cursor_x*140,150+4*Math.sin(time*Math.PI/8));
                            }else if(cursor_y==1){
                                ctx.drawImage(yubi,20+cursor_x*140,480+4*Math.sin(time*Math.PI/8));
                            }else if(cursor_y==2){
                                ctx.drawImage(yubi,20+cursor_x*140,690+4*Math.sin(time*Math.PI/8));
                            }

                            ctx.fillStyle="rgb(100,100,130)";
                            ctx.fillRect(0,740,1000,260);
                            ctx.fillStyle="rgb(55,55,55)";//è©³ç´°è¡¨ç¤ºâ”€
                            ctx.fillRect(5,745,990,250);
                            ctx.fillStyle="rgb(255,255,255)";
                            ctx.fillRect(10,750,980,240);
                            ctx.fillStyle="rgb(55,55,55)";
                            ctx.fillRect(550,755,5,230);
                            if(cursor_y==0){
                                if(cursor_x+scroll_x<ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.card_list.length){
                                    syousai_card=ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.card_list[cursor_x+scroll_x];
                                }else{
                                    syousai_card="";
                                }
                                
                            }else if(cursor_y==1){
                                if(scroll_x2+cursor_x<ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.ACE.length){
                                    syousai_card=ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.card_list[ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.ACE[cursor_x+scroll_x2]];
                                }else{
                                    syousai_card="";
                                }
                            }else if(cursor_y==2){
                                if(scroll_x2+cursor_x<ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.TOP_ACE.length){
                                    syousai_card=ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.card_list[ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.TOP_ACE[cursor_x+scroll_x2]];
                                }else{
                                    syousai_card="";
                                }
                            }
                            
                            
                            if(syousai_card!=""){
                                ctx.fillStyle="rgb(200,200,200)";
                                ctx.fillRect(15,755,490,50);
                                ctx.font = "50px  'ï¼­ï¼³ ã‚´ã‚·ãƒƒã‚¯'";//ãƒ•ã‚©ãƒ³ãƒˆè¨­å®šã€‚å·¦ã®ãƒ•ã‚©ãƒ³ãƒˆãŒãªã„ã¨å³ã®ãƒ•ã‚©ãƒ³ãƒˆã‚’é©ç”¨ã™ã‚‹ã‚‰ã—ã„ã€‚
                                ctx.fillStyle="rgb(0,0,0)";
                                ctx.fillText(syousai_card.name, 20, 798);
                                

                                if(syousai_card.state.indexOf("ãƒ¢ãƒ³ã‚¹ã‚¿ãƒ¼")!=-1){
                                    ctx.drawImage(atk_plate,560,760);
                                    ctx.drawImage(def_plate,610,765);
                                    ctx.font = "40px  'ï¼­ï¼³ ã‚´ã‚·ãƒƒã‚¯'";//ãƒ•ã‚©ãƒ³ãƒˆè¨­å®šã€‚å·¦ã®ãƒ•ã‚©ãƒ³ãƒˆãŒãªã„ã¨å³ã®ãƒ•ã‚©ãƒ³ãƒˆã‚’é©ç”¨ã™ã‚‹ã‚‰ã—ã„ã€‚
                                    ctx.fillStyle="rgb(255,255,255)";
                                    if(syousai_card.ATK<10){
                                        ctx.fillText(syousai_card.ATK, 574, 802,42);
                                    }else{
                                        ctx.fillText(syousai_card.ATK, 564, 802,42);
                                    }
                                    if(syousai_card.HP<10){
                                        ctx.fillText(syousai_card.HP, 624, 802,42);
                                    }else{
                                        ctx.fillText(syousai_card.HP, 614, 802,42);
                                    }
                                }
                                ctx.fillStyle="rgb(0,0,0)";
                                text_kaigyou_hyouji(syousai_card.text, 20, 810,520,180,40,syousai_card.text_iro);//x,yã¯å·¦ä¸ŠæŒ‡å®šã ã‹ã‚‰æ³¨æ„ã ï¼
                            
                                syousai_state_color=[];
                                syousai_state="åˆ†é¡:";
                                for(let i=0;i<syousai_card.state.length;i++){
                                    if(syousai_card.state[i]=="TOP_ACE"){
                                        syousai_state_color[syousai_state_color.length]=[syousai_state.length+1,7,"rgb(255,0,0)"];
                                    }else if(syousai_card.state[i]=="ACE"){
                                        syousai_state_color[syousai_state_color.length]=[syousai_state.length+1,7,"rgb(200,200,0)"];
                                    }
                                    syousai_state+=" "+syousai_card.state[i];
                                }
                                text_kaigyou_hyouji(syousai_state, 560, 810,420,180,40,syousai_state_color);//x,yã¯å·¦ä¸ŠæŒ‡å®šã ã‹ã‚‰æ³¨æ„ã ï¼
                                
                                ã‚«ãƒ¼ãƒ‰ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹=ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.card_list.indexOf(syousai_card);
                                ã‚«ãƒ¼ãƒ‰ã‚«ã‚¦ãƒ³ãƒˆ=0;
                                if(ã‚«ãƒ¼ãƒ‰ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹!=-1){
                                    ã‚«ãƒ¼ãƒ‰ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹
                                    for(let i=ã‚«ãƒ¼ãƒ‰ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹;i<ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.card_list.length;i++){
                                        if(ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.card_list[i]==ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.card_list[ã‚«ãƒ¼ãƒ‰ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹]){
                                            ã‚«ãƒ¼ãƒ‰ã‚«ã‚¦ãƒ³ãƒˆ+=1;
                                        }else{
                                            break;
                                        }
                                    }
                                }
                                for(let i=0;i<æ‰€æŒã‚«ãƒ¼ãƒ‰.length;i++){
                                    if(æ‰€æŒã‚«ãƒ¼ãƒ‰[i][0]==syousai_card){
                                        ctx.font = "30px  'ï¼­ï¼³ ã‚´ã‚·ãƒƒã‚¯'";//ãƒ•ã‚©ãƒ³ãƒˆè¨­å®šã€‚å·¦ã®ãƒ•ã‚©ãƒ³ãƒˆãŒãªã„ã¨å³ã®ãƒ•ã‚©ãƒ³ãƒˆã‚’é©ç”¨ã™ã‚‹ã‚‰ã—ã„ã€‚
                                        ctx.fillStyle="rgb(0,0,0)";
                                        ctx.fillText("ãƒ‡ãƒƒã‚­ï¼š"+ã‚«ãƒ¼ãƒ‰ã‚«ã‚¦ãƒ³ãƒˆ+"æš", 695, 780);
                                        ctx.fillText("æ‰€æŒï¼š"+æ‰€æŒã‚«ãƒ¼ãƒ‰[i][1]+"æš", 700, 810);
                                        break;
                                    }
                                }
                            }
                            if(sub_phase=="decké¸æŠ"){
                                ctx.fillStyle="rgb(0,0,0,0.8)";
                                if((scroll_x+7)<ã‚«ãƒ¼ãƒ‰ã‚¹ãƒ¯ãƒƒãƒ— || scroll_x-1>ã‚«ãƒ¼ãƒ‰ã‚¹ãƒ¯ãƒƒãƒ—){
                                    ctx.fillRect(0,0,1000,250);
                                }else if(scroll_x-1==ã‚«ãƒ¼ãƒ‰ã‚¹ãƒ¯ãƒƒãƒ—){//å·¦ç«¯ã«ã¡ã‚‡ã£ã¨ã¯ã¿å‡ºã¦ã‚‹ ã†ã’ï¼ãªã‚“ã‹ãã‚‚ã„ã‘ã©ã“ã‚ŒãŒå˜ç´”æ˜å¿«ãªå®Ÿè£…ãªã®ã§ãƒ¨ã‚·
                                    ctx.fillRect(10,0,990,250);
                                }else{
                                    ctx.fillRect(0,0,10+140*(ã‚«ãƒ¼ãƒ‰ã‚¹ãƒ¯ãƒƒãƒ—-scroll_x),250);
                                    ctx.fillRect(10+140*(ã‚«ãƒ¼ãƒ‰ã‚¹ãƒ¯ãƒƒãƒ—-scroll_x+1),0,1000,250);
                                }
                                    
                                
                            }else if(sub_phase=="ACEé¸æŠ"){
                                ctx.fillStyle="rgb(0,0,0,0.8)";
                                if((scroll_x2+7)<ã‚«ãƒ¼ãƒ‰ã‚¹ãƒ¯ãƒƒãƒ— || scroll_x2-1>ã‚«ãƒ¼ãƒ‰ã‚¹ãƒ¯ãƒƒãƒ—){
                                    ctx.fillRect(0,315,1000,210);
                                }else if(scroll_x2-1==ã‚«ãƒ¼ãƒ‰ã‚¹ãƒ¯ãƒƒãƒ—){//å·¦ç«¯ã«ã¡ã‚‡ã£ã¨ã¯ã¿å‡ºã¦ã‚‹ ã†ã’ï¼ãªã‚“ã‹ãã‚‚ã„ã‘ã©ã“ã‚ŒãŒå˜ç´”æ˜å¿«ãªå®Ÿè£…ãªã®ã§ãƒ¨ã‚·
                                    ctx.fillRect(5,315,995,210);
                                }else{
                                    ctx.fillRect(0,315,5+140*(ã‚«ãƒ¼ãƒ‰ã‚¹ãƒ¯ãƒƒãƒ—-scroll_x2),210);
                                    ctx.fillRect(5+140*(ã‚«ãƒ¼ãƒ‰ã‚¹ãƒ¯ãƒƒãƒ—-scroll_x2+1),315,1000,210);
                                }

                            }else if(sub_phase=="TOP_ACEé¸æŠ"){
                                ctx.fillStyle="rgb(0,0,0,0.3)";
                                
                                ctx.fillRect(0,315,1000,210);
                                ctx.fillRect(0,0,1000,250);

                                if((scroll_x2+7)<ã‚«ãƒ¼ãƒ‰ã‚¹ãƒ¯ãƒƒãƒ— || scroll_x2-1>ã‚«ãƒ¼ãƒ‰ã‚¹ãƒ¯ãƒƒãƒ—){//é¸æŠã—ãŸç‰©ãŒç”»é¢å¤–
                                    ctx.fillRect(0,525,1000,210);
                                }else{
                                    
                                    if(ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.TOP_ACE.length>ã‚«ãƒ¼ãƒ‰ã‚¹ãƒ¯ãƒƒãƒ—){
                                        ctx.fillRect(0,525,1000,210);
                                        ctx.fillStyle="rgb(0,0,0,0.8)";
                                        ctx.fillRect(6+140*(ã‚«ãƒ¼ãƒ‰ã‚¹ãƒ¯ãƒƒãƒ—-scroll_x2),525,138,201);
                                        ctx.fillStyle="rgb(255,0,0)";
                                        ctx.fillRect(6+140*(ã‚«ãƒ¼ãƒ‰ã‚¹ãƒ¯ãƒƒãƒ—-scroll_x2),526-50,138,208);
                                        ctx.drawImage(ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.card_list[ç·¨é›†ä¸­ãƒ‡ãƒƒã‚­.TOP_ACE[ã‚«ãƒ¼ãƒ‰ã‚¹ãƒ¯ãƒƒãƒ—]].image,10+140*(ã‚«ãƒ¼ãƒ‰ã‚¹ãƒ¯ãƒƒãƒ—-scroll_x2),530-50);
                                    }else{
                                        ctx.fillRect(0,525,5+140*(ã‚«ãƒ¼ãƒ‰ã‚¹ãƒ¯ãƒƒãƒ—-scroll_x2),220);
                                        ctx.fillRect(5+140*(ã‚«ãƒ¼ãƒ‰ã‚¹ãƒ¯ãƒƒãƒ—-scroll_x2+1),525,1000,220);
                                    }
                                    
                                    
                                }
                            }else if(sub_phase=="ACEãƒ¡ãƒ‹ãƒ¥ãƒ¼"){//---------------------------------
                                ctx.fillStyle="rgb(0,0,0,0.8)";
                                ctx.fillRect(0,0,1000,1000);
                                ctx.font = "50px  'ï¼­ï¼³ ã‚´ã‚·ãƒƒã‚¯'";//ãƒ•ã‚©ãƒ³ãƒˆè¨­å®šã€‚å·¦ã®ãƒ•ã‚©ãƒ³ãƒˆãŒãªã„ã¨å³ã®ãƒ•ã‚©ãƒ³ãƒˆã‚’é©ç”¨ã™ã‚‹ã‚‰ã—ã„ã€‚
                                ctx.fillStyle="rgb(255,255,255)";
                                ctx.fillText("ãƒ‡ãƒƒã‚­ç·¨é›†ã«æˆ»ã‚‹", 400, 200);
                                ctx.fillText("ACEç·¨é›†", 400, 300);
                                ctx.fillText("ACEã‚’ã‚½ãƒ¼ãƒˆ", 400, 500);
                                ctx.fillText("ãƒ‡ãƒƒã‚­ãƒªã‚¹ãƒˆ", 400, 600);
                                ctx.fillText("ä¿å­˜ã—ã¦çµ‚äº†", 400, 800);
                                ctx.fillText("ä¿å­˜ã›ãšçµ‚äº†", 400, 900);
                                ctx.font = "30px  'ï¼­ï¼³ ã‚´ã‚·ãƒƒã‚¯'";//ãƒ•ã‚©ãƒ³ãƒˆè¨­å®šã€‚å·¦ã®ãƒ•ã‚©ãƒ³ãƒˆãŒãªã„ã¨å³ã®ãƒ•ã‚©ãƒ³ãƒˆã‚’é©ç”¨ã™ã‚‹ã‚‰ã—ã„ã€‚
                                ctx.fillText("Ã—ï¼šæˆ»ã‚‹", 750, 950);

                                ctx.save();
                                ctx.rotate(90 * Math.PI / 180);
                                if(cursor2==0){
                                    ctx.drawImage(yubi,120,-390+4*Math.sin(time*Math.PI/8));
                                }else if(cursor2==1){
                                    ctx.drawImage(yubi,220,-390+4*Math.sin(time*Math.PI/8));
                                }else if(cursor2==2){
                                    ctx.drawImage(yubi,420,-390+4*Math.sin(time*Math.PI/8));
                                }else if(cursor2==3){
                                    ctx.drawImage(yubi,520,-390+4*Math.sin(time*Math.PI/8));
                                }else if(cursor2==4){
                                    ctx.drawImage(yubi,720,-390+4*Math.sin(time*Math.PI/8));
                                }else if(cursor2==5){
                                    ctx.drawImage(yubi,820,-390+4*Math.sin(time*Math.PI/8));
                                }
                                ctx.restore();
                            }else if(sub_phase=="ACEä¿å­˜ç¢ºèª"){
                                ctx.fillStyle="rgb(0,0,0,0.8)";
                                ctx.fillRect(0,0,1000,1000);
                                ctx.font = "50px  'ï¼­ï¼³ ã‚´ã‚·ãƒƒã‚¯'";//ãƒ•ã‚©ãƒ³ãƒˆè¨­å®šã€‚å·¦ã®ãƒ•ã‚©ãƒ³ãƒˆãŒãªã„ã¨å³ã®ãƒ•ã‚©ãƒ³ãƒˆã‚’é©ç”¨ã™ã‚‹ã‚‰ã—ã„ã€‚
                                ctx.fillStyle="rgb(255,255,255)";
                                ctx.fillText("ä¿å­˜ã—ã¦çµ‚äº†", 400, 200);
                                ctx.fillText("ãƒ‡ãƒƒã‚­ç·¨é›†ã«æˆ»ã‚‹", 400, 300);
                                
                                ctx.save();
                                ctx.rotate(90 * Math.PI / 180);
                                if(cursor2==0){
                                    ctx.drawImage(yubi,120,-390+4*Math.sin(time*Math.PI/8));
                                }else if(cursor2==1){
                                    ctx.drawImage(yubi,220,-390+4*Math.sin(time*Math.PI/8));
                                }
                                ctx.restore();
                            }else if(sub_phase=="ACEä¿å­˜ã—ãªã„"){
                                ctx.fillStyle="rgb(0,0,0,0.8)";
                                ctx.fillRect(0,0,1000,1000);
                                ctx.font = "50px  'ï¼­ï¼³ ã‚´ã‚·ãƒƒã‚¯'";//ãƒ•ã‚©ãƒ³ãƒˆè¨­å®šã€‚å·¦ã®ãƒ•ã‚©ãƒ³ãƒˆãŒãªã„ã¨å³ã®ãƒ•ã‚©ãƒ³ãƒˆã‚’é©ç”¨ã™ã‚‹ã‚‰ã—ã„ã€‚
                                ctx.fillStyle="rgb(255,255,255)";
                                ctx.fillText("ä¿å­˜ã—ãªã„ã®ï¼Ÿ", 300, 200);
                                ctx.fillText("ã—ãªã„ã‚ˆ", 400, 300);
                                ctx.fillText("ãƒ‡ãƒƒã‚­ç·¨é›†ã«æˆ»ã‚‹", 400, 400);
                                
                                ctx.save();
                                ctx.rotate(90 * Math.PI / 180);
                                if(cursor2==0){
                                    ctx.drawImage(yubi,220,-390+4*Math.sin(time*Math.PI/8));
                                }else if(cursor2==1){
                                    ctx.drawImage(yubi,320,-390+4*Math.sin(time*Math.PI/8));
                                }
                                ctx.restore();
                                
                            }else if(sub_phase=="ACEæšæ•°ã‚¨ãƒ©ãƒ¼"){
                                ctx.fillStyle="rgb(0,0,0,0.8)";
                                ctx.fillRect(0,0,1000,1000);
                                ctx.font = "50px  'ï¼­ï¼³ ã‚´ã‚·ãƒƒã‚¯'";//ãƒ•ã‚©ãƒ³ãƒˆè¨­å®šã€‚å·¦ã®ãƒ•ã‚©ãƒ³ãƒˆãŒãªã„ã¨å³ã®ãƒ•ã‚©ãƒ³ãƒˆã‚’é©ç”¨ã™ã‚‹ã‚‰ã—ã„ã€‚
                                ctx.fillStyle="rgb(255,255,255)";
                                ctx.fillText("ãƒ‡ãƒƒã‚­æšæ•°å¤šã™ãï¼", 300, 200);
                                ctx.fillText("ã¯ã„", 400, 300);
                                ctx.fillText("ã¯ã„", 400, 400);
                                
                                ctx.save();
                                ctx.rotate(90 * Math.PI / 180);
                                if(cursor2==0){
                                    ctx.drawImage(yubi,220,-390+4*Math.sin(time*Math.PI/8));
                                }else if(cursor2==1){
                                    ctx.drawImage(yubi,320,-390+4*Math.sin(time*Math.PI/8));
                                }
                                ctx.restore();
                                
                            }

                        }else if(sub_phase=="ãƒ‡ãƒƒã‚­ãƒªã‚¹ãƒˆ"){
                            ctx.fillStyle="rgb(20,20,50)";
                            ctx.fillRect(0,0,1000,1000);
                            ctx.fillStyle="rgb(255,255,555)";
                            ctx.fillRect(5,5,810,990);
                            ctx.fillRect(875,465,70,70);
                            ctx.fillStyle="rgb(20,20,50)";
                            ctx.fillRect(10,10,800,980);
                            ctx.fillRect(880,470,60,60);
                            ctx.font = "40px  'ï¼­ï¼³ ã‚´ã‚·ãƒƒã‚¯'";//ãƒ•ã‚©ãƒ³ãƒˆè¨­å®šã€‚å·¦ã®ãƒ•ã‚©ãƒ³ãƒˆãŒãªã„ã¨å³ã®ãƒ•ã‚©ãƒ³ãƒˆã‚’é©ç”¨ã™ã‚‹ã‚‰ã—ã„ã€‚
                            ctx.fillStyle="rgb(255,255,555)";
                            ctx.fillText("â–¶", 970, 520);
                            ctx.fillText("â—€", 830, 520);
                            ctx.font = "50px  'ï¼­ï¼³ ã‚´ã‚·ãƒƒã‚¯'";//ãƒ•ã‚©ãƒ³ãƒˆè¨­å®šã€‚å·¦ã®ãƒ•ã‚©ãƒ³ãƒˆãŒãªã„ã¨å³ã®ãƒ•ã‚©ãƒ³ãƒˆã‚’é©ç”¨ã™ã‚‹ã‚‰ã—ã„ã€‚
                            ctx.fillText(cursor2+1, 900, 520);
                            ctx.fillText("èª­ã¿è¾¼ã¿", 820, 720,180);
                            ctx.fillText("ä¸Šæ›¸ã", 840, 300,140);
                            ctx.font = "30px  'ï¼­ï¼³ ã‚´ã‚·ãƒƒã‚¯'";//ãƒ•ã‚©ãƒ³ãƒˆè¨­å®šã€‚å·¦ã®ãƒ•ã‚©ãƒ³ãƒˆãŒãªã„ã¨å³ã®ãƒ•ã‚©ãƒ³ãƒˆã‚’é©ç”¨ã™ã‚‹ã‚‰ã—ã„ã€‚
                            ctx.fillText("Ã—:æˆ»ã‚‹", 900, 950,100);
                            if(cursor==0){
                                ctx.drawImage(yubi,850,320+4*Math.sin(time*Math.PI/8));
                            }else if(cursor==1){
                                ctx.drawImage(yubi,850,540+4*Math.sin(time*Math.PI/8));
                            }else if(cursor==2){
                                ctx.drawImage(yubi,850,740+4*Math.sin(time*Math.PI/8));
                            }
                            ä¿å­˜ãƒ‡ãƒƒã‚­è¡¨ç¤º(ä¿å­˜ãƒ‡ãƒƒã‚­[cursor2],15,15,780,960);
                        }

                        if(æ¼”å‡ºã‚«ã‚¦ãƒ³ãƒˆ<0 && æ¼”å‡ºã‚«ã‚¦ãƒ³ãƒˆ>-5){
                            æ¼”å‡ºã‚«ã‚¦ãƒ³ãƒˆ-=1;
                            ctx.fillStyle="rgb(50,50,50)";
                            ctx.fillRect(0,0,1000+æ¼”å‡ºã‚«ã‚¦ãƒ³ãƒˆ*200,1000);
                        }
                        if(æ¼”å‡ºã‚«ã‚¦ãƒ³ãƒˆ>0){
                            æ¼”å‡ºã‚«ã‚¦ãƒ³ãƒˆ+=1;
                            ctx.fillStyle="rgb(50,50,50)";
                            ctx.fillRect(0,0,æ¼”å‡ºã‚«ã‚¦ãƒ³ãƒˆ*200,1000,);
                        }
                        if(æ¼”å‡ºã‚«ã‚¦ãƒ³ãƒˆ>5){
                            game_phase=next_phase;
                            æ¼”å‡ºã‚«ã‚¦ãƒ³ãƒˆ=-11;
                        }

                    }else if(game_phase=="æˆ¦é—˜æº–å‚™"){
                        my_deck=[];//åˆæœŸåŒ–åˆæœŸåŒ–ãƒ¼ï¼ã£ã¦åˆæœŸåŒ–ã—ãªãã¦è‰¯ã„ãƒ¤ãƒ„ã‚‚åˆæœŸåŒ–ã—ã¦ã‚‹æ°—ãŒã™ã‚‹ã€‚ã¾ã‚ã„ã„ã‹
                        teki_deck=[];
                        my_yamahuda=[];
                        teki_yamahuda=[];
                        my_tehuda=[];
                        teki_tehuda=[];
                        my_ba=["","","","",""];
                        teki_ba=["","","","",""];
                        death_my_ba=["","","","",""];//æ­»äº¡æ™‚æ¼”å‡ºã®ãŸã‚ã«ã‚«ãƒ¼ãƒ‰ã‚’åˆ¥ã®å ´æ‰€ã«ç§»ã—ãŸã„ï¼ˆå ´ã«æ®‹ã™ã¨ãƒã‚°ã®æ¸©åºŠã«ãªã‚‹ã“ã¨ã¯è‡ªæ˜ãªã®ã§ï¼‰
                        death_teki_ba=["","","","",""];
                        tukau_mahou=[];//é­”æ³•ã¤ã‹ã£ãŸç¬é–“ã«æ¶ˆãˆã‚‹ã®ã‚ˆããªã„ã¨æ€ã£ãŸã€‚

                        my_haka=[];
                        teki_haka=[];
                        
                        deck_initialize(deck_list,my_deck,my_yamahuda);
                        deck_initialize(teki_deck_list,teki_deck,teki_yamahuda);

                        my_now_pull=my_deck_pull;//å ´åˆã«ã‚ˆã£ã¦ã¯ã“ã“ã§å¢—ã‚„ã—ã¦ã‚‚ã„ã„ã¨ã€ã§ã‚†ã£ã¡ã¯æ€ã†ã‚ˆ
                        pull_card(my_yamahuda,my_tehuda,my_now_pull);
                        game_phase="æˆ¦é—˜";

                        cursor=16;
                        cursor2=0;

                        duel_phase="è‡ªç”±";
                        aite_phase=0;//ç›¸æ‰‹ã®ã‚¿ãƒ¼ãƒ³ã«å‹•ã‹ã—ãŸã„ã€‚
                       
                        aite_delay=0;//ãŠå‰é«˜é€Ÿã§å‹•ãã™ãï¼

                        my_kougeki_sum=0;//AIç”¨
                        teki_kougeki_sum=0;//é™å‚ã«ã‚‚ä½¿ã£ã¦ã‚‹

                        zuba=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]//zuba64ã‚’è¡¨ç¤ºã™ã‚‹ã‚¿ã‚¤ãƒãƒ¼
                        yamahuda_damage=[0,0,0,0];//å·¦ãŒä¿ºã¸ã®ãƒ€ãƒ¡ãƒ¼ã‚¸ã§ã€å³ãŒç›¸æ‰‹ã¸ã®ãƒ€ãƒ¡ãƒ¼ã‚¸æå†™
                        
                        get_card="";
                        new_card=0;
                        ç›¸æ‰‹ã®é™å‚=0;
                    }else if(game_phase=="æˆ¦é—˜"){
                        if(key_interval<=0 && key_input!="" && duel_phase!="ç›¸æ‰‹"){//ã‚­ãƒ¼ãŒé•·æŠ¼ã—ã•ã‚Œã¦ã„ã‚‹å ´åˆã¯key_intervalãŒ0ã«ãªã£ã¦ã¦ã€ã‚­ãƒ¼æ“ä½œãŒé£›ã‚“ã§ããŸã‚‰
                            key_interval=5;//30*n/1000[s]ã®é–“ã€é•·æŠ¼ã—ã§ã®é€£ç¶šå…¥åŠ›ã‚’ç„¡åŠ¹ã€‚
                            for(let i=0;i<key_input.length;i++){
                                if(key_input.charAt(i)=="â†‘"){
                                    if(duel_phase=="è‡ªç”±"){
                                        if(cursor<=2){
                                            cursor=16;
                                        }else if(cursor<=5){
                                            cursor=15;
                                        }else if(cursor==6){
                                            cursor=-1;
                                        }else if(cursor==11){
                                            cursor=5;
                                        }else if(cursor>=7 && cursor<=15){
                                            cursor-=1;
                                        }else if(cursor>=16){
                                            cursor=10;
                                        }
                                    }else if(duel_phase=="æ”»æ’ƒ" && cursor_lock==0){
                                        if(cursor!=3){//å±±æœ­ã¸ã®æ”»æ’ƒã˜ã‚ƒãªã„ãªã‚‰
                                            cursor-=1;
                                            if(cursor<=10){
                                                cursor=15;
                                            }
                                        }
                                    }else if(duel_phase=="å¬å–š"){
                                        cursor-=1;
                                        if(cursor<=5){
                                            cursor=10;
                                        }
                                    }else if(duel_phase=="é­”æ³•ç™ºå‹•ç¢ºèª" || duel_phase=="ã‚¿ãƒ¼ãƒ³ã‚¨ãƒ³ãƒ‰ç¢ºèª" || duel_phase=="é™å‚"){
                                        cursor2=(cursor2+1)%2;
                                    }else if(duel_phase=="æ•µé¸æŠ" || duel_phase=="å‘³æ–¹é¸æŠ"){
                                        cursor2-=1;
                                        if(cursor2<0){
                                            cursor2=4;
                                        }
                                    }
                                    
                                }else if(key_input.charAt(i)=="â†"){
                                    if(duel_phase=="è‡ªç”±"){
                                        if(cursor==-1){
                                            cursor=5;
                                        }else if(cursor<=5){ 
                                        cursor-=1;
                                        }else if(cursor>=11 && cursor<=15){
                                            cursor-=5;
                                        }else if(cursor>=17){
                                            cursor-=1;
                                        }
                                    }
                                    
                                }else if(key_input.charAt(i)=="â†’"){
                                    if(duel_phase=="è‡ªç”±"){
                                        if(cursor<=4){
                                            cursor+=1;
                                        }else if(cursor==5){
                                            cursor=-1;
                                        }else if(cursor>=6 && cursor<=10){
                                            cursor+=5;
                                        }else if(cursor>=16 && cursor<=(my_tehuda.length+14)){
                                            cursor+=1;
                                        }
                                    }
                                    
                                }else if(key_input.charAt(i)=="â†“"){
                                    if(duel_phase=="è‡ªç”±"){
                                        if(cursor<=2){
                                            cursor=6;
                                        }else if(cursor<=5){
                                            cursor=11;
                                        }else if(cursor<=9){
                                            cursor+=1;
                                        }else if(cursor==10){
                                            cursor=16;
                                        }else if(cursor<=15){
                                            cursor+=1;
                                        }else{
                                            cursor=-1;
                                        }
                                    }else if(duel_phase=="æ”»æ’ƒ" && cursor_lock==0){
                                        if(cursor!=3){//å±±æœ­ã¸ã®æ”»æ’ƒã˜ã‚ƒãªã„ãªã‚‰
                                            cursor+=1;
                                            if(cursor>=16){
                                                cursor=11;
                                            }
                                        }
                                    }else if(duel_phase=="å¬å–š"){
                                        cursor+=1;
                                        if(cursor>=11){
                                            cursor=6;
                                        }
                                    }else if(duel_phase=="é­”æ³•ç™ºå‹•ç¢ºèª" || duel_phase=="ã‚¿ãƒ¼ãƒ³ã‚¨ãƒ³ãƒ‰ç¢ºèª" || duel_phase=="é™å‚"){
                                        cursor2=(cursor2+1)%2;
                                    }else if(duel_phase=="æ•µé¸æŠ" || duel_phase=="å‘³æ–¹é¸æŠ"){
                                        cursor2+=1;
                                        if(cursor2>4){
                                            cursor2=0;
                                        }
                                    }
                                    
                                }else if(key_input.charAt(i)=="ã€‡" && é•·æŠ¼ã—é˜»æ­¢==0){
                                    é•·æŠ¼ã—é˜»æ­¢=1;
                                    if(duel_phase=="è‡ªç”±"){
                                        if(cursor==-1){
                                            cursor2=0;
                                            duel_phase="ã‚¿ãƒ¼ãƒ³ã‚¨ãƒ³ãƒ‰ç¢ºèª";
                                        }else if(cursor>=6 && cursor<=10 && my_ba[cursor-6]!=""){
                                            pre_cursor=cursor;//ã‚­ãƒ£ãƒ³ã‚»ãƒ«ã—ãŸã¨ãã«ã“ã“ã«æˆ»ã—ã¦ã‚ã’ãŸã„ã‚ˆã­ã€‚
                                            atk_card=my_ba[cursor-6];//ã“ã¡ã‚‰ã®æ”»æ’ƒã‚«ãƒ¼ãƒ‰
                                            if(atk_card.can_ATK>=1){
                                                duel_phase="æ”»æ’ƒ";
                                                cursor_lock=0;//ç‰¹æ®Šãªæ•µãŒã„ã‚‹ãªã‚‰ã‚«ãƒ¼ã‚½ãƒ«ã‚’ãƒ­ãƒƒã‚¯ã™ã‚‹ã€‚

                                                if(ba_mons_num(teki_ba)==0){
                                                    cursor=3;//æ•µãŒã„ãªã„å ´åˆã¯å±±æœ­ã«ã‚«ãƒ¼ã‚½ãƒ«åˆã‚ã›ã¦ã»ã—ã„ãª
                                                }else{
                                                    cursor=11;
                                                    for(let i=0;i<5;i++){//æ•µãŒã„ã‚‹ã¨ã“ã‚ã«ã‚«ãƒ¼ã‚½ãƒ«åˆã‚ã›ã‚ˆã†ãœã€‚
                                                        if(teki_ba[cursor-11]=="" || teki_ba[cursor-11].state.indexOf("ãƒ–ãƒ­ãƒƒã‚¯")==-1){
                                                            cursor+=1;
                                                        }else{
                                                            cursor_lock=cursor;//å¤‰ãªãƒ¢ãƒ³ã‚¹ã‚¿ãƒ¼ãŒã„ãŸã‹ã‚‰ãƒ­ãƒƒã‚¯ã•ã›ã¦ã‚‚ã‚‰ã†ãœï¼
                                                            break;
                                                        }
                                                    }
                                                    if(cursor_lock==0){//å¤‰ãªãƒ¢ãƒ³ã‚¹ã‚¿ãƒ¼ã¯ã„ãªã‹ã£ãŸãœï¼
                                                        cursor=11;
                                                        for(let i=0;i<5;i++){//æ•µãŒã„ã‚‹ã¨ã“ã‚ã«ã‚«ãƒ¼ã‚½ãƒ«åˆã‚ã›ã‚ˆã†ãœã€‚
                                                        if(teki_ba[cursor-11]==""){
                                                            cursor+=1;
                                                        }else{
                                                            break;
                                                        }
                                                    }

                                                    }
                                                    
                                                }
                                                
                                            }
                                            

                                        }else if(cursor>=16 && my_tehuda.length!=0){
                                            pre_cursor=cursor;//ã‚­ãƒ£ãƒ³ã‚»ãƒ«ã—ãŸã¨ãã«ã“ã“ã«æˆ»ã—ã¦ã‚ã’ãŸã„ã‚ˆã­ã€‚
                                            tukau_card_num=cursor-16;
                                            if(my_tehuda[tukau_card_num].state.indexOf("ãƒ¢ãƒ³ã‚¹ã‚¿ãƒ¼")!=-1){//æ‰‹æœ­ã«ã‚ã£ãŸãƒ¢ãƒ³ã‚¹ã‚¿ãƒ¼ã‚«ãƒ¼ãƒ‰ã‚’é¸ã‚“ã ãªï¼
                                                if(ba_mons_num(my_ba)!=5){//å ´ãŒã„ã£ã±ã„ã˜ã‚ƒãªã„ã®ã§ã€ã„ã‚„ã€ç”Ÿè´„å¬å–šç³»ãªã‚‰ã„ã£ã±ã„ã§ã‚‚ã„ã„ã®ã‹
                                                    duel_phase="å¬å–š";
                                                    cursor=10;
                                                    for(let i=0;i<5;i++){//ã‚«ãƒ¼ãƒ‰ãŒãªã„ã¨ã“ã‚ã«ã‚«ãƒ¼ã‚½ãƒ«åˆã‚ã›ã‚ˆã†ãœã€‚
                                                        if(my_ba[cursor-6]!=""){
                                                            cursor-=1;
                                                        }else{
                                                            break;
                                                        }
                                                    }
                                                }
                                            }else if(my_tehuda[tukau_card_num].state.indexOf("é­”æ³•")!=-1){//ãŸã¶ã‚“é­”æ³•ã ãœï¼
                                                if(my_tehuda[tukau_card_num].card.effect_req("æ‰‹æœ­ã‹ã‚‰")){//ç™ºå‹•æ¡ä»¶ç¢ºèªï¼
                                                    if(my_tehuda[tukau_card_num].state.indexOf("æ•µé¸æŠ")!=-1){
                                                        duel_phase="æ•µé¸æŠ";
                                                        
                                                        for(let i=0;i<5;i++){//æ•µãŒã„ã‚‹ã¨ã“ã‚ã«ã‚«ãƒ¼ã‚½ãƒ«åˆã‚ã›ã‚ˆã†ãœã€‚
                                                            if(teki_ba[i]==""){
                                                            }else{
                                                                cursor2=i;
                                                                break;
                                                            }
                                                        }
                                                    }else if(my_tehuda[tukau_card_num].state.indexOf("å‘³æ–¹é¸æŠ")!=-1){
                                                        duel_phase="å‘³æ–¹é¸æŠ";
                                                        for(let i=0;i<5;i++){//å‘³æ–¹ã„ã‚‹ã¨ã“ã‚ã«ã‚«ãƒ¼ã‚½ãƒ«åˆã‚ã›ã‚ˆã†ãœã€‚
                                                            if(my_ba[i]==""){
                                                            }else{
                                                                cursor2=i;
                                                                break;
                                                            }
                                                        }
                                                    }else{//é¸æŠã—ãªã„ã‚¿ã‚¤ãƒ—ã ã¨â€¦æ€ã†
                                                        duel_phase="é­”æ³•ç™ºå‹•ç¢ºèª";
                                                        cursor2=0;
                                                    }
                                                }else{//ä½¿ãˆãªã‹ã£ãŸã‚‰ãªã‚“ã‹ã—ã¦ã‚ã’ãŸã„ã¨ã„ã†æ°—æŒã¡ãŒãªã„ã¨ã„ã‚ã‘ã§ã‚‚ãªã„ãŒã€ã¨ãã«ãªã„

                                                }
                                                
                                            }
                                        }
                                    }else if(duel_phase=="æ”»æ’ƒ"){
                                        if(cursor==3){//ãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆã‚¢ã‚¿ãƒƒã‚¯ï¼
                                            atk_yamahuda(atk_card.ATK,teki_yamahuda,teki_haka,teki_ba,teki_tehuda);
                                            atk_card.can_ATK-=1;//æ”»æ’ƒå¯èƒ½å›æ•°ãŒ1æ¸›ã‚‹
                                            my_ba[pre_cursor-6].move=-3;
                                            cursor=pre_cursor;
                                            zuba[3]=6;
                                            if(duel_phase=="æ”»æ’ƒ"){//ã“ã‚ŒãŒé€šã‚‰ãªã‹ã£ãŸã‚‰ã©ã£ã¡ã‹ãŒè² ã‘ã¦ã‚‹
                                                duel_phase="è‡ªç”±";
                                            }
                                            
                                        }else if(teki_ba[cursor-11]!=""){//ç›¸æ‰‹ã®ã„ã‚‹å ´æ‰€ã‚’æ”»æ’ƒ
                                            def_card=teki_ba[cursor-11];
                                            atk_mons(atk_card,def_card);
                                            if(def_card.HP<=0){//å€’ã—ãŸï½
                                                teki_ba[cursor-11]=death_card(def_card,teki_haka,cursor-11);
                                                //teki_ba[cursor-11]="";ã«ãªã‚‹ã‚ˆã‚“
                                                //def_card="";ã§ã¯ã ã‚ã€‚å‚ç…§ã¯ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã®å ´æ‰€ã—ã‹æ¸¡ã›ã¦ãªã„ã‚‰ã—ã„ã€ã˜ã‚ƒã‚æ¸¡ã›ã°ã„ã„ã˜ã‚ƒã‚“ï¼ã‚„ã ã‚ˆãƒãƒ¼ã‚«ï¼
                                            }
                                            atk_card.can_ATK-=1;//æ”»æ’ƒå¯èƒ½å›æ•°ãŒ1æ¸›ã‚‹
                                            my_ba[pre_cursor-6].move=-3;
                                            teki_ba[cursor-11].move=2;
                                            zuba[cursor]=6;
                                            cursor=pre_cursor;
                                            duel_phase="è‡ªç”±";
                                        }
                                    }else if(duel_phase=="å¬å–š"){
                                        //ç”Ÿè´„å¬å–šã¨ã‹ã»ã—ã„ã­ã€çŸ¥ã‚‰ã‚“ã€‚
                                        if(my_ba[cursor-6]==""){//ã‚ã„ã¦ã‚‹ã˜ã‚ƒï½ã‚“
                                            syoukan(my_tehuda[tukau_card_num],"my_ba",cursor-6);
                                            my_tehuda.splice(tukau_card_num,1);
                                            duel_phase="è‡ªç”±";
                                        }
                                        
                                    }else if(duel_phase=="é­”æ³•ç™ºå‹•ç¢ºèª"){
                                        if(cursor2==0){//ç™ºå‹•ã™ã‚‹ã£ã¦ãªã‚‰
                                            my_tehuda[tukau_card_num].card.effect("æ‰‹æœ­ã‹ã‚‰");
                                            tukau_mahou[tukau_mahou.length]=[my_tehuda[tukau_card_num],50+card_kankaku*tukau_card_num,780,10];
                                            my_tehuda[tukau_card_num].position="my_haka";
                                            my_haka.push(my_tehuda[tukau_card_num]);

                                            my_tehuda.splice(tukau_card_num,1);
                                            if(cursor!=16 && cursor==(my_tehuda.length+16)){
                                                cursor-=1;//ã‚«ãƒ¼ã‚½ãƒ«ãŒãã®ã¾ã¾ã ã¨ã¯ã¿å‡ºã‚‹ã‹ã‚‰â€¦ã•ã€‚
                                            }
                                        }
                                        
                                        duel_phase="è‡ªç”±";
                                    }else if(duel_phase=="æ•µé¸æŠ" || duel_phase=="å‘³æ–¹é¸æŠ"){//ç™ºå‹•ã™ã‚‹ã£ã¦ãªã‚‰
                                        if(my_tehuda[tukau_card_num].card.effect("æ‰‹æœ­ã‹ã‚‰")){//åŠ¹æœãŒãªã„ã¨ãã¯falseãŒè¿”ã£ã¦ãã‚‹ãœï¼
                                            
                                            tukau_mahou[tukau_mahou.length]=[my_tehuda[tukau_card_num],50+card_kankaku*tukau_card_num,780,10];
                                            my_tehuda[tukau_card_num].position="my_haka";
                                            my_haka.push(my_tehuda[tukau_card_num]);

                                            my_tehuda.splice(tukau_card_num,1);
                                            if(cursor!=16 && cursor==(my_tehuda.length+16)){
                                                cursor-=1;//ã‚«ãƒ¼ã‚½ãƒ«ãŒãã®ã¾ã¾ã ã¨ã¯ã¿å‡ºã‚‹ã‹ã‚‰â€¦ã•ã€‚
                                            }
                                            duel_phase="è‡ªç”±";
                                        }   
                                    }else if(duel_phase=="ã‚¿ãƒ¼ãƒ³ã‚¨ãƒ³ãƒ‰ç¢ºèª"){
                                        if(cursor2==0){//OK
                                            duel_phase="ç›¸æ‰‹";
                                            aite_phase="å§‹ã¾ã‚Š";
                                            cursor=16;
                                        }else{
                                            duel_phase="è‡ªç”±";
                                        }
                                    }else if(duel_phase=="ä¿ºå‹ã¡"){
                                        next_phase="æŒ‘æˆ¦";
                                        æ¼”å‡ºã‚«ã‚¦ãƒ³ãƒˆ=1;
                                        cursor=0;
                                    }else if(duel_phase=="æ•µå‹ã¡"){
                                        next_phase="ã‚¹ãƒ†ãƒ¼ã‚¸é¸æŠ";
                                        æ¼”å‡ºã‚«ã‚¦ãƒ³ãƒˆ=1;
                                        cursor=2;
                                    }else if(duel_phase=="é™å‚"){
                                        if(cursor2==0){//é™å‚ã‚Œã™â€¦
                                            next_phase="ã‚¹ãƒ†ãƒ¼ã‚¸é¸æŠ";
                                            æ¼”å‡ºã‚«ã‚¦ãƒ³ãƒˆ=1;
                                            cursor=2;
                                        }else{
                                            duel_phase="è‡ªç”±";
                                        }
                                    }
                                    
                                }else if(key_input.charAt(i)=="Ã—"){
                                    if(duel_phase=="è‡ªç”±"){
                                        duel_phase="é™å‚";
                                        cursor2=1;
                                    }else if(duel_phase=="æ”»æ’ƒ"){
                                        duel_phase="è‡ªç”±";
                                        cursor=pre_cursor;
                                    }else if(duel_phase=="å¬å–š"){
                                        duel_phase="è‡ªç”±";
                                        cursor=pre_cursor;
                                    }else if(duel_phase=="é­”æ³•ç™ºå‹•ç¢ºèª" || duel_phase=="ã‚¿ãƒ¼ãƒ³ã‚¨ãƒ³ãƒ‰ç¢ºèª" || duel_phase=="æ•µé¸æŠ" || duel_phase=="å‘³æ–¹é¸æŠ" || duel_phase=="é™å‚"){
                                        duel_phase="è‡ªç”±";
                                    }
                                }
                            }
                            if(key_owarasete==1){//ã‚‚ã†ãƒœã‚¿ãƒ³æŠ¼ã—ã¦ãªã„ã€‚æŠ¼ã—ã¦ãªã„ã¨ãã¯ã‚¤ãƒ™ãƒ³ãƒˆãã‚“ã§æ¤œçŸ¥ã™ã‚‹ã‚“ã ã‘ã©ã€å®Ÿè¡Œã‚ˆã‚Šã‚‚å…ˆã«ã‚¤ãƒ™ãƒ³ãƒˆãŒå‘¼ã°ã‚Œã¦ãŸã‚‰ã—ã‹ãŸãªã„ã®ã§ã“ã„ã¤ã§æ­¢ã‚ã‚‹
                                key_input="";
                                key_interval=0;
                            }
                            
                        }else if(key_interval>0){
                            key_interval=key_interval-1;//ã‚«ã‚¦ãƒ³ãƒˆãƒ€ã‚¦ãƒ³
                        }

                        if(é•·æŠ¼ã—é˜»æ­¢==1 && key_input.indexOf("ã€‡")==-1){//ã€‡ãƒœã‚¿ãƒ³ã®é•·æŠ¼ã—é€£æ‰“é˜»æ­¢ã€‚
                            é•·æŠ¼ã—é˜»æ­¢=0; 
                        }
                        //ç›¸æ‰‹ã‚¿ãƒ¼ãƒ³æ“ä½œã¯ä¸‹ã®ã»ã†ã«ç½®ã„ã¨ãã­ã€‚ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã—ã¦

                        if(duel_phase=="ç›¸æ‰‹"){
                            if(aite_delay>0){
                                aite_delay-=1;
                            }else if(aite_phase=="å§‹ã¾ã‚Š"){//è‡ªã‚¿ãƒ¼ãƒ³ã®çµ‚ã‚ã‚Šå‡¦ç†ã¯ã“ã“
                                for(let i=0;i<5;i++){
                                    if(my_ba[i]!=""){
                                        if(my_ba[i].state.indexOf("ä¸‰å›æ”»æ’ƒ")!=-1){
                                            my_ba[i].can_ATK=3;
                                        }else if(my_ba[i].state.indexOf("äºŒå›æ”»æ’ƒ")!=-1){
                                            my_ba[i].can_ATK=2;
                                        }else{
                                            my_ba[i].can_ATK=1;
                                        }
                                        if(my_ba[i].card.effect_req("ã‚¿ãƒ¼ãƒ³ã‚¨ãƒ³ãƒ‰")){//ç™ºå‹•æ¡ä»¶ç¢ºèªï¼
                                            my_ba[i].card.effect("ã‚¿ãƒ¼ãƒ³ã‚¨ãƒ³ãƒ‰",["è‡ªã‚¿ãƒ¼ãƒ³",i]);
                                        }
                                    }
                                }
                                pull_card(teki_yamahuda,teki_tehuda,teki_pull);//ç›¸æ‰‹ã®æ‰‹æœ­æšæ•°ã¯å³ä¸Šã®ã‚ãã“ã«è¡¨ç¤ºã—ã¦ã‚ã’ã‚‹ã¨ã‚„ã•ã—ã„ã¨æ€ã†ãªã€‚
                                teki_siyou_tehuda=[];
                                aite_phase="æ”»æ’ƒ";
                                
                            }else if(aite_phase=="æ”»æ’ƒ"){
                                aite_nayami="æ‚©ã‚€ãœï¼";
                                for(let i=0;i<teki_tehuda.length;i++){//æ”»æ’ƒã™ã‚‹å‰ã«ä½¿ã†ã¹ãæ‰‹æœ­ãŒã‚ã£ãŸã‚‰ä½¿ã†ãœï¼
                                    if(teki_tehuda[i].state.indexOf("é­”æ³•")!=-1 && teki_tehuda[i].card.effect_req("æ‰‹æœ­ã‹ã‚‰")){//é­”æ³•ã ã­ã€‚&& //ç™ºå‹•æ¡ä»¶ç¢ºèªï¼
                                        if(teki_tehuda[i].state.indexOf("æ”»æ’ƒä¸Šæ˜‡")!=-1 || teki_tehuda[i].state.indexOf("æ•µãƒ€ãƒ¡ãƒ¼ã‚¸")!=-1){
                                                if(teki_tehuda[i].card.AI("æ‰‹æœ­ã‹ã‚‰")){//AIçš„ãªç™ºå‹•æ¡ä»¶
                                                aite_phase="ç›¸æ‰‹ç™ºå‹•ç¢ºèª";
                                                aite_nayami="ç¢ºèªå¾…ã¡ã ãœï¼";
                                                tukau_card_num=i;
                                                break;                                        
                                            }
                                        }
                                    }
                                }
                                if(aite_nayami!="ç¢ºèªå¾…ã¡ã ãœï¼"){//æ”»æ’ƒã™ã‚‹ã®ï¼Ÿ
                                    for(let i=0;i<5;i++){//æ”»æ’ƒåŠ›ãŒä¸€ç•ªé«˜ã„ã‚„ã¤ã‚’è¦‹ã¤ã‘ã‚‹ãœï¼
                                        if(teki_ba[i]!=""){
                                            if(teki_ba[i].can_ATK>0){
                                                if(aite_nayami=="æ‚©ã‚€ãœï¼"){
                                                    aite_nayami=i;
                                                }else if(teki_ba[aite_nayami].ATK<teki_ba[i].ATK){//æ”»æ’ƒåŠ›ãŒé«˜ã„ã‚„ã¤ã‹ã‚‰æ”»æ’ƒã—ã‚ˆã†ãœï¼ˆã“ã‚ŒãŒã„ã„ã®ã‹ã¯â€¦çŸ¥ã‚‰ã‚“ã€‚ï¼‰
                                                    
                                                    aite_nayami=i;
                                                }
                                            }
                                        }
                                    }
                                    if(aite_nayami=="æ‚©ã‚€ãœï¼"){//æ”»æ’ƒã§ãã‚‹ã‚«ãƒ¼ãƒ‰ãŒãªã‹ã£ãŸãœï¼
                                        aite_phase="å¬å–š";
                                    }else{
                                        teki_ba[aite_nayami].move=-3;
                                        aite_delay=10;
                                        atk_card=teki_ba[aite_nayami];
                                        aite_nayami="æ‚©ã‚€ãœï¼";

                                        
                                        for(let i=0;i<5;i++){//ãƒ–ãƒ­ãƒƒã‚¯ãƒ¢ãƒ³ã‚¹ã‚¿ãƒ¼ã¨ã‹ã„ãŸã‚‰ãã„ã¤ã‚’ãªãã‚‹ãœï¼
                                            if(my_ba[i]!="" && my_ba[i].state.indexOf("ãƒ–ãƒ­ãƒƒã‚¯")!=-1){
                                                aite_nayami=i;//ç‰¹æ®Šæ•µãŒã„ãŸã‹ã‚‰æ®ºã™ãœï¼
                                                break;
                                            }
                                        }
                                        if(aite_nayami=="æ‚©ã‚€ãœï¼"){//ç‰¹æ®Šæ•µã¯ã„ãªã‹ã£ãŸãœï¼
                                            for(let i=0;i<5;i++){//ä½“åŠ›ã¨ã‹æ”»æ’ƒåŠ›ã‚’åŠ å‘³ã—ã¦æ”»æ’ƒç›¸æ‰‹ã‚’æ±ºã‚ãŸã„ãœï¼
                                                if(my_ba[i]!=""){
                                                    if(aite_nayami=="æ‚©ã‚€ãœï¼"){
                                                        aite_nayami=i;
                                                    }else if(my_ba[aite_nayami].ATK/Math.ceil(my_ba[aite_nayami].HP/atk_card.ATK)<my_ba[i].ATK/Math.ceil(my_ba[i].HP/atk_card.ATK)){//ãªã‚“ã‹æ®ºã—ã‚„ã™ãã¦å¼·ã„ã‚„ã¤ã‚’æ®´ã‚ã†
                                                        aite_nayami=i;
                                                    }
                                                }
                                            }
                                        }
                                        if(aite_nayami=="æ‚©ã‚€ãœï¼"){//ä¿ºã®å ´ãŒã‚¬ãƒ©ç©ºãã ã
                                            atk_yamahuda(atk_card.ATK,my_yamahuda,my_haka,my_ba,my_tehuda);
                                            if(duel_phase!="ç›¸æ‰‹"){
                                                aite_phase="çµ‚ã‚ã‚Š";//ã©ã£ã¡ã‹è² ã‘ãŸã
                                            }
                                            zuba[0]=6;
                                        }else{
                                            def_card=my_ba[aite_nayami];
                                            atk_mons(atk_card,def_card);
                                            if(def_card.HP<=0){//å€’ã—ãŸï½
                                                my_ba[aite_nayami]=death_card(def_card,my_haka,aite_nayami);
                                                //my_ba[aite_nayami]="";ã«ãªã‚‹ã‚ˆã‚“
                                                //def_card="";ã§ã¯ã ã‚ã€‚å‚ç…§ã¯ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã®å ´æ‰€ã—ã‹æ¸¡ã›ã¦ãªã„ã‚‰ã—ã„ã€ã˜ã‚ƒã‚æ¸¡ã›ã°ã„ã„ã˜ã‚ƒã‚“ï¼ã‚„ã ã‚ˆãƒãƒ¼ã‚«ï¼
                                            }
                                            my_ba[aite_nayami].move=2;
                                            zuba[aite_nayami+6]=6;
                                        }
                                        
                                        atk_card.can_ATK-=1;//æ”»æ’ƒã—ãŸã‚‰â€¦ã­
                                    }
                                }
                            }else if(aite_phase=="å¬å–š"){//å¬å–šâ€¦é­”æ³•ç™ºå‹•ã‚‚ã—ã¦ã‚‹ãœï¼
                                aite_nayami="æ‚©ã‚€ãœï¼";
                                for(let i=0;i<teki_tehuda.length;i++){//æ‰‹æœ­ä½¿ã†ãœï¼    
                                    if(teki_tehuda[i].state.indexOf("ãƒ¢ãƒ³ã‚¹ã‚¿ãƒ¼")!=-1){//ãƒ¢ãƒ³ã‚¹ã‚¿ãƒ¼ã‚«ãƒ¼ãƒ‰ã‚„ã‚“ã‘ï¼
                                        for(let j=0;j<5;j++){
                                            if(teki_ba[ba_haiti[j]]==""){//ç©ºã„ã¦ã‚‹å ´æ‰€ã‚ã‚‹ã˜ã‚ƒã‚“ï¼
                                                
                                                syoukan(teki_tehuda[i],"teki_ba",ba_haiti[j]);
                                                aite_delay=5;
                                                teki_tehuda.splice(i,1);
                                                aite_nayami="æ‰‹æœ­ä½¿ã£ãŸã‚ˆ";
                                                break;//
                                            }
                                        }
                                    }else if(teki_tehuda[i].state.indexOf("é­”æ³•")!=-1 && teki_tehuda[i].card.effect_req("æ‰‹æœ­ã‹ã‚‰")){//é­”æ³•ã ã­ã€‚&& //ç™ºå‹•æ¡ä»¶ç¢ºèªï¼
                                        if(teki_tehuda[i].card.AI("æ‰‹æœ­ã‹ã‚‰")){//AIçš„ãªç™ºå‹•æ¡ä»¶
                                            aite_phase="ç›¸æ‰‹ç™ºå‹•ç¢ºèª";
                                            aite_nayami="ç¢ºèªå¾…ã¡ã ãœï¼";
                                            tukau_card_num=i;
                                            break;                                        
                                        }
                                        
                                    }

                                    if(aite_nayami=="æ‰‹æœ­ä½¿ã£ãŸã‚ˆ"){
                                        aite_phase="æ”»æ’ƒ";//å ´ãŒå¤‰åŒ–ã—ã¦ãã†ã ã‹ã‚‰æ”»æ’ƒæ¤œè¨ã—ãªãŠã—ã¦
                                        break;//æ‰‹æœ­ä¸€æšä½¿ã£ãŸã‚‰ãƒ«ãƒ¼ãƒ—ã—ãªãŠã—ã¦ãã¦
                                        
                                    }
                                }
                                if(aite_nayami=="æ‚©ã‚€ãœï¼"){//ã‚„ã‚‹ã“ã¨ãªããªã£ãŸï¼Ÿ
                                    aite_phase="çµ‚ã‚ã‚Š";
                                    aite_delay=3;
                                }
                            
                            }else if(aite_phase=="çµ‚ã‚ã‚Š"){//æ•µã‚¿ãƒ¼ãƒ³ã®çµ‚ã‚ã‚Šå‡¦ç†
                                duel_phase="è‡ªç”±";
                                pull_card(my_yamahuda,my_tehuda,my_now_pull);
                                for(let i=0;i<5;i++){
                                    if(teki_ba[i]!=""){
                                        if(teki_ba[i].state.indexOf("ä¸‰å›æ”»æ’ƒ")!=-1){
                                            teki_ba[i].can_ATK=3;
                                        }else if(teki_ba[i].state.indexOf("äºŒå›æ”»æ’ƒ")!=-1){
                                            teki_ba[i].can_ATK=2;
                                        }else{
                                            teki_ba[i].can_ATK=1;
                                        }
                                        if(teki_ba[i].card.effect_req("ã‚¿ãƒ¼ãƒ³ã‚¨ãƒ³ãƒ‰")){//ç™ºå‹•æ¡ä»¶ç¢ºèªï¼
                                            teki_ba[i].card.effect("ã‚¿ãƒ¼ãƒ³ã‚¨ãƒ³ãƒ‰",["æ•µã‚¿ãƒ¼ãƒ³",i]);
                                        }
                                    }
                                }
                                if(teki_yamahuda.length==0 && teki_tehuda.length==0){//ã‚‚ã†å±±æœ­ã‚‚æ‰‹æœ­ã‚‚ãªã„ã˜ã‚ƒã‚“â€¦
                                    teki_kougeki_sum=0;
                                    for(let i=0;i<5;i++){//å ´ã®æ”»æ’ƒåŠ›ãŒâ€¦
                                        if(teki_ba[i]!=""){
                                            teki_kougeki_sum+=teki_ba[i].ATK;
                                        }
                                    }
                                    if(teki_kougeki_sum==0){//æ”»æ’ƒåŠ›ã®åˆè¨ˆã‚‚0ï¼ï¼Ÿã“ã‚Œã¯ã‚‚ã†ãƒ€ãƒ¡ã¿ãŸã„ã§ã™ã­ã€‚
                                        duel_phase="ä¿ºå‹ã¡";
                                        ç›¸æ‰‹ã®é™å‚=1;
                                    }
                                }
                            
                            }
                            
                        }

                        ctx.fillStyle="rgb(130,255,170)";
                        if(stage==2 && mini_stage>3){
                            ctx.fillStyle="rgb(130,10,0)";
                        }
                        ctx.fillRect(0,0,1000,1000);
                        ctx.drawImage(card_basyo,0,0);

                        //ã“ã“ã§è‡ªåˆ†ã®ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã«ã‚«ãƒ¼ãƒ‰ã‚’ä¸¦ã¹ã‚‹
                        ctx.save();
                        ctx.rotate(90 * Math.PI / 180);
                        for(let i=0;i<my_ba.length;i++){
                            if(my_ba[i]!=""){
                                card_draw(my_ba[i],105+135*i,-225+10*(Math.abs(2-i))+my_ba[i].move*50);
                            }
                            if(my_ba[i].move>0){
                                my_ba[i].move-=1;
                            }else if(my_ba[i].move<0){
                                my_ba[i].move+=1;
                            }
                        }
                        ctx.restore();
                                        

                        //ã“ã“ã§æ•µã®ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã«ã‚«ãƒ¼ãƒ‰ã‚’ä¸¦ã¹ã‚‹
                        ctx.save();
                        ctx.rotate(270 * Math.PI / 180);
                        for(let i=0;i<teki_ba.length;i++){
                            if(teki_ba[i]!=""){
                                card_draw(teki_ba[i],-235-135*i,775+10*(Math.abs(2-i))+teki_ba[i].move*50);
                            }
                            if(teki_ba[i].move>0){
                                teki_ba[i].move-=1;
                            }else if(teki_ba[i].move<0){
                                teki_ba[i].move+=1;
                            }
                        }
                        ctx.restore();

                        //è‡ªåˆ†ã‚«ãƒ¼ãƒ‰ã®æ­»
                        ctx.save();
                        ctx.rotate(90 * Math.PI / 180);
                        for(let i=0;i<5;i++){
                            if(death_my_ba[i]!=""){
                                card_draw(death_my_ba[i],105+135*i+(death_my_ba[i].move%2)*10,-225+(Math.abs(2-i)*10)+(10-death_my_ba[i].move)*30);

                                ctx.drawImage(def_plate,105+135*i+(death_my_ba[i].move%2)*10,-225+(Math.abs(2-i)*10)+(10-death_my_ba[i].move)*30+152);
                                ctx.font = "40px  'ï¼­ï¼³ ã‚´ã‚·ãƒƒã‚¯'";//ãƒ•ã‚©ãƒ³ãƒˆè¨­å®šã€‚å·¦ã®ãƒ•ã‚©ãƒ³ãƒˆãŒãªã„ã¨å³ã®ãƒ•ã‚©ãƒ³ãƒˆã‚’é©ç”¨ã™ã‚‹ã‚‰ã—ã„ã€‚
                                ctx.fillStyle="rgb(255,255,255)";
                                ctx.fillText(0, 105+135*i+(death_my_ba[i].move%2)*10+13, -225+(Math.abs(2-i)*10)+(10-death_my_ba[i].move)*30+188,42);
                            }
                            if(death_my_ba[i].move>0){
                                death_my_ba[i].move-=1;
                                if(death_my_ba[i].move==0){
                                    death_my_ba[i]="";
                                }
                            }
                        }
                        ctx.restore();

                        //ç›¸æ‰‹ã‚«ãƒ¼ãƒ‰ã®æ­»
                        ctx.save();
                        ctx.rotate(270 * Math.PI / 180);
                        for(let i=0;i<5;i++){
                            if(death_teki_ba[i]!=""){
                                card_draw(death_teki_ba[i],-235-135*i+(death_teki_ba[i].move%2)*10,775+(Math.abs(2-i)*10)+(10-death_teki_ba[i].move)*30);
                             
                                ctx.drawImage(def_plate,-235-135*i+(death_teki_ba[i].move%2)*10,775+(Math.abs(2-i)*10)+(10-death_teki_ba[i].move)*30+152);
                                ctx.font = "40px  'ï¼­ï¼³ ã‚´ã‚·ãƒƒã‚¯'";//ãƒ•ã‚©ãƒ³ãƒˆè¨­å®šã€‚å·¦ã®ãƒ•ã‚©ãƒ³ãƒˆãŒãªã„ã¨å³ã®ãƒ•ã‚©ãƒ³ãƒˆã‚’é©ç”¨ã™ã‚‹ã‚‰ã—ã„ã€‚
                                ctx.fillStyle="rgb(255,255,255)";
                                ctx.fillText(0, -235-135*i+(death_teki_ba[i].move%2)*10+13, 775+(Math.abs(2-i)*10)+(10-death_teki_ba[i].move)*30+188,42);
                                       
                                    
                            }
                            if(death_teki_ba[i].move>0){
                                death_teki_ba[i].move-=1;
                                if(death_teki_ba[i].move==0){
                                    death_teki_ba[i]="";
                                }
                            }
                        }
                        ctx.restore();

                        if(cursor==1){
                            ctx.fillStyle="rgb(55,55,55)";
                            ctx.fillRect(240,110,520,670);
                            ctx.fillStyle="rgb(255,255,255)";
                            ctx.fillRect(250,120,500,650);
                            takusan_card_draw(my_haka,260,130,480,630);
                        }else if(cursor==4){
                            ctx.fillStyle="rgb(55,55,55)";
                            ctx.fillRect(240,110,520,670);
                            ctx.fillStyle="rgb(255,255,255)";
                            ctx.fillRect(250,120,500,650);
                            takusan_card_draw(teki_haka,260,130,480,630);
                        }

                        ctx.fillStyle="rgb(0,0,0)";//ä¸Šã®ã»ã†ã‚’æã„ã¦ã¾ã™ã€‚
                        ctx.fillRect(105,5,440,90);
                        ctx.fillRect(555,5,440,90);
                        ctx.fillStyle="rgb(255,255,255)";
                        ctx.fillRect(110,10,430,80);
                        ctx.fillRect(560,10,430,80);
                        ctx.fillStyle="rgb(150,200,255)";
                        ctx.fillRect(388,12,150,76);
                        ctx.fillRect(838,12,150,76);
                        ctx.font = "50px  'ï¼­ï¼³ ã‚´ã‚·ãƒƒã‚¯'";//ãƒ•ã‚©ãƒ³ãƒˆè¨­å®šã€‚å·¦ã®ãƒ•ã‚©ãƒ³ãƒˆãŒãªã„ã¨å³ã®ãƒ•ã‚©ãƒ³ãƒˆã‚’é©ç”¨ã™ã‚‹ã‚‰ã—ã„ã€‚
                        ctx.fillStyle="rgb(0,0,0)";
                        ctx.drawImage(turn_end,5,5);
                        ctx.drawImage(yamahuda,110,20);
                        ctx.fillText(my_yamahuda.length+yamahuda_damage[0], 174, 70,70);
                        ctx.drawImage(yamahuda,560,20);
                        ctx.fillText(teki_yamahuda.length+yamahuda_damage[1], 624, 70,70);
                        ctx.drawImage(hakaba,250,20);
                        ctx.fillText(my_haka.length-yamahuda_damage[2], 308, 70,70);
                        ctx.drawImage(hakaba,700,20);
                        ctx.fillText(teki_haka.length-yamahuda_damage[3], 758, 70,70);
                        for (let i=0;i<4;i++){
                            if(yamahuda_damage[i]>0){
                                if(time%3==0){
                                    yamahuda_damage[i]-=1;
                                }
                            }
                        }

                        ctx.font = "32px  'ï¼­ï¼³ ã‚´ã‚·ãƒƒã‚¯'";//ãƒ•ã‚©ãƒ³ãƒˆè¨­å®šã€‚å·¦ã®ãƒ•ã‚©ãƒ³ãƒˆãŒãªã„ã¨å³ã®ãƒ•ã‚©ãƒ³ãƒˆã‚’é©ç”¨ã™ã‚‹ã‚‰ã—ã„ã€‚
                        ctx.fillStyle="rgb(0,0,0)";
                        if(my_tehuda.length>0){
                            ctx.drawImage(tehuda32,390,14);
                            ctx.fillText(my_tehuda.length, 425, 41);
                        }
                        if(teki_tehuda.length>0){
                            ctx.drawImage(tehuda32,840,14);
                            
                            ctx.fillText(teki_tehuda.length, 875, 41);
                        }
                        tokusyu_hyouji(390,46);
                        

                        ctx.font = "40px  'ï¼­ï¼³ ã‚´ã‚·ãƒƒã‚¯'";//ãƒ•ã‚©ãƒ³ãƒˆè¨­å®šã€‚å·¦ã®ãƒ•ã‚©ãƒ³ãƒˆãŒãªã„ã¨å³ã®ãƒ•ã‚©ãƒ³ãƒˆã‚’é©ç”¨ã™ã‚‹ã‚‰ã—ã„ã€‚
                        ctx.fillStyle="rgb(0,0,0)";
                        ctx.fillRect(5,785,990,210);
                        ctx.fillStyle="rgb(255,255,255)";
                        ctx.fillRect(10,790,980,200);
                        if(my_tehuda.length!=0){//ã“ã“ã‹ã‚‰æ‰‹æœ­-------------------
                            ctx.save();
                            tehuda_maisuu=my_tehuda.length;
                            if(tehuda_maisuu<7){
                                card_kankaku=130;
                            }else{
                                card_kankaku=850/tehuda_maisuu;
                            }
                            kakudo=25/tehuda_maisuu;
                            ctx.rotate(10 * Math.PI / 180);
                        for (let i=0;i<tehuda_maisuu;i++){                      
                                if((cursor-16)==i || ((pre_cursor-16)==i && duel_phase=="å¬å–š")){
                                    card_draw(my_tehuda[i],(50+card_kankaku*i)*Math.cos((10+i*kakudo) * Math.PI / 180)+780*Math.sin((10+i*kakudo) * Math.PI / 180),780*Math.cos((10+i*kakudo) * Math.PI / 180)-(50+card_kankaku*i)*Math.sin((10+i*kakudo) * Math.PI / 180),-40);
                                }else{
                                    card_draw(my_tehuda[i],(50+card_kankaku*i)*Math.cos((10+i*kakudo) * Math.PI / 180)+780*Math.sin((10+i*kakudo) * Math.PI / 180),780*Math.cos((10+i*kakudo) * Math.PI / 180)-(50+card_kankaku*i)*Math.sin((10+i*kakudo) * Math.PI / 180));
                                }
                                ctx.rotate(kakudo * Math.PI / 180);
                            }
                            ctx.restore();
                        }
                        
                        
                        

                        for (let i=0;i<16;i++){ //æ”»æ’ƒæ™‚ã«zuba64ã‚’è¡¨ç¤º
                            if(zuba[i]!=0){
                                zuba[i]-=1;
                                if(i==0){
                                    ctx.drawImage(zuba64,110,20);
                                }else if(i==1){
                                }else if(i==2){
                                }else if(i==3){
                                    ctx.drawImage(zuba64,560,20);
                                }else if(i==4){
                                }else if(i==5){
                                }else if(i==6){
                                    ctx.drawImage(zuba64,20,100);
                                }else if(i==7){
                                    ctx.drawImage(zuba64,30,235);
                                }else if(i==8){
                                    ctx.drawImage(zuba64,40,370);
                                }else if(i==9){
                                    ctx.drawImage(zuba64,30,505);
                                }else if(i==10){
                                    ctx.drawImage(zuba64,20,640);
                                }else if(i==11){
                                    ctx.drawImage(zuba64,916,170);
                                }else if(i==12){
                                    ctx.drawImage(zuba64,906,305);
                                }else if(i==13){
                                    ctx.drawImage(zuba64,896,440);
                                }else if(i==14){
                                    ctx.drawImage(zuba64,906,575);
                                }else if(i==15){
                                    ctx.drawImage(zuba64,916,710);
                                }
                                
                            }
                        }
                        
                        
                        //ã‚«ãƒ¼ã‚½ãƒ«è¡¨ç¤ºâ€¦
                        if(cursor==-1){  ctx.drawImage(yubi,-10,80+4*Math.sin(time*Math.PI/8)); //å·¦ä¸Š ãªã‚“ã§-1ã‹ã‚‰å§‹ã¾ã£ã¦ã‚‹ã®ï¼Ÿã€€ãã‚Œã¯ã­ã€è¨­è¨ˆãƒŸã‚¹ã•ï¼
                        }else if(cursor==0){  ctx.drawImage(yubi,110,80+4*Math.sin(time*Math.PI/8)); 
                        }else if(cursor==1){  ctx.drawImage(yubi,260,80+4*Math.sin(time*Math.PI/8));
                        }else if(cursor==2){  ctx.drawImage(yubi,400,80+4*Math.sin(time*Math.PI/8));

                        }else if(cursor==3){ ctx.drawImage(yubi,560,80+4*Math.sin(time*Math.PI/8));//å³ä¸Š
                        }else if(cursor==4){ctx.drawImage(yubi,710,80+4*Math.sin(time*Math.PI/8));
                        }else if(cursor==5){ctx.drawImage(yubi,850,80+4*Math.sin(time*Math.PI/8));


                        }else if(cursor==6){//å·¦å ´
                            ctx.save();
                            ctx.rotate(90 * Math.PI / 180);
                            ctx.drawImage(yubi,105,-100+4*Math.sin(time*Math.PI/8));
                            ctx.restore();
                        }else if(cursor==7){
                            ctx.save();
                            ctx.rotate(90 * Math.PI / 180);
                            ctx.drawImage(yubi,245,-110+4*Math.sin(time*Math.PI/8));
                            ctx.restore();
                        }else if(cursor==8){
                            ctx.save();
                            ctx.rotate(90 * Math.PI / 180);
                            ctx.drawImage(yubi,375,-120+4*Math.sin(time*Math.PI/8));
                            ctx.restore();
                        }else if(cursor==9){
                            ctx.save();
                            ctx.rotate(90 * Math.PI / 180);
                            ctx.drawImage(yubi,510,-110+4*Math.sin(time*Math.PI/8));
                            ctx.restore();
                        }else if(cursor==10){
                            ctx.save();
                            ctx.rotate(90 * Math.PI / 180);
                            ctx.drawImage(yubi,645,-100+4*Math.sin(time*Math.PI/8));
                            ctx.restore();

                        }else if(cursor==11){//å³ã°
                            ctx.save();
                            ctx.rotate(270 * Math.PI / 180);
                            ctx.drawImage(yubi,-235,900+4*Math.sin(time*Math.PI/8));
                            ctx.restore();
                        }else if(cursor==12){
                            ctx.save();
                            ctx.rotate(270 * Math.PI / 180);
                            ctx.drawImage(yubi,-370,890+4*Math.sin(time*Math.PI/8));
                            ctx.restore();
                        }else if(cursor==13){
                            ctx.save();
                            ctx.rotate(270 * Math.PI / 180);
                            ctx.drawImage(yubi,-505,880+4*Math.sin(time*Math.PI/8));
                            ctx.restore();
                        }else if(cursor==14){
                            ctx.save();
                            ctx.rotate(270 * Math.PI / 180);
                            ctx.drawImage(yubi,-640,890+4*Math.sin(time*Math.PI/8));
                            ctx.restore();
                        }else if(cursor==15){
                            ctx.save();
                            ctx.rotate(270 * Math.PI / 180);
                            ctx.drawImage(yubi,-775,900+4*Math.sin(time*Math.PI/8));
                            ctx.restore();

                        }else{//æ‰‹æœ­ã§ãƒ¤ãƒ³ã‚¹ã€‚
                            ctx.save();
                            ctx.rotate((10+kakudo*(cursor-16)) * Math.PI / 180);
                            ctx.drawImage(yubi,(50+card_kankaku*(cursor-16))*Math.cos((10+(cursor-16)*kakudo) * Math.PI / 180)+780*Math.sin((10+(cursor-16)*kakudo) * Math.PI / 180),100+4*Math.sin(time*Math.PI/8)+780*Math.cos((10+(cursor-16)*kakudo) * Math.PI / 180)-(50+card_kankaku*(cursor-16))*Math.sin((10+(cursor-16)*kakudo) * Math.PI / 180));
                            ctx.restore();
                        }
                        if(duel_phase=="æ•µé¸æŠ"){
                            ctx.fillStyle="rgb(0,0,0,0.5)";
                            ctx.fillRect(0,780,1000,100);
                            ctx.fillRect(0,100,770,680);
                            ctx.fillRect(0,0,1000,100);
                            
                            ctx.fillStyle="rgb(0,150,0)";
                            ctx.fillRect(0,800,1000,200);
                            ctx.fillStyle="rgb(255,255,255)";
                            ctx.fillRect(200,825,600,150);
                            ctx.font = "80px  'ï¼­ï¼³ ã‚´ã‚·ãƒƒã‚¯'";//ãƒ•ã‚©ãƒ³ãƒˆè¨­å®šã€‚å·¦ã®ãƒ•ã‚©ãƒ³ãƒˆãŒãªã„ã¨å³ã®ãƒ•ã‚©ãƒ³ãƒˆã‚’é©ç”¨ã™ã‚‹ã‚‰ã—ã„ã€‚
                            ctx.fillStyle="rgb(0,200,0)";
                            ctx.fillText("é­”æ³•å¯¾è±¡é¸æŠï¼", 225, 900);
                            ctx.font = "30px  'ï¼­ï¼³ ã‚´ã‚·ãƒƒã‚¯'";//ãƒ•ã‚©ãƒ³ãƒˆè¨­å®šã€‚å·¦ã®ãƒ•ã‚©ãƒ³ãƒˆãŒãªã„ã¨å³ã®ãƒ•ã‚©ãƒ³ãƒˆã‚’é©ç”¨ã™ã‚‹ã‚‰ã—ã„ã€‚
                            ctx.fillText("ã‚­ãƒ£ãƒ³ã‚»ãƒ«ï¼šÃ—", 570, 960);
                            if(cursor2==0){//å³ã°
                                ctx.save();
                                ctx.rotate(270 * Math.PI / 180);
                                ctx.drawImage(yubi,-235,900+4*Math.sin(time*Math.PI/8));
                                ctx.restore();
                            }else if(cursor2==1){
                                ctx.save();
                                ctx.rotate(270 * Math.PI / 180);
                                ctx.drawImage(yubi,-370,890+4*Math.sin(time*Math.PI/8));
                                ctx.restore();
                            }else if(cursor2==2){
                                ctx.save();
                                ctx.rotate(270 * Math.PI / 180);
                                ctx.drawImage(yubi,-505,880+4*Math.sin(time*Math.PI/8));
                                ctx.restore();
                            }else if(cursor2==3){
                                ctx.save();
                                ctx.rotate(270 * Math.PI / 180);
                                ctx.drawImage(yubi,-640,890+4*Math.sin(time*Math.PI/8));
                                ctx.restore();
                            }else if(cursor2==4){
                                ctx.save();
                                ctx.rotate(270 * Math.PI / 180);
                                ctx.drawImage(yubi,-775,900+4*Math.sin(time*Math.PI/8));
                                ctx.restore();

                            }
                        }else if(duel_phase=="å‘³æ–¹é¸æŠ"){
                            ctx.fillStyle="rgb(0,0,0,0.5)";
                            ctx.fillRect(0,780,1000,100);
                            ctx.fillRect(230,100,770,680);
                            ctx.fillRect(0,0,1000,100);
                            
                            ctx.fillStyle="rgb(0,150,0)";
                            ctx.fillRect(0,800,1000,200);
                            ctx.fillStyle="rgb(255,255,255)";
                            ctx.fillRect(200,825,600,150);
                            ctx.font = "80px  'ï¼­ï¼³ ã‚´ã‚·ãƒƒã‚¯'";//ãƒ•ã‚©ãƒ³ãƒˆè¨­å®šã€‚å·¦ã®ãƒ•ã‚©ãƒ³ãƒˆãŒãªã„ã¨å³ã®ãƒ•ã‚©ãƒ³ãƒˆã‚’é©ç”¨ã™ã‚‹ã‚‰ã—ã„ã€‚
                            ctx.fillStyle="rgb(0,200,0)";
                            ctx.fillText("é­”æ³•å¯¾è±¡é¸æŠï¼", 225, 900);
                            ctx.font = "30px  'ï¼­ï¼³ ã‚´ã‚·ãƒƒã‚¯'";//ãƒ•ã‚©ãƒ³ãƒˆè¨­å®šã€‚å·¦ã®ãƒ•ã‚©ãƒ³ãƒˆãŒãªã„ã¨å³ã®ãƒ•ã‚©ãƒ³ãƒˆã‚’é©ç”¨ã™ã‚‹ã‚‰ã—ã„ã€‚
                            ctx.fillText("ã‚­ãƒ£ãƒ³ã‚»ãƒ«ï¼šÃ—", 570, 960);
                            if(cursor2==0){//å·¦å ´
                                ctx.save();
                                ctx.rotate(90 * Math.PI / 180);
                                ctx.drawImage(yubi,105,-100+4*Math.sin(time*Math.PI/8));
                                ctx.restore();
                            }else if(cursor2==1){
                                ctx.save();
                                ctx.rotate(90 * Math.PI / 180);
                                ctx.drawImage(yubi,245,-110+4*Math.sin(time*Math.PI/8));
                                ctx.restore();
                            }else if(cursor2==2){
                                ctx.save();
                                ctx.rotate(90 * Math.PI / 180);
                                ctx.drawImage(yubi,375,-120+4*Math.sin(time*Math.PI/8));
                                ctx.restore();
                            }else if(cursor2==3){
                                ctx.save();
                                ctx.rotate(90 * Math.PI / 180);
                                ctx.drawImage(yubi,510,-110+4*Math.sin(time*Math.PI/8));
                                ctx.restore();
                            }else if(cursor2==4){
                                ctx.save();
                                ctx.rotate(90 * Math.PI / 180);
                                ctx.drawImage(yubi,645,-100+4*Math.sin(time*Math.PI/8));
                                ctx.restore();

                            }
                        }else if(duel_phase=="é­”æ³•ç™ºå‹•ç¢ºèª"){
                            ctx.fillStyle="rgb(0,0,0,0.5)";
                            ctx.fillRect(0,0,1000,1000);
                            ctx.fillStyle="rgb(55,55,55)";
                            ctx.fillRect(290,790,420,200);
                            ctx.fillStyle="rgb(200,255,200)";
                            ctx.fillRect(300,800,400,180);
                            ctx.font = "50px  'ï¼­ï¼³ ã‚´ã‚·ãƒƒã‚¯'";//ãƒ•ã‚©ãƒ³ãƒˆè¨­å®šã€‚å·¦ã®ãƒ•ã‚©ãƒ³ãƒˆãŒãªã„ã¨å³ã®ãƒ•ã‚©ãƒ³ãƒˆã‚’é©ç”¨ã™ã‚‹ã‚‰ã—ã„ã€‚
                            ctx.fillStyle="rgb(0,0,0)";
                            ctx.fillText("ä½¿ã†", 500, 870);
                            ctx.fillText("ã‚„ã‚ã‚‹", 500, 950);
                            ctx.save();
                            ctx.rotate(90 * Math.PI / 180);
                            ctx.drawImage(yubi,790+cursor2*80,-480+4*Math.sin(time*Math.PI/8));
                            ctx.restore();
                        }

                        //ã‚«ãƒ¼ãƒ‰ã®è©³ç´°è¡¨ç¤º
                        if((cursor>=6 &&cursor<=10 && (my_ba[cursor-6]!="")) || (cursor>=11 && cursor<=15 && (teki_ba[cursor-11]!="")) || (cursor>=16 && my_tehuda.length!=0)){//ã‚«ãƒ¼ãƒ‰è©³ç´°ã‚’è¡¨ç¤ºã™ã‚‹ã¨ãã¯ã‚«ãƒ¼ãƒ‰ãŒã‚ã‚‹ã¨ãã ã‘ã ãœï¼
                            ctx.fillStyle="rgb(55,55,55)";
                            ctx.fillRect(240,110,520,670);
                            ctx.fillStyle="rgb(255,255,255)";
                            ctx.fillRect(250,120,500,650);
                            if(cursor<=10){
                                syousai_card=my_ba[cursor-6];
                            }else if(cursor<=15){
                                syousai_card=teki_ba[cursor-11];
                            }else{
                                syousai_card=my_tehuda[cursor-16];
                            }
                            ctx.fillStyle="rgb(200,200,200)";
                            ctx.fillRect(255,125,490,50);
                            ctx.font = "50px  'ï¼­ï¼³ ã‚´ã‚·ãƒƒã‚¯'";//ãƒ•ã‚©ãƒ³ãƒˆè¨­å®šã€‚å·¦ã®ãƒ•ã‚©ãƒ³ãƒˆãŒãªã„ã¨å³ã®ãƒ•ã‚©ãƒ³ãƒˆã‚’é©ç”¨ã™ã‚‹ã‚‰ã—ã„ã€‚
                            ctx.fillStyle="rgb(0,0,0)";
                            ctx.fillText(syousai_card.card.name, 260, 168);
                            ctx.drawImage(syousai_card.card.image,260,180);

                            if(syousai_card.state.indexOf("ãƒ¢ãƒ³ã‚¹ã‚¿ãƒ¼")!=-1){
                                ctx.drawImage(atk_plate,400,180);
                                ctx.drawImage(def_plate,450,185);
                                ctx.fillText("(", 570, 225);
                                ctx.drawImage(atk_plate,600,180);
                                ctx.drawImage(def_plate,650,185);
                                ctx.fillText(")", 704, 225);
                                ctx.font = "40px  'ï¼­ï¼³ ã‚´ã‚·ãƒƒã‚¯'";//ãƒ•ã‚©ãƒ³ãƒˆè¨­å®šã€‚å·¦ã®ãƒ•ã‚©ãƒ³ãƒˆãŒãªã„ã¨å³ã®ãƒ•ã‚©ãƒ³ãƒˆã‚’é©ç”¨ã™ã‚‹ã‚‰ã—ã„ã€‚
                                ctx.fillStyle="rgb(255,255,255)";
                                if(syousai_card.ATK<10){
                                    ctx.fillText(syousai_card.ATK, 414, 222,42);
                                }else{
                                    ctx.fillText(syousai_card.ATK, 404, 222,42);
                                }
                                if(syousai_card.HP<10){
                                    ctx.fillText(syousai_card.HP, 464, 222,42);
                                }else{
                                    ctx.fillText(syousai_card.HP, 454, 222,42);
                                }
                                if(syousai_card.card.ATK<10){
                                    ctx.fillText(syousai_card.card.ATK, 614, 222,42);
                                }else{
                                    ctx.fillText(syousai_card.card.ATK, 604, 222,42);
                                }
                                if(syousai_card.card.HP<10){
                                    ctx.fillText(syousai_card.card.HP, 664, 222,42);
                                }else{
                                    ctx.fillText(syousai_card.card.HP, 654, 222,42);
                                }
                            }
                            ctx.fillStyle="rgb(0,0,0)";
                            text_kaigyou_hyouji(syousai_card.card.text, 260, 380,480,240,40,syousai_card.card.text_iro);//x,yã¯å·¦ä¸ŠæŒ‡å®šã ã‹ã‚‰æ³¨æ„ã ï¼
                            ctx.fillRect(255,600,490,2);
                            syousai_state_color=[];
                            syousai_state="åˆ†é¡:";
                            for(let i=0;i<syousai_card.state.length;i++){
                                if(syousai_card.state[i]=="TOP_ACE"){
                                    syousai_state_color[syousai_state_color.length]=[syousai_state.length+1,7,"rgb(255,0,0)"];
                                }else if(syousai_card.state[i]=="ACE"){
                                    syousai_state_color[syousai_state_color.length]=[syousai_state.length+1,7,"rgb(200,200,0)"];
                                }
                                syousai_state+=" "+syousai_card.state[i];
                            }
                            text_kaigyou_hyouji(syousai_state, 260, 610,480,160,40,syousai_state_color);//x,yã¯å·¦ä¸ŠæŒ‡å®šã ã‹ã‚‰æ³¨æ„ã ï¼
                            
                        }

                        if(duel_phase=="å¬å–š"){//ä»Šãªã‚“ã®çŠ¶æ…‹ãªã‚“ã ã‚ˆã£ã¦ã„ã†ãŠå®¢æ§˜ã®å£°ã«ãŠç­”ãˆã™ã‚‹å½¢ã«ãªã£ãŸ
                            ctx.save();
                            ctx.fillStyle="rgb(0,0,0,0.5)";
                            ctx.fillRect(0,0,230,100);
                            ctx.fillRect(0,780,230,220);
                            ctx.fillRect(230,0,770,1000);
                            ctx.rotate(45 * Math.PI / 180);
                            ctx.fillStyle="rgb(0,0,150)";
                            ctx.fillRect(200,-525,1000,200);
                            ctx.fillStyle="rgb(255,255,255)";
                            ctx.fillRect(400,-500,600,150);
                            ctx.font = "80px  'ï¼­ï¼³ ã‚´ã‚·ãƒƒã‚¯'";//ãƒ•ã‚©ãƒ³ãƒˆè¨­å®šã€‚å·¦ã®ãƒ•ã‚©ãƒ³ãƒˆãŒãªã„ã¨å³ã®ãƒ•ã‚©ãƒ³ãƒˆã‚’é©ç”¨ã™ã‚‹ã‚‰ã—ã„ã€‚
                            ctx.fillStyle="rgb(0,0,200)";
                            ctx.fillText("å¬å–šå ´æ‰€é¸æŠï¼", 440, -400);
                            ctx.font = "30px  'ï¼­ï¼³ ã‚´ã‚·ãƒƒã‚¯'";//ãƒ•ã‚©ãƒ³ãƒˆè¨­å®šã€‚å·¦ã®ãƒ•ã‚©ãƒ³ãƒˆãŒãªã„ã¨å³ã®ãƒ•ã‚©ãƒ³ãƒˆã‚’é©ç”¨ã™ã‚‹ã‚‰ã—ã„ã€‚
                            ctx.fillText("ã‚­ãƒ£ãƒ³ã‚»ãƒ«ï¼šÃ—", 750, -360);
                            ctx.restore();
                        }else if(duel_phase=="æ”»æ’ƒ"){
                            ctx.fillStyle="rgb(0,0,0,0.5)";
                            ctx.fillRect(0,780,1000,100);
                            ctx.fillRect(230,100,540,680);
                            ctx.fillRect(0,100,230,(pre_cursor-6)*135);
                            ctx.fillRect(0,105+(pre_cursor-5)*135,230,(10-pre_cursor)*135);
                            if(cursor==3){
                                ctx.fillRect(0,0,550,100);
                                ctx.fillRect(700,0,300,100);
                                ctx.fillRect(770,100,230,800);
                            }else{
                                ctx.fillRect(0,0,1000,100);
                            }
                            ctx.fillStyle="rgb(150,0,0)";
                            ctx.fillRect(0,800,1000,200);
                            ctx.fillStyle="rgb(255,255,255)";
                            ctx.fillRect(200,825,600,150);
                            ctx.font = "80px  'ï¼­ï¼³ ã‚´ã‚·ãƒƒã‚¯'";//ãƒ•ã‚©ãƒ³ãƒˆè¨­å®šã€‚å·¦ã®ãƒ•ã‚©ãƒ³ãƒˆãŒãªã„ã¨å³ã®ãƒ•ã‚©ãƒ³ãƒˆã‚’é©ç”¨ã™ã‚‹ã‚‰ã—ã„ã€‚
                            ctx.fillStyle="rgb(200,0,0)";
                            ctx.fillText("æ”»æ’ƒå¯¾è±¡é¸æŠï¼", 225, 900);
                            ctx.drawImage(atk_circle,100+10*Math.sin(time*Math.PI/64),850+8*Math.sin(time*Math.PI/16));
                            ctx.drawImage(atk_circle,836+10*Math.sin(time*Math.PI/64),850+8*Math.sin(time*Math.PI/16));
                            ctx.font = "30px  'ï¼­ï¼³ ã‚´ã‚·ãƒƒã‚¯'";//ãƒ•ã‚©ãƒ³ãƒˆè¨­å®šã€‚å·¦ã®ãƒ•ã‚©ãƒ³ãƒˆãŒãªã„ã¨å³ã®ãƒ•ã‚©ãƒ³ãƒˆã‚’é©ç”¨ã™ã‚‹ã‚‰ã—ã„ã€‚
                            ctx.fillText("ã‚­ãƒ£ãƒ³ã‚»ãƒ«ï¼šÃ—", 570, 960);
                        }else if(duel_phase=="ç›¸æ‰‹"){
                            ctx.fillStyle="rgb(0,0,0,0.5)";
                            ctx.fillRect(0,0,100,100);
                            ctx.fillRect(0,780,1000,220);
                            ctx.fillRect(0,100,15,680);
                            ctx.fillRect(985,0,15,780);
                            ctx.fillRect(100,0,885,15);
                            ctx.fillStyle="rgb(50,50,50)";
                            ctx.fillRect(230,100,540,680);
                            ctx.font = "40px  'ï¼­ï¼³ ã‚´ã‚·ãƒƒã‚¯'";//ãƒ•ã‚©ãƒ³ãƒˆè¨­å®šã€‚å·¦ã®ãƒ•ã‚©ãƒ³ãƒˆãŒãªã„ã¨å³ã®ãƒ•ã‚©ãƒ³ãƒˆã‚’é©ç”¨ã™ã‚‹ã‚‰ã—ã„ã€‚
                            ctx.fillStyle="rgb(255,255,255)";
                            ctx.fillText("ç›¸æ‰‹ã‚¿ãƒ¼ãƒ³", 300, 300);
                            //ctx.fillText("å¬å–š", 400, 400);
                        }else if(duel_phase=="ä¿ºå‹ã¡"){
                            ctx.fillStyle="rgb(0,0,0,0.5)";
                            ctx.fillRect(0,0,1000,1000);
                            ctx.fillStyle="rgb(255,55,55)";
                            ctx.fillRect(150,100,700,700);
                            ctx.fillStyle="rgb(255,255,255)";
                            ctx.fillRect(200,150,600,600);

                            
                            ctx.fillStyle="rgb(0,0,0)";
                            if(ç›¸æ‰‹ã®é™å‚==0){
                                ctx.font = "80px  'ï¼­ï¼³ ã‚´ã‚·ãƒƒã‚¯'";//ãƒ•ã‚©ãƒ³ãƒˆè¨­å®šã€‚å·¦ã®ãƒ•ã‚©ãƒ³ãƒˆãŒãªã„ã¨å³ã®ãƒ•ã‚©ãƒ³ãƒˆã‚’é©ç”¨ã™ã‚‹ã‚‰ã—ã„ã€‚
                                ctx.fillText("å‹ã£ãŸï¼", 250, 250);
                            }else{
                                ctx.font = "70px  'ï¼­ï¼³ ã‚´ã‚·ãƒƒã‚¯'";//ãƒ•ã‚©ãƒ³ãƒˆè¨­å®šã€‚å·¦ã®ãƒ•ã‚©ãƒ³ãƒˆãŒãªã„ã¨å³ã®ãƒ•ã‚©ãƒ³ãƒˆã‚’é©ç”¨ã™ã‚‹ã‚‰ã—ã„ã€‚
                                ctx.fillText("ç›¸æ‰‹ãŒé™å‚ã—ãŸï¼", 250, 250);
                            }
                            
                            ctx.font = "40px  'ï¼­ï¼³ ã‚´ã‚·ãƒƒã‚¯'";//ãƒ•ã‚©ãƒ³ãƒˆè¨­å®šã€‚å·¦ã®ãƒ•ã‚©ãƒ³ãƒˆãŒãªã„ã¨å³ã®ãƒ•ã‚©ãƒ³ãƒˆã‚’é©ç”¨ã™ã‚‹ã‚‰ã—ã„ã€‚
                            ctx.fillText("ãŠã‚ã‚Œã¨", 250, 350);
                            ctx.drawImage(kati_image,550,500);
                            
                            if(get_card==""){
                                card_count=0;
                                for(let i=0;i<teki_deck_list.card_list.length;i++){
                                    card_count+=teki_deck_list.card_list[i][1];
                                }
                               
                                card_count=Math.floor(Math.random()*card_count);
   
                                for(let i=0;i<teki_deck_list.card_list.length;i++){//ponya_list={card_list:[[ponya,5],[ponya_ace,2],[yakuso_3,3]],ACE:[ponya_ace,ponya_ace],TOP_ACE:[ponya]};
                                    card_count-=teki_deck_list.card_list[i][1];
                                    if(card_count<0){
                                        get_card={...teki_deck_list.card_list[i][0]};
                                        break;
                                    }
                                }
                                
                                new_card=0;
                                //å–å¾—ã‚«ãƒ¼ãƒ‰æ±ºå®š
                                for(let i=0;i<æ‰€æŒã‚«ãƒ¼ãƒ‰.length;i++){
                                    if(æ‰€æŒã‚«ãƒ¼ãƒ‰[i][0].name==get_card.name){//æŒã£ã¦ã‚‹ï¼Ÿã“ã®ã‚«ãƒ¼ãƒ‰
                                        æ‰€æŒã‚«ãƒ¼ãƒ‰[i][1]+=1;
                                        new_card=1;//ã“ã®ã‚«ãƒ¼ãƒ‰æŒã£ã¦ãŸã‚
                                        break;
                                    }
                                }
                                if(new_card==0){//æ–°è¦ã‚«ãƒ¼ãƒ‰ã ï¼
                                    æ‰€æŒã‚«ãƒ¼ãƒ‰[æ‰€æŒã‚«ãƒ¼ãƒ‰.length]=[get_card,1];
                                }
                                æ‰€æŒã‚«ãƒ¼ãƒ‰ã®ã‚»ãƒ¼ãƒ–();
                                ãŠé‡‘+=drop_gold;
                                localStorage.setItem('ãŠé‡‘',ãŠé‡‘);
                            }
                            ctx.fillText("å…¥æ‰‹ã‚«ãƒ¼ãƒ‰ï¼š"+get_card.name, 250, 450);
                            ctx.drawImage(get_card.image,300,500);
                        }else if(duel_phase=="æ•µå‹ã¡"){
                            ctx.fillStyle="rgb(0,0,0,0.5)";
                            ctx.fillRect(0,0,1000,1000);
                            ctx.fillStyle="rgb(55,55,255)";
                            ctx.fillRect(150,100,700,700);
                            ctx.fillStyle="rgb(255,255,255)";
                            ctx.fillRect(200,150,600,600);

                            ctx.font = "80px  'ï¼­ï¼³ ã‚´ã‚·ãƒƒã‚¯'";//ãƒ•ã‚©ãƒ³ãƒˆè¨­å®šã€‚å·¦ã®ãƒ•ã‚©ãƒ³ãƒˆãŒãªã„ã¨å³ã®ãƒ•ã‚©ãƒ³ãƒˆã‚’é©ç”¨ã™ã‚‹ã‚‰ã—ã„ã€‚
                            ctx.fillStyle="rgb(0,0,0)";
                            ctx.fillText("è² ã‘ãŸï¼", 250, 250);
                            ctx.font = "40px  'ï¼­ï¼³ ã‚´ã‚·ãƒƒã‚¯'";//ãƒ•ã‚©ãƒ³ãƒˆè¨­å®šã€‚å·¦ã®ãƒ•ã‚©ãƒ³ãƒˆãŒãªã„ã¨å³ã®ãƒ•ã‚©ãƒ³ãƒˆã‚’é©ç”¨ã™ã‚‹ã‚‰ã—ã„ã€‚
                            ctx.fillText("ããˆãƒ¼", 250, 350);
                            ctx.drawImage(make_image,550,525);
                        }else if(duel_phase=="ã‚¿ãƒ¼ãƒ³ã‚¨ãƒ³ãƒ‰ç¢ºèª"){
                            ctx.fillStyle="rgb(0,0,0,0.5)";
                            ctx.fillRect(0,0,1000,1000);
                            ctx.fillStyle="rgb(200,100,55)";
                            ctx.fillRect(250,50,700,480);
                            ctx.fillStyle="rgb(255,220,200)";
                            ctx.fillRect(275,75,650,430);
                            ctx.fillStyle="rgb(255,255,255)";
                            ctx.fillRect(295,200,610,280);
                            ctx.font = "80px  'ï¼­ï¼³ ã‚´ã‚·ãƒƒã‚¯'";//ãƒ•ã‚©ãƒ³ãƒˆè¨­å®šã€‚å·¦ã®ãƒ•ã‚©ãƒ³ãƒˆãŒãªã„ã¨å³ã®ãƒ•ã‚©ãƒ³ãƒˆã‚’é©ç”¨ã™ã‚‹ã‚‰ã—ã„ã€‚
                            ctx.fillStyle="rgb(0,0,0)";
                            ctx.fillText("ã‚¿ãƒ¼ãƒ³ã‚¨ãƒ³ãƒ‰", 400, 175);
                            ctx.drawImage(turn_end,300,100);
                            
                            ctx.fillText("OK", 450, 300);
                            ctx.fillText("ã‚­ãƒ£ãƒ³ã‚»ãƒ«", 450, 430);
                            ctx.save();
                            ctx.rotate(90 * Math.PI / 180);
                            ctx.drawImage(yubi,200+cursor2*140,-430+4*Math.sin(time*Math.PI/8));
                            ctx.restore();
                        }else if(duel_phase=="é™å‚"){
                            ctx.fillStyle="rgb(0,0,0,0.5)";
                            ctx.fillRect(0,0,1000,1000);
                            ctx.fillStyle="rgb(100,100,100)";
                            ctx.fillRect(150,50,700,480);
                            ctx.fillStyle="rgb(220,220,220)";
                            ctx.fillRect(175,75,650,430);
                            ctx.fillStyle="rgb(255,255,255)";
                            ctx.fillRect(195,200,610,280);
                            ctx.font = "80px  'ï¼­ï¼³ ã‚´ã‚·ãƒƒã‚¯'";//ãƒ•ã‚©ãƒ³ãƒˆè¨­å®šã€‚å·¦ã®ãƒ•ã‚©ãƒ³ãƒˆãŒãªã„ã¨å³ã®ãƒ•ã‚©ãƒ³ãƒˆã‚’é©ç”¨ã™ã‚‹ã‚‰ã—ã„ã€‚
                            ctx.fillStyle="rgb(0,0,0)";
                            ctx.fillText("é™å‚ã™ã‚‹ã®ï¼ï¼Ÿ", 240, 175);
                            
                            ctx.fillText("é™å‚ã§ã™ï¼", 350, 300);
                            ctx.fillText("ã‚­ãƒ£ãƒ³ã‚»ãƒ«", 350, 430);
                            ctx.save();
                            ctx.rotate(90 * Math.PI / 180);
                            ctx.drawImage(yubi,200+cursor2*140,-330+4*Math.sin(time*Math.PI/8));
                            ctx.restore();
                        }

                        if(tukau_mahou.length!=0){                        
                            for(let i=tukau_mahou.length-1;i>=0;i--){
                                card_draw(tukau_mahou[i][0],tukau_mahou[i][1],tukau_mahou[i][2]-300+tukau_mahou[i][3]*tukau_mahou[i][3]*3);
                                tukau_mahou[i][3]-=1;
                                if(tukau_mahou[i][3]==0){
                                    tukau_mahou.splice(i,1);
                                }
                            }
                        }
                        
                        if(aite_phase=="ç›¸æ‰‹ç™ºå‹•ç¢ºèª"){
                            
                            ctx.fillStyle="rgb(55,55,55)";
                            ctx.fillRect(240,110,520,670);
                            ctx.fillStyle="rgb(255,255,255)";
                            ctx.fillRect(250,120,500,650);
                            syousai_card=teki_tehuda[tukau_card_num];
                            ctx.fillStyle="rgb(200,200,200)";
                            ctx.fillRect(255,125,490,50);
                            ctx.font = "50px  'ï¼­ï¼³ ã‚´ã‚·ãƒƒã‚¯'";//ãƒ•ã‚©ãƒ³ãƒˆè¨­å®šã€‚å·¦ã®ãƒ•ã‚©ãƒ³ãƒˆãŒãªã„ã¨å³ã®ãƒ•ã‚©ãƒ³ãƒˆã‚’é©ç”¨ã™ã‚‹ã‚‰ã—ã„ã€‚
                            ctx.fillStyle="rgb(0,0,0)";
                            ctx.fillText(syousai_card.card.name, 260, 168);
                            ctx.drawImage(syousai_card.card.image,260,180);

                            ctx.fillStyle="rgb(0,0,0)";
                            text_kaigyou_hyouji(syousai_card.card.text, 260, 380,480,240,40,syousai_card.card.text_iro);//x,yã¯å·¦ä¸ŠæŒ‡å®šã ã‹ã‚‰æ³¨æ„ã ï¼
                            ctx.fillRect(255,600,490,2);
                            syousai_state_color=[];
                            syousai_state="åˆ†é¡:";
                            for(let i=0;i<syousai_card.state.length;i++){
                                if(syousai_card.state[i]=="TOP_ACE"){
                                    syousai_state_color[syousai_state_color.length]=[syousai_state.length+1,7,"rgb(255,0,0)"];
                                }else if(syousai_card.state[i]=="ACE"){
                                    syousai_state_color[syousai_state_color.length]=[syousai_state.length+1,7,"rgb(200,200,0)"];
                                }
                                syousai_state+=" "+syousai_card.state[i];
                            }
                            text_kaigyou_hyouji(syousai_state, 260, 610,480,160,40,syousai_state_color);//x,yã¯å·¦ä¸ŠæŒ‡å®šã ã‹ã‚‰æ³¨æ„ã ï¼

                            ctx.fillStyle="rgb(55,55,55)";
                            ctx.fillRect(90,790,820,200);
                            ctx.fillStyle="rgb(200,255,200)";
                            ctx.fillRect(100,800,800,180);
                            ctx.font = "50px  'ï¼­ï¼³ ã‚´ã‚·ãƒƒã‚¯'";//ãƒ•ã‚©ãƒ³ãƒˆè¨­å®šã€‚å·¦ã®ãƒ•ã‚©ãƒ³ãƒˆãŒãªã„ã¨å³ã®ãƒ•ã‚©ãƒ³ãƒˆã‚’é©ç”¨ã™ã‚‹ã‚‰ã—ã„ã€‚
                            ctx.fillStyle="rgb(0,0,0)";
                            ctx.fillText("ãƒ»ç™ºå‹•ã•ã‚Œã¾ã—ãŸï¼", 150, 870);
                            ctx.fillText("OK", 380, 950);
                            ctx.save();
                            ctx.rotate(90 * Math.PI / 180);
                            ctx.drawImage(yubi,870,-370+4*Math.sin(time*Math.PI/8));
                            ctx.restore();
                            if(key_interval<=0 && key_input!=""  && é•·æŠ¼ã—é˜»æ­¢==0){//ã‚­ãƒ¼ãŒé•·æŠ¼ã—ã•ã‚Œã¦ã„ã‚‹å ´åˆã¯key_intervalãŒ0ã«ãªã£ã¦ã¦ã€ã‚­ãƒ¼æ“ä½œãŒé£›ã‚“ã§ããŸã‚‰
                                key_interval=5;//30*n/1000[s]ã®é–“ã€é•·æŠ¼ã—ã§ã®é€£ç¶šå…¥åŠ›ã‚’ç„¡åŠ¹ã€‚
                                é•·æŠ¼ã—é˜»æ­¢=1;
                                if(key_input.indexOf("ã€‡")!=-1 || key_input.indexOf("Ã—")!=-1){
                                    teki_tehuda[tukau_card_num].card.effect("æ‰‹æœ­ã‹ã‚‰");
                                    teki_tehuda[tukau_card_num].position="teki_haka";
                                    teki_haka.push(teki_tehuda[tukau_card_num]);
                                    aite_delay=5;
                                    teki_tehuda.splice(tukau_card_num,1);
                                    aite_phase="æ”»æ’ƒ";
                                }
                            }
                        }
                        if(æ¼”å‡ºã‚«ã‚¦ãƒ³ãƒˆ<0 && æ¼”å‡ºã‚«ã‚¦ãƒ³ãƒˆ>-5){
                            æ¼”å‡ºã‚«ã‚¦ãƒ³ãƒˆ-=1;
                            ctx.fillStyle="rgb(50,50,50)";
                            ctx.fillRect(0,0,1000,1000+æ¼”å‡ºã‚«ã‚¦ãƒ³ãƒˆ*200);
                        }
                        if(æ¼”å‡ºã‚«ã‚¦ãƒ³ãƒˆ>0){
                            æ¼”å‡ºã‚«ã‚¦ãƒ³ãƒˆ+=1;
                            ctx.fillStyle="rgb(50,50,50)";
                            ctx.fillRect(0,0,1000,æ¼”å‡ºã‚«ã‚¦ãƒ³ãƒˆ*200);
                        }
                        if(æ¼”å‡ºã‚«ã‚¦ãƒ³ãƒˆ>5){
                            game_phase=next_phase;
                            æ¼”å‡ºã‚«ã‚¦ãƒ³ãƒˆ=-1;
                        }
                    }
                },30);//30/1000[s]ã§ãã‚Šã‹ãˆã™ãï¼
                
            }
            
        </script>
    </head>
    <body>


        <div id="top"></div>
        <header id="header">
            <button onclick="html_link_btn()" id="html_link_btn"></button>
            <nav id="html_link_nav">
                <ul id="html_link_ul"></ul>
            </nav>
            <a href="../index.html">
                <img id="go_home" src="../images/site/omotyabako_deka.png" alt="ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸ã¸" height="1px"><!--ã“ã“ã§é«˜ã•ã‚’å…¥ã‚Œã¦ãŠã‹ãªã„ã¨ã€ã‚¯ã‚½ã§ã‹ã„ç”»åƒãŒä¸€ç¬èª­ã¿è¾¼ã¾ã‚Œã¦ãƒœã‚¿ãƒ³ã®å¤§ãã•ãŒæš´èµ°ã™ã‚‹-->
            </a>
            <h1 id="title_h1">
                JUNæ±ï½—ãŠã‚‚ã¡ã‚ƒã°ã“ã€‚
            </h1>
        </header>

        <div id="mannaka">

            <table border="5" bordercolor="#ffffff" align="center">
                <tr>
                    <td> ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰</td> <td bgcolor="#005000">ç§»å‹• : WASD,â†‘â†â†’â†“,KHLJ</td> <td bgcolor="#500000">ã€‡ : Enter</td> <td bgcolor="#000050">Ã— : Shift</td>
                </tr>
            </table> 
            
            <div id="parent_div">
                <canvas id="cnvs" height="1000px" width="1000px"><!--styleã®heigthã¯è¦‹ãŸç›®ã®å¤§ãã•ã‚’å¤‰ãˆã¦ã„ã‚‹ã«ã™ããªã„ã€‚è¡¨ç¤ºé ˜åŸŸã¯cssã˜ã‚ƒãªã„ã€‚-->
                </canvas>
                <canvas id="cnvs_hidden" height="1000px" width="1000px"><!--styleã®heigthã¯è¦‹ãŸç›®ã®å¤§ãã•ã‚’å¤‰ãˆã¦ã„ã‚‹ã«ã™ããªã„ã€‚è¡¨ç¤ºé ˜åŸŸã¯cssã˜ã‚ƒãªã„ã€‚-->
                </canvas>
            </div>
            <div id="buttons">
                <div id="button_left">
                    <div>
                        <input type="button" class="key_button" value="â†‘">
                    </div>
                    <div>
                        <input type="button" class="key_button" value="â†">
                        <input type="button" class="key_button" value="â†’">
                    </div>
                    <div>
                        <input type="button" class="key_button" value="â†“">
                    </div>
                    
                </div>
                <div id="button_right">
                    <input type="button" class="key_button" value="ã€‡">
                    <input type="button" class="key_button" value="Ã—">
                </div>
            </div>
            <div id="omake_div">
                <input id="download_button" type="button" value="ãƒ‡ãƒƒã‚­ã®ç”»åƒãŒä¿å­˜ãŒã§ãã‚‹ã™ã’ãˆãƒœã‚¿ãƒ³">
            </div>
            

            <footer>
                <ul id="footul">
                    <li id="foot_tweet_li">
                        <a href="" id="foot_tweet_a"><!--onload_functions()ã§hrefã‚’æ›¸ãè¾¼ã‚“ã§ã‚‹ã§ï¼-->
                            <img src="../images/site/twitterbutton.gif" alt="ãƒ„ã‚¤ãƒ¼ãƒˆãƒœã‚¿ãƒ³" id="tweet_img">
                        </a>
                    </li>
                    <li>
                        <a href="#top" id="totop"> 
                            ãƒšãƒ¼ã‚¸ä¸Šéƒ¨ã«ç§»å‹•
                        </a>
                    </li>
                </ul>
            </footer>
        </div>
    </body>
</html>
